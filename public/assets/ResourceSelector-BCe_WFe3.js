import{j as s,I as x}from"./index-BImwYGvy.js";import{r as c}from"./vendor-react-9AdXaApd.js";const A=({label:g,resources:i,selectedResources:a,onSelectionChange:l,allowWildcard:b=!0,placeholder:j="Search and select...",emptyMessage:N="No items selected"})=>{const[r,h]=c.useState(""),[y,d]=c.useState(!1),n=a.includes("*"),u=c.useMemo(()=>n?[]:i.filter(e=>{var p;const m=(((p=e.name)==null?void 0:p.en)||e.name||e.id).toLowerCase().includes(r.toLowerCase()),o=!a.includes(e.id);return m&&o}),[i,r,a,n]),f=c.useMemo(()=>n?[{id:"*",name:"All (*)",isWildcard:!0}]:a.map(e=>{var m;const t=i.find(o=>o.id===e);return t?{id:e,name:((m=t.name)==null?void 0:m.en)||t.name||t.id,isWildcard:!1}:null}).filter(Boolean),[a,i,n]),v=e=>{l(e?["*"]:[])},w=e=>{a.includes(e)||l([...a,e]),h(""),d(!1)},k=e=>{l(e==="*"?[]:a.filter(t=>t!==e))},S=()=>{n||d(!0)},W=()=>{setTimeout(()=>d(!1),200)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:g}),b&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:e=>v(e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:"All (*)"})]})]}),s.jsx("div",{className:"min-h-[2rem]",children:f.length>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(e=>s.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${e.isWildcard?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[e.name,s.jsx("button",{onClick:()=>k(e.id),className:"ml-2 text-current hover:text-red-600",children:s.jsx(x,{name:"x",size:"sm"})})]},e.id))}):s.jsx("p",{className:"text-sm text-gray-500 italic",children:N})}),!n&&s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:r,onChange:e=>h(e.target.value),onFocus:S,onBlur:W,placeholder:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),s.jsx(x,{name:"search",size:"sm",className:"absolute right-3 top-2.5 text-gray-400"})]}),y&&s.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:u.length>0?u.map(e=>{var t;return s.jsx("button",{onClick:()=>w(e.id),className:"w-full text-left px-4 py-2 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(x,{name:"plus",size:"sm",className:"mr-2 text-green-600"}),s.jsx("span",{className:"text-gray-900",children:((t=e.name)==null?void 0:t.en)||e.name||e.id})]})},e.id)}):s.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:r?"No matching items found":"Start typing to search..."})})]})]})};export{A as R};
