import{u as R,j as e,D as j,I as k,g as q}from"./index-BImwYGvy.js";import{r as o,e as B,u as H,f as W}from"./vendor-react-9AdXaApd.js";import{m as C}from"./adminApi-ChCbw-zB.js";import{f as Q}from"./schemaService-CVoZgOcb.js";import{A as _}from"./AdminAuth-DlQsuewr.js";import{A as T}from"./AdminNavigation-BmtWl3vA.js";import{D as X}from"./DualModeEditor-DudKIsvj.js";import{D as O}from"./DynamicLanguageEditor-DRjlu0Xb.js";import{i as L,v as Z,e as ee}from"./schemaValidation-BmW9IFx4.js";import"./mermaid-DechTdnA.js";import"./vendor-utils-CF1RCcgi.js";import"./teams-CwMtNG0x.js";import"./vendor-ui-lZiltAcz.js";import"./vendor-forms-DyVXvDXu.js";import"./monaco-CCrBizaJ.js";const se=s=>{if(!s||!s.id||!s.provider)return[];const g=[],b=`${s.id.toUpperCase().replace(/-/g,"_")}_API_KEY`;g.push(b);const d={openai:"OPENAI_API_KEY","openai-responses":"OPENAI_API_KEY",anthropic:"ANTHROPIC_API_KEY",mistral:"MISTRAL_API_KEY",google:"GOOGLE_API_KEY",local:"LOCAL_API_KEY"}[s.provider];return d?g.push(d):s.provider!=="iassistant"&&(g.push(`${s.provider.toUpperCase()}_API_KEY`),g.push("DEFAULT_API_KEY")),g},ae=({value:s,onChange:g,onValidationChange:b,errors:n={},isNewModel:d=!1,jsonSchema:u})=>{var S,E,N;const{t:i}=R(),[h,D]=o.useState({}),I=l=>{let m={};if(u){const y=Z(l,u);y.isValid||(m=ee(y.errors))}else l.id||(m.id="Model ID is required"),l.name||(m.name="Model name is required");D(m);const w=Object.keys(m).length===0;return b&&b({isValid:w,errors:Object.entries(m).map(([y,K])=>({field:y,message:K,severity:"error"}))}),w};o.useEffect(()=>{s&&I(s)},[s,u]);const f=(l,m)=>{g({...s,[l]:m})},r=l=>{const{name:m,value:w,type:y,checked:K}=l.target;f(m,y==="checkbox"?K:w)},A=[{value:"openai",label:"OpenAI"},{value:"openai-responses",label:"OpenAI (Responses API)"},{value:"anthropic",label:"Anthropic"},{value:"google",label:"Google"},{value:"mistral",label:"Mistral"},{value:"local",label:"Local"}],v=o.useMemo(()=>{if(!s.id||!s.provider)return null;const l=se({id:s.id,provider:s.provider}).join(`
`);return i("admin.models.hints.apiKeyEnvVars",`Environment variables (in priority order):
${l}`,{envVars:l})},[s.id,s.provider,i]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6",children:e.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:i("admin.models.edit.basicInfo")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i("admin.models.edit.basicInfoDesc","Basic information about the model")})]}),e.jsx("div",{className:"mt-5 md:mt-0 md:col-span-2",children:e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsxs("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700",children:[i("admin.models.fields.id"),L("id",u)&&e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsx("input",{type:"text",name:"id",id:"id",value:s.id||"",onChange:r,disabled:!d,className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md disabled:bg-gray-100 ${h.id||n.id?"border-red-300 text-red-900 placeholder-red-300":""}`,required:L("id",u)}),(h.id||n.id)&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:h.id||n.id}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("admin.models.hints.modelId")})]}),e.jsx("div",{className:"col-span-6 sm:col-span-3",children:e.jsx(O,{label:`${i("admin.models.fields.name")} *`,value:s.name||{[j]:""},onChange:l=>f("name",l),required:!0,error:n.name})}),e.jsx("div",{className:"col-span-6",children:e.jsx(O,{label:`${i("admin.models.fields.description")} *`,value:s.description||{[j]:""},onChange:l=>f("description",l),required:!0,type:"textarea",error:n.description})}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsxs("label",{htmlFor:"provider",className:"block text-sm font-medium text-gray-700",children:[i("admin.models.fields.provider")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"provider",name:"provider",value:s.provider||"",onChange:r,className:`mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${n.provider?"border-red-300 text-red-900":""}`,required:!0,children:[e.jsx("option",{value:"",children:i("admin.models.placeholders.selectProvider")}),A.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]}),n.provider&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.provider})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"modelId",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.modelId")}),e.jsx("input",{type:"text",name:"modelId",id:"modelId",value:s.modelId||"",onChange:r,placeholder:i("admin.models.placeholders.apiModelId"),className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${n.modelId?"border-red-300 text-red-900 placeholder-red-300":""}`}),n.modelId&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.modelId}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("admin.models.hints.apiModelId")})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsxs("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:[i("admin.models.fields.url")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"url",name:"url",id:"url",value:s.url||"",onChange:r,placeholder:i("admin.models.placeholders.apiUrl"),className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${n.url?"border-red-300 text-red-900 placeholder-red-300":""}`,required:!0}),n.url&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.url})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.apiKey","API Key")}),v&&e.jsx(k,{name:"information-circle",size:"sm",className:"text-gray-400 cursor-help",title:v})]}),e.jsx("div",{className:"mt-1 relative rounded-md shadow-sm",children:e.jsx("input",{type:"password",name:"apiKey",id:"apiKey",value:s.apiKey||"",onChange:r,placeholder:s.apiKeySet?i("admin.models.placeholders.apiKeySet","API key is set (leave blank to keep current)"):i("admin.models.placeholders.apiKey","Enter API key (optional - will use environment variable if not set)"),className:"focus:ring-indigo-500 focus:border-indigo-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("admin.models.hints.apiKey","API key for this model. If not provided, the system will use the environment variable for the provider. Keys are stored encrypted.")}),s.apiKeySet&&e.jsx("p",{className:"mt-2 text-sm text-blue-600",children:i("admin.models.hints.apiKeySet","✓ API key is configured for this model")})]})]})})]})}),e.jsx("div",{className:"bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6",children:e.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:i("admin.models.edit.configuration")}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i("admin.models.edit.configurationDesc","Advanced configuration options for the model")})]}),e.jsx("div",{className:"mt-5 md:mt-0 md:col-span-2",children:e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsxs("label",{htmlFor:"tokenLimit",className:"block text-sm font-medium text-gray-700",children:[i("admin.models.fields.tokenLimit"),L("tokenLimit",u)&&e.jsx("span",{className:"text-red-500",children:" *"})]}),e.jsx("input",{type:"number",name:"tokenLimit",id:"tokenLimit",value:s.tokenLimit||"",onChange:r,min:"1",className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${n.tokenLimit?"border-red-300 text-red-900":""}`,required:L("tokenLimit",u)}),n.tokenLimit&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.tokenLimit})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("label",{htmlFor:"concurrency",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.concurrency")}),e.jsx("input",{type:"number",name:"concurrency",id:"concurrency",value:s.concurrency||"",onChange:r,min:"1",className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${n.concurrency?"border-red-300 text-red-900":""}`}),n.concurrency&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.concurrency})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("label",{htmlFor:"requestDelayMs",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.requestDelay")}),e.jsx("input",{type:"number",name:"requestDelayMs",id:"requestDelayMs",value:s.requestDelayMs||"",onChange:r,min:"0",className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${n.requestDelayMs?"border-red-300 text-red-900":""}`}),n.requestDelayMs&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:n.requestDelayMs})]}),e.jsx("div",{className:"col-span-6",children:e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-base font-medium text-gray-900",children:"Options"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"supportsTools",name:"supportsTools",type:"checkbox",checked:s.supportsTools||!1,onChange:r,className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"supportsTools",className:"font-medium text-gray-700",children:i("admin.models.fields.supportsTools")})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"enabled",name:"enabled",type:"checkbox",checked:s.enabled!==!1,onChange:r,className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"enabled",className:"font-medium text-gray-700",children:i("admin.models.fields.enabled")})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"default",name:"default",type:"checkbox",checked:s.default||!1,onChange:r,className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx("label",{htmlFor:"default",className:"font-medium text-gray-700",children:i("admin.models.fields.defaultModel")})})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:"supportsImageGeneration",name:"supportsImageGeneration",type:"checkbox",checked:s.supportsImageGeneration||!1,onChange:r,className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{htmlFor:"supportsImageGeneration",className:"font-medium text-gray-700",children:i("admin.models.fields.supportsImageGeneration","Supports Image Generation")}),e.jsx("p",{className:"text-gray-500",children:i("admin.models.hints.supportsImageGeneration","Enable if this model can generate images (e.g., Gemini Image models)")})]})]})]})]})}),s.supportsImageGeneration&&e.jsx("div",{className:"col-span-6",children:e.jsxs("fieldset",{children:[e.jsx("legend",{className:"text-base font-medium text-gray-900",children:i("admin.models.sections.imageGeneration","Image Generation Settings")}),e.jsxs("div",{className:"mt-4 grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"imageGeneration.aspectRatio",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.aspectRatio","Aspect Ratio")}),e.jsxs("select",{id:"imageGeneration.aspectRatio",value:((S=s.imageGeneration)==null?void 0:S.aspectRatio)||"1:1",onChange:l=>f("imageGeneration",{...s.imageGeneration||{},aspectRatio:l.target.value}),className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e.jsx("option",{value:"1:1",children:"1:1 (Square)"}),e.jsx("option",{value:"16:9",children:"16:9 (Landscape)"}),e.jsx("option",{value:"9:16",children:"9:16 (Portrait)"}),e.jsx("option",{value:"5:4",children:"5:4"}),e.jsx("option",{value:"4:5",children:"4:5"}),e.jsx("option",{value:"3:2",children:"3:2"}),e.jsx("option",{value:"2:3",children:"2:3"})]})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"imageGeneration.imageSize",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.imageSize","Image Size")}),e.jsxs("select",{id:"imageGeneration.imageSize",value:((E=s.imageGeneration)==null?void 0:E.imageSize)||"1K",onChange:l=>f("imageGeneration",{...s.imageGeneration||{},imageSize:l.target.value}),className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e.jsx("option",{value:"1K",children:"1K (1024px)"}),e.jsx("option",{value:"2K",children:"2K (2048px)"}),e.jsx("option",{value:"4K",children:"4K (4096px)"})]})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{htmlFor:"imageGeneration.maxReferenceImages",className:"block text-sm font-medium text-gray-700",children:i("admin.models.fields.maxReferenceImages","Max Reference Images")}),e.jsx("input",{type:"number",id:"imageGeneration.maxReferenceImages",value:((N=s.imageGeneration)==null?void 0:N.maxReferenceImages)||14,onChange:l=>f("imageGeneration",{...s.imageGeneration||{},maxReferenceImages:parseInt(l.target.value,10)}),min:"1",max:"14",className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("admin.models.hints.maxReferenceImages","Maximum number of reference images (1-14)")})]})]})]})})]})})]})})]})},ye=()=>{var P,F;const{t:s,i18n:g}=R(),b=g.language,n=B(),{modelId:d}=H(),u=W(),i=d==="new",h="••••••••",[D,I]=o.useState(!i),[f,r]=o.useState(!1),[A,v]=o.useState(null),[S,E]=o.useState(!1),[N,l]=o.useState([]),[m,w]=o.useState(null),[y,K]=o.useState(null),[M,G]=o.useState({id:"",modelId:"",name:{[j]:""},description:{[j]:""},url:"",provider:"",tokenLimit:"",supportsTools:!1,supportsImageGeneration:!1,enabled:!0,default:!1,apiKey:"",apiKeySet:!1});o.useEffect(()=>{const t=async()=>{try{const a=await Q("model");K(a)}catch(a){console.error("Failed to load model JSON schema:",a)}};i?I(!1):U(),$(),Y(),t()},[d,i]),o.useEffect(()=>{var t;if(i&&((t=u.state)!=null&&t.templateModel)){const a=u.state.templateModel;G(x=>({...x,...a,id:"",enabled:a.enabled!==void 0?a.enabled:!0,default:!1}))}},[i,u.state]);const U=o.useCallback(async()=>{try{I(!0);const a=(await C(`/admin/models/${d}`)).data;console.log("Model loaded:",a),console.log("Model name structure:",a.name),console.log("Model description structure:",a.description);const x=p=>p?typeof p=="string"?{[j]:p}:typeof p=="object"&&p!==null?p:{[j]:""}:{[j]:""},c={...a,id:a.id||"",modelId:a.modelId||"",name:x(a.name),description:x(a.description),url:a.url||"",provider:a.provider||"",tokenLimit:a.tokenLimit||"",supportsTools:a.supportsTools||!1,enabled:a.enabled!==void 0?a.enabled:!0,default:a.default||!1};a.concurrency!==void 0&&(c.concurrency=a.concurrency),a.requestDelayMs!==void 0&&(c.requestDelayMs=a.requestDelayMs),a.apiKeySet?(c.apiKeySet=!0,c.apiKey=a.apiKeyMasked||h):(c.apiKeySet=!1,c.apiKey=""),G(c),console.log("Form data set with name:",x(a.name)),console.log("Form data set with description:",x(a.description))}catch(t){v(t.message)}finally{I(!1)}},[d]),$=o.useCallback(async()=>{try{const x=(await C("/admin/apps")).data.filter(c=>c.preferredModel===d);l(x)}catch(t){console.error("Error loading apps:",t)}},[d]),Y=o.useCallback(async()=>{try{const a=(await C("/admin/usage")).data;a.messages&&a.messages.perModel&&a.messages.perModel[d]&&w({messages:a.messages.perModel[d],tokens:a.tokens.perModel[d]||0})}catch(t){console.error("Error loading usage data:",t)}},[d]),z=t=>{G(t)},V=async t=>{t.preventDefault(),await J(M)},J=async t=>{try{r(!0),v(null);const a={...t,tokenLimit:t.tokenLimit?parseInt(t.tokenLimit):void 0,concurrency:t.concurrency?parseInt(t.concurrency):void 0,requestDelayMs:t.requestDelayMs?parseInt(t.requestDelayMs):void 0};(a.apiKey===h||a.apiKey==="")&&(t.apiKeySet&&a.apiKey===h?a.apiKey=h:a.apiKey===""&&delete a.apiKey),delete a.apiKeySet,delete a.apiKeyMasked,Object.keys(a).forEach(p=>{p==="apiKey"&&a[p]===h||(a[p]===""||a[p]===void 0)&&delete a[p]});const x=i?"/admin/models":`/admin/models/${d}`;await C(x,{method:i?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),E(!0),setTimeout(()=>{n("/admin/models")},1500)}catch(a){throw v(a.message),a}finally{r(!1)}};return D?e.jsxs(_,{children:[e.jsx(T,{}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:s("app.loading")})]})})]}):e.jsxs(_,{children:[e.jsx(T,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:s(i?"admin.models.edit.titleNew":"admin.models.edit.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:i?s("admin.models.edit.subtitleNew"):s("admin.models.edit.subtitle",{name:q(M.name,b)})})]}),e.jsxs("div",{className:"flex space-x-3",children:[!i&&e.jsxs("button",{type:"button",onClick:()=>{const t=JSON.stringify(M,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(t),x=`model-${M.id}.json`,c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",x),c.click()},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(k,{name:"download",className:"h-4 w-4 mr-2"}),s("common.download")]}),e.jsxs("button",{onClick:()=>n("/admin/models"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e.jsx(k,{name:"arrow-left",className:"h-4 w-4 mr-2"}),s("admin.models.edit.backToModels")]})]})]})}),A&&e.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(k,{name:"x-circle",className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:s("common.error")}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsx("p",{children:A})})]})]})}),S&&e.jsx("div",{className:"mb-6 rounded-md bg-green-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(k,{name:"check-circle",className:"h-5 w-5 text-green-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-green-800",children:s("admin.models.edit.success",{action:s(i?"admin.models.edit.successCreated":"admin.models.edit.successUpdated")})})})]})}),e.jsxs("form",{onSubmit:V,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(X,{value:M,onChange:z,formComponent:ae,formProps:{isNewModel:i,apps:N,usage:m,jsonSchema:y},jsonSchema:y,title:s(i?"admin.models.edit.titleNew":"admin.models.edit.title")}),!i&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("admin.models.edit.usageStats")})}),e.jsx("div",{className:"px-6 py-4",children:m?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:((P=m.messages)==null?void 0:P.toLocaleString())||0}),e.jsx("div",{className:"text-sm text-gray-500",children:s("admin.models.details.messages")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:((F=m.tokens)==null?void 0:F.toLocaleString())||0}),e.jsx("div",{className:"text-sm text-gray-500",children:s("admin.models.details.tokens")})]})]}):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:s("admin.models.edit.noUsageData")})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("admin.models.edit.appsUsingModel")})}),e.jsx("div",{className:"px-6 py-4",children:N.length>0?e.jsx("div",{className:"space-y-3",children:N.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-md flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:t.color||"#6B7280"},children:e.jsx(k,{name:t.icon||"chat-bubbles",className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:q(t.name,b)}),e.jsx("div",{className:"text-xs text-gray-500",children:t.id})]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.enabled?s("admin.models.status.enabled"):s("admin.models.status.disabled")})]},t.id))}):e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:s("admin.models.edit.noApps")})})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>n("/admin/models"),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:s("common.cancel")}),e.jsx("button",{type:"submit",disabled:f,className:"inline-flex justify-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:s(f?"admin.models.edit.saving":i?"admin.models.edit.createModel":"admin.models.edit.saveChanges")})]})]})]})]})};export{ye as default};
