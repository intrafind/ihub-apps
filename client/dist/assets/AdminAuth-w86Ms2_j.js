import{b as w,c as A,a as S,j as e,I as s,d as k}from"./index-CdJiYb_a.js";import{r as c}from"./vendor-react-9AdXaApd.js";const q=({children:f})=>{var g;const{isAuthenticated:d,authRequired:o,isLoading:p,login:b,logout:N}=w(),{isAuthenticated:l}=A(),{platformConfig:t}=S(),[m,n]=c.useState(""),[x,a]=c.useState(""),[u,h]=c.useState(!1),r=((g=t==null?void 0:t.auth)==null?void 0:g.mode)||"anonymous",y=async i=>{i.preventDefault(),a(""),h(!0);const j=await b(m);j.success||(a(j.error),n("")),h(!1)},v=()=>{N(),n(""),a("")};return p?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking authentication..."})]})}):!o||d?e.jsxs("div",{children:[o&&d&&e.jsx("div",{className:"bg-green-50 border-b border-green-200 px-4 py-2",children:e.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"shield-check",className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Admin authenticated"})]}),e.jsx("button",{onClick:v,className:"text-sm text-green-600 hover:text-green-800 font-medium",children:"Logout"})]})}),f]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-indigo-100",children:e.jsx(s,{name:"shield-check",className:"h-6 w-6 text-indigo-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Admin Access Required"}),r==="anonymous"?e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your admin secret to access the admin panel"}):e.jsxs("div",{className:"mt-2 text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Admin access requires authentication with admin privileges."}),l?e.jsx("p",{className:"mt-1 text-red-600",children:"Your account does not have admin access. Contact your administrator."}):e.jsx("p",{className:"mt-1 text-blue-600",children:"Please log in with an admin account to access the admin panel."})]})]}),r==="anonymous"&&e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[e.jsx("div",{className:"rounded-md shadow-sm -space-y-px",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-secret",className:"sr-only",children:"Admin Secret"}),e.jsx("input",{id:"admin-secret",name:"admin-secret",type:"password",required:!0,className:"appearance-none rounded-md relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Admin secret",value:m,onChange:i=>n(i.target.value)})]})}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex",children:[e.jsx(s,{name:"exclamation-triangle",className:"h-5 w-5 text-red-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:x})})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Authenticating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{name:"shield-check",className:"h-4 w-4 mr-2"}),"Authenticate"]})})})]}),r!=="anonymous"&&!l&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:k("/"),className:"text-indigo-600 hover:text-indigo-500 font-medium",children:"‚Üê Return to login"})})]})})};export{q as A};
