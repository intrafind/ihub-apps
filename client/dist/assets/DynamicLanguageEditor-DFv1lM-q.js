import{u as S,j as t,I as p}from"./index-CdJiYb_a.js";import{r as N}from"./vendor-react-9AdXaApd.js";import{h as E}from"./adminApi-DCK2UDnY.js";const I=({label:w,value:a={},onChange:r,required:m=!1,type:b="text",placeholder:h={},className:v="",fieldType:n=null,error:l=null})=>{const{t:i}=S(),[f,j]=N.useState(!1),[o,g]=N.useState(""),u=n?Object.keys(a).reduce((e,s)=>(a[s]&&typeof a[s]=="object"&&a[s][n]&&(e[s]=a[s][n]),e),{}):a,d=Object.keys(u),L=["en","de","es","fr","it","pt","nl","sv","no","da","fi","pl","cs","hu","ro","bg","hr","sk","sl","et","lv","lt","ru","uk","zh","ja","ko","ar","he","th","vi","hi","bn","ta","te","ml","kn","gu","pa","or","as","sa","ne","si","my","km","lo","ka","am","ti","so","sw","zu","xh","af","tr","az","kk","ky","uz","tg","mn","bo","dz","mk","al","sq","sr","bs","mt","cy","ga","gd","br","co","eu","ca","gl","oc","ast","an","ia","ie","io","eo","vo","la","grc","got","non","ang","enm","gmh","goh","gem","cel","ine","sla","bat","fin","hun","baq","kar","cau","sem","cus","ber","egy","cop","akk","sux","elx","peo","ave","pal","xpr","sog","xco","kho","zza","ku","ckb","lrc","prs","tly","glk","mzn","ryu","wuu","yue","hak","nan","cdo","gan","hsn","xiang","cmn","lzh","och","ltc","mkh","hmn","tai","aav","map","poz","phi","pqe","pqw","pow","mp","cmp","emp","wmp","plf"],z=()=>{o&&!d.includes(o)&&(r(n?{...a,[o]:{...a[o],[n]:""}}:{...a,[o]:""}),g(""),j(!1))},C=e=>{if(n){const s={...a};s[e]&&typeof s[e]=="object"&&(delete s[e][n],Object.keys(s[e]).length===0&&delete s[e]),r(s)}else{const s={...a};delete s[e],r(s)}},x=(e,s)=>{r(n?{...a,[e]:{...a[e],[n]:s}}:{...a,[e]:s})},A=async e=>{var y;const s=d.find(c=>c!==e&&u[c]);if(!s)return;const k=n?((y=a[s])==null?void 0:y[n])||"":a[s]||"";if(k)try{const c=await E({text:k,from:s,to:e});x(e,c.translation)}catch(c){console.error("Translation failed",c)}},q=L.filter(e=>!d.includes(e));return t.jsxs("div",{className:`space-y-4 ${v}`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[w,m&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("button",{type:"button",onClick:()=>j(!f),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.jsx(p,{name:"plus-circle",className:"w-3 h-3 mr-1"}),i("admin.apps.edit.addLanguage","Add Language")]})]}),f&&t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("select",{value:o,onChange:e=>g(e.target.value),className:"block w-32 rounded-lg border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[t.jsx("option",{value:"",children:i("admin.apps.edit.selectLanguage","Select...")}),q.map(e=>t.jsx("option",{value:e,children:e.toUpperCase()},e))]}),t.jsx("input",{type:"text",value:o,onChange:e=>g(e.target.value.toLowerCase()),placeholder:i("admin.apps.edit.languageCode","Language code (e.g., en, de, es)"),className:"flex-1 block rounded-lg border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500"}),t.jsx("button",{type:"button",onClick:z,disabled:!o||d.includes(o),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i("admin.apps.edit.add","Add")})]})}),t.jsx("div",{className:"space-y-3",children:d.map(e=>t.jsxs("div",{className:"flex items-start space-x-2",children:[t.jsx("div",{className:"flex-shrink-0 w-12 pt-2",children:t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.toUpperCase()})}),t.jsx("div",{className:"flex-1",children:b==="textarea"?t.jsx("textarea",{value:u[e]||"",onChange:s=>x(e,s.target.value),placeholder:h[e]||"",rows:3,className:`block w-full rounded-lg border px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${l?"border-red-300 focus:border-red-500":"border-gray-300"}`,required:m&&e==="en"}):t.jsx("input",{type:b,value:u[e]||"",onChange:s=>x(e,s.target.value),placeholder:h[e]||"",className:`block w-full rounded-lg border px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${l?"border-red-300 focus:border-red-500":"border-gray-300"}`,required:m&&e==="en"})}),t.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[t.jsx("button",{type:"button",onClick:()=>A(e),className:"p-1 text-indigo-500 hover:text-indigo-700",title:i("admin.translateField","Translate"),children:t.jsx(p,{name:"globe",className:"w-4 h-4"})}),t.jsx("button",{type:"button",onClick:()=>C(e),className:"p-1 text-red-500 hover:text-red-700",disabled:e==="en",children:t.jsx(p,{name:"x",className:"w-4 h-4"})})]})]},e))}),d.length===0&&t.jsx("div",{className:"text-sm text-gray-500 italic",children:i("admin.apps.edit.noLanguages","No languages configured. Add a language to get started.")}),l&&t.jsx("div",{className:"mt-1 text-sm text-red-600",children:l})]})};export{I as D};
