const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CdJiYb_a.js","./vendor-react-9AdXaApd.js","./mermaid-DechTdnA.js","./vendor-utils-CF1RCcgi.js","./teams-CwMtNG0x.js","./vendor-ui-lZiltAcz.js","./vendor-forms-DyVXvDXu.js","./index-6Ml9pWqe.css"])))=>i.map(i=>d[i]);
import{_ as A}from"./mermaid-DechTdnA.js";import{e as P,d as h}from"./index-CdJiYb_a.js";const t=async(s,e={})=>{var p,m;const o=localStorage.getItem("adminToken"),a={url:s.startsWith("/")?s:`/${s}`,method:e.method||"GET",...e};a.headers=a.headers||{};const d=e.body instanceof FormData;e.body&&(d?(a.data=e.body,a.headers={...e.headers}):typeof e.body=="string"?(a.data=JSON.parse(e.body),a.headers={"Content-Type":"application/json",...a.headers,...e.headers}):(a.data=e.body,a.headers={"Content-Type":"application/json",...a.headers,...e.headers}));const i=localStorage.getItem("authToken");i?a.headers.Authorization=`Bearer ${i}`:o&&(a.headers.Authorization=`Bearer ${o}`);try{if(d){const u=`/api${a.url}`,{getSessionId:w}=await A(async()=>{const{getSessionId:c}=await import("./index-CdJiYb_a.js").then(f=>f.t);return{getSessionId:c}},__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url),g=w(),T={...a.headers,"X-Session-ID":g},n=await fetch(u,{method:a.method,headers:T,body:a.data,credentials:"include"});if(!n.ok){const c=new Error(`HTTP ${n.status}`);throw c.response={status:n.status,statusText:n.statusText,data:await n.json().catch(()=>({}))},c}return{data:await n.json(),status:n.status,headers:Object.fromEntries(n.headers.entries())}}else return await P(a)}catch(r){throw(((p=r.response)==null?void 0:p.status)===401||((m=r.response)==null?void 0:m.status)===403)&&(o&&localStorage.removeItem("adminToken"),window.location.pathname.startsWith("/admin")&&(localStorage.getItem("authToken")?window.location.href=h("/admin"):window.location.href=h("/"))),r}},S=async()=>(await t("/admin/usage")).data,b=async()=>(await t("/admin/cache/stats")).data,$=async()=>(await t("/admin/apps")).data,E=async()=>{try{const e=(await t("/admin/models")).data;return Array.isArray(e)?e:[]}catch(s){throw console.error("Error in fetchAdminModels:",s),s}},I=async()=>{try{const e=(await t("/admin/prompts")).data;return Array.isArray(e)?e:[]}catch(s){throw console.error("Error in fetchAdminPrompts:",s),s}},O=async()=>(await t("/admin/apps/templates")).data,U=async s=>(await t(`/admin/apps/${s}/inheritance`)).data,_=async s=>(await t("/admin/prompts",{method:"POST",body:s})).data,k=async(s,e)=>(await t(`/admin/prompts/${s}`,{method:"PUT",body:e})).data,j=async({text:s,from:e,to:o})=>(await t("/admin/translate",{method:"POST",body:{text:s,from:e,to:o}})).data,C=async(s,e)=>{const o=Array.isArray(s)?s.join(","):s;return(await t(`/admin/apps/${o}/_toggle`,{method:"POST",body:{enabled:e}})).data},D=async()=>(await t("/admin/pages")).data,L=async s=>(await t(`/admin/pages/${s}`)).data,x=async s=>(await t("/admin/pages",{method:"POST",body:s})).data,v=async(s,e)=>{const o=Array.isArray(s)?s.join(","):s;return(await t(`/admin/models/${o}/_toggle`,{method:"POST",body:{enabled:e}})).data},R=async(s,e)=>(await t(`/admin/pages/${s}`,{method:"PUT",body:e})).data,M=async(s,e)=>{const o=Array.isArray(s)?s.join(","):s;return(await t(`/admin/prompts/${o}/_toggle`,{method:"POST",body:{enabled:e}})).data},z=async s=>(await t(`/admin/pages/${s}`,{method:"DELETE"})).data,B=async()=>await t("/admin/ui/config"),F=async s=>await t("/admin/ui/config",{method:"POST",body:{config:s}}),H=async()=>await t("/admin/ui/backup",{method:"POST"}),W=async()=>await t("/admin/ui/assets"),q=async s=>await t("/admin/ui/upload-asset",{method:"POST",body:s}),G=async s=>await t(`/admin/ui/assets/${s}`,{method:"DELETE"}),y=async()=>{try{const e=(await t("/admin/sources")).data;return Array.isArray(e)?e:[]}catch(s){throw console.error("Error in fetchAdminSources:",s),s}},l=async s=>(await t(`/admin/sources/${s}`)).data,J=async s=>(await t("/admin/sources",{method:"POST",body:s})).data,N=async(s,e)=>(await t(`/admin/sources/${s}`,{method:"PUT",body:e})).data,V=async s=>(await t(`/admin/sources/${s}`,{method:"DELETE"})).data,X=async(s,e)=>(await t(`/admin/sources/${s}/test`,{method:"POST",body:e})).data,K=async(s,e)=>(await t("/admin/sources/_toggle",{method:"POST",body:{ids:Array.isArray(s)?s:[s],enabled:e}})).data,Q=async()=>{try{const e=(await t("/admin/tools")).data;return Array.isArray(e)?e:[]}catch(s){throw console.error("Error in fetchAdminTools:",s),s}},Y=async s=>(await t(`/admin/tools/${s}`)).data,Z=async s=>(await t("/admin/tools",{method:"POST",body:s})).data,ss=async(s,e)=>(await t(`/admin/tools/${s}`,{method:"PUT",body:e})).data,es=async s=>(await t(`/admin/tools/${s}`,{method:"DELETE"})).data,ts=async s=>(await t(`/admin/tools/${s}/toggle`,{method:"POST"})).data,as=async s=>(await t(`/admin/tools/${s}/script`)).data,os=async(s,e)=>(await t(`/admin/tools/${s}/script`,{method:"PUT",body:{content:e}})).data,cs={makeAdminApiCall:t,fetchAdminUsageData:S,fetchAdminCacheStats:b,fetchAdminApps:$,fetchAdminModels:E,fetchAdminPrompts:I,fetchAdminAppTemplates:O,fetchAppInheritance:U,createPrompt:_,updatePrompt:k,translateText:j,toggleApps:C,fetchAdminPages:D,fetchAdminPage:L,createPage:x,toggleModels:v,updatePage:R,togglePrompts:M,deletePage:z,getUIConfig:B,updateUIConfig:F,backupUIConfig:H,getUIAssets:W,uploadUIAsset:q,deleteUIAsset:G,fetchAdminSources:y,getSources:y,fetchAdminSource:l,getSource:l,createSource:J,updateSource:N,deleteSource:V,testSource:X,toggleSources:K,fetchAdminTools:Q,fetchAdminTool:Y,createTool:Z,updateTool:ss,deleteTool:es,toggleTool:ts,fetchToolScript:as,updateToolScript:os};export{Q as a,D as b,z as c,es as d,L as e,S as f,x as g,j as h,$ as i,v as j,I as k,M as l,t as m,as as n,Z as o,ss as p,os as q,_ as r,k as s,ts as t,R as u,O as v,C as w,cs as x};
