import{u as N,g as l,j as e,I as s}from"./index-CdJiYb_a.js";import{e as w,r as i}from"./vendor-react-9AdXaApd.js";import{A as P}from"./AdminAuth-w86Ms2_j.js";import{A}from"./AdminNavigation-CghX6zwW.js";import{m as I}from"./adminApi-DCK2UDnY.js";import"./mermaid-DechTdnA.js";import"./vendor-utils-CF1RCcgi.js";import"./teams-CwMtNG0x.js";import"./vendor-ui-lZiltAcz.js";import"./vendor-forms-DyVXvDXu.js";const z=()=>{const{t:a,i18n:y}=N(),d=y.language,f=w(),[v,x]=i.useState([]),[b,m]=i.useState(!0),[g,p]=i.useState(null),[o,j]=i.useState(""),k=async()=>{try{m(!0),p(null);const t=(await I("/admin/providers")).data,n=Array.isArray(t)?t:[];x(n),n.length===0&&console.warn("No providers returned from API")}catch(r){console.error("Error loading providers:",r),p(r.message),x([])}finally{m(!1)}};i.useEffect(()=>{k()},[]);const h=r=>{f(`/admin/providers/${r}`)},u=v.filter(r=>{const t=l(r.name,d).toLowerCase(),n=l(r.description,d).toLowerCase(),c=o.toLowerCase();return t.includes(c)||n.includes(c)||r.id.includes(c)});return e.jsx(P,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(A,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:a("admin.providers.title","Provider Credentials")}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:a("admin.providers.description","Manage API keys for LLM providers. Provider-level keys are used as fallback for models that do not have their own API key configured.")})]}),g&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(s,{name:"ExclamationCircleIcon",className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:g})]})}),e.jsx("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(s,{name:"MagnifyingGlassIcon",className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a("admin.providers.search","Search providers..."),value:o,onChange:r=>j(r.target.value),className:"pl-10 w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})})}),b?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("admin.providers.table.provider","Provider")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("admin.providers.table.description","Description")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("admin.providers.table.apiKey","API Key")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("admin.providers.table.status","Status")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("admin.providers.table.actions","Actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:o?a("admin.providers.noResults","No providers found matching your search."):a("admin.providers.noProviders","No providers configured.")})}):u.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>h(r.id),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(r.name,d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.id})]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-300",children:l(r.description,d)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.apiKeySet?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:[e.jsx(s,{name:"KeyIcon",className:"w-3 h-3 mr-1"}),a("admin.providers.configured","Configured")]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:[e.jsx(s,{name:"ExclamationTriangleIcon",className:"w-3 h-3 mr-1"}),a("admin.providers.notConfigured","Not Configured")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.enabled?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200",children:a("admin.providers.enabled","Enabled")}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:a("admin.providers.disabled","Disabled")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:t=>{t.stopPropagation(),h(r.id)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:a("admin.providers.configure","Configure")})})]},r.id))})]})}),e.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(s,{name:"InformationCircleIcon",className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:a("admin.providers.info.title","API Key Priority")}),e.jsx("p",{children:a("admin.providers.info.description","When a model requests an API key, the system checks in this order: 1) Model-specific API key, 2) Provider-level API key (configured here), 3) Environment variable. This allows you to set a default API key for all models of a provider while still allowing individual models to override it.")})]})]})})]})]})})};export{z as default};
