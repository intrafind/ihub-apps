const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./cache-DemEyH2m.js","./vendor-react-9AdXaApd.js","./mermaid-DechTdnA.js","./vendor-utils-CF1RCcgi.js","./teams-CwMtNG0x.js","./vendor-ui-lZiltAcz.js","./vendor-forms-DyVXvDXu.js","./index-B6qKirJC.js","./jszip.min-R-ITyDYD.js","./index-C9oQ90Gt.js","./jszip.min-BBsE_OR0.js","./AdminHome-B-bUeNHD.js","./AdminAuth-w86Ms2_j.js","./AdminNavigation-CghX6zwW.js","./AdminUsageReports-Cm91qiJx.js","./adminApi-DCK2UDnY.js","./AdminSystemPage-CUYMCBge.js","./AdminAppsPage-bwhFeVsm.js","./AdminAppEditPage-Cb8XKG3a.js","./DualModeEditor-u5gL3giJ.js","./monaco-CCrBizaJ.js","./DynamicLanguageEditor-DFv1lM-q.js","./schemaValidation-BmW9IFx4.js","./schemaService-Ch_9A-Q2.js","./AdminShortLinks-DUh1IKf6.js","./AdminShortLinkEditPage-DI-Brg51.js","./AdminModelEditPage-n5dkY71-.js","./AdminModelsPage-BrhYji-5.js","./AdminProvidersPage-BZjyp6af.js","./AdminProviderEditPage-DM5o0msI.js","./AdminPromptsPage-DR_OrjZ2.js","./AdminPromptEditPage-CsWvTPsM.js","./AdminToolsPage-CiLL1EX2.js","./AdminToolEditPage-FPvNrHCs.js","./AdminSourcesPage-94pIeor7.js","./AdminSourceEditPage-Ck_vlrSr.js","./AdminPagesPage-MiJauI-f.js","./AdminPageEditPage-DlzWM1ym.js","./AdminAuthPage-DeVJrdt-.js","./AdminOAuthClientsPage-DvZpFuT5.js","./AdminOAuthClientEditPage-CM5uqcuD.js","./ResourceSelector-Ds8e5c_J.js","./AdminUsersPage-371xoMQZ.js","./AdminUserEditPage-CjtQMbkv.js","./AdminGroupsPage-C4DzFVVO.js","./AdminGroupEditPage-BShYKI8t.js","./AdminUICustomization-X8Zq4ID5.js","./IntegrationsPage-Ds8-A4TS.js","./TeamsWrapper-BXQlOWVY.js","./TeamsAuthStart-BFaAgTLW.js","./TeamsAuthEnd-BbM1StWR.js"])))=>i.map(i=>d[i]);
var ka=Object.defineProperty;var ys=t=>{throw TypeError(t)};var Sa=(t,e,r)=>e in t?ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ut=(t,e,r)=>Sa(t,typeof e!="symbol"?e+"":e,r),Ea=(t,e,r)=>e.has(t)||ys("Cannot "+r);var js=(t,e,r)=>e.has(t)?ys("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);var Ke=(t,e,r)=>(Ea(t,e,"access private method"),r);import{b as Ca,d as Na,g as Ln,r as o,e as rt,h as ks,L as _e,f as Mn,i as or,O as La,R as ee,u as ir,N as xr,B as Ma,j as Ra,k as oe}from"./vendor-react-9AdXaApd.js";import{_ as le}from"./mermaid-DechTdnA.js";import{a as Rn,F as An,v as Tt,m as qe,T as In}from"./vendor-utils-CF1RCcgi.js";import{r as Aa}from"./teams-CwMtNG0x.js";import{b as Ia}from"./vendor-forms-DyVXvDXu.js";import"./vendor-ui-lZiltAcz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var br={exports:{}},Ct={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss;function Ta(){if(Ss)return Ct;Ss=1;var t=Ca(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(d,l,u){var b,g={},m=null,w=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(w=l.ref);for(b in l)n.call(l,b)&&!i.hasOwnProperty(b)&&(g[b]=l[b]);if(d&&d.defaultProps)for(b in l=d.defaultProps,l)g[b]===void 0&&(g[b]=l[b]);return{$$typeof:e,type:d,key:m,ref:w,props:g,_owner:a.current}}return Ct.Fragment=r,Ct.jsx=c,Ct.jsxs=c,Ct}var Es;function $a(){return Es||(Es=1,br.exports=Ta()),br.exports}var s=$a(),zt={},Cs;function Fa(){if(Cs)return zt;Cs=1;var t=Na();return zt.createRoot=t.createRoot,zt.hydrateRoot=t.hydrateRoot,zt}var Pa=Fa();const Oa=Ln(Pa),Da=()=>{let e=window.location.pathname.replace(/\/index\.html$/,"").replace(/\/$/,"");const r=["/apps","/admin","/auth","/login","/chat","/pages","/s/"];for(const n of r){const a=e.indexOf(n);if(a>0){e=e.substring(0,a);break}else if(a===0){e="";break}}return e},lr=()=>{const t="runtime-base-path";let e=sessionStorage.getItem(t);return e===null&&(e=Da(),sessionStorage.setItem(t,e)),e},Pt=t=>{const e=lr();if(t.startsWith("http://")||t.startsWith("https://"))return t;const r=t.startsWith("/")?t.substring(1):t;return e?e+"/"+r:"/"+r},Ir=t=>{const e=t.startsWith("/")?t.substring(1):t;return Pt("api/"+e)},Tn=t=>{const e=t.startsWith("/")?t.substring(1):t;return Pt(e)},ih=t=>{const e=t.startsWith("/")?t.substring(1):t;return Pt("uploads/"+e)},$n=t=>{const e=lr();return e?t.startsWith(e+"/")?t.substring(e.length):t===e?"/":t:t},_a=()=>{const t=lr();return window.__BASE_PATH__=t,t},Fn=480*60*1e3,Ns="ai_hub_session_id",$t="ai_hub_session_expiry",Ua=()=>{const t=Date.now(),e=Math.random().toString(36).substring(2,10);return`session-${t}-${e}`},Ot=()=>{const t=sessionStorage.getItem(Ns),e=sessionStorage.getItem($t),r=Date.now();if(t&&e&&r<parseInt(e))return t;const n=Ua(),a=r+Fn;return sessionStorage.setItem(Ns,n),sessionStorage.setItem($t,a.toString()),console.log("Created new session ID:",n),n},Tr=()=>{const t=Ot(),e=Date.now()+Fn;return sessionStorage.setItem($t,e.toString()),t},Pn=()=>{const t=sessionStorage.getItem($t);if(!t)return 0;const e=Date.now(),r=parseInt(t);return Math.max(0,r-e)},On=()=>{const t=Pn(),e=3600*1e3;return t<e},Dn=()=>{const t=Ot(),e=sessionStorage.getItem($t);return{sessionId:t,expiresAt:e?parseInt(e):null,createdAt:t.split("-")[1],userAgent:navigator.userAgent,language:navigator.language}},lh=Object.freeze(Object.defineProperty({__proto__:null,getSessionId:Ot,getSessionInfo:Dn,getSessionRemainingTime:Pn,renewSession:Tr,shouldRenewSession:On},Symbol.toStringTag,{value:"Module"})),_n=Ir(""),Un=3e4,za=3e5,be=Rn.create({baseURL:_n,headers:{"Content-Type":"application/json"},timeout:Un,withCredentials:!0,validateStatus:function(t){return t>=200&&t<300||t===304}}),$r=Rn.create({baseURL:_n,headers:{"Content-Type":"application/json"},timeout:za,withCredentials:!0,validateStatus:function(t){return t>=200&&t<300||t===304}}),zn=t=>{t.interceptors.request.use(e=>{const r=Ot();On()&&Tr(),e.headers["X-Session-ID"]=r;const n=localStorage.getItem("authToken");return n&&(e.headers.Authorization=`Bearer ${n}`),e})};zn(be);zn($r);const Bn=t=>{t.interceptors.response.use(e=>(e.status===304&&(e.isNotModified=!0),e),async e=>{var n;const r=e.config;return((n=e.response)==null?void 0:n.status)===401?(localStorage.getItem("authToken")&&(console.log("Authentication token expired or invalid, clearing localStorage token"),localStorage.removeItem("authToken")),window.dispatchEvent(new CustomEvent("authTokenExpired")),Promise.reject(e)):r.method==="get"&&!r._retry&&!e.response?(r._retry=!0,console.log("Network error, retrying request once:",r.url),await new Promise(a=>setTimeout(a,1e3)),t(r)):Promise.reject(e)})};Bn(be);Bn($r);class Ba{constructor(e={}){this.store=new Map,this.maxSize=e.maxSize||200,this.stats={hits:0,misses:0,sets:0,deletes:0,cleanups:0},this.persistenceEnabled=e.persistence===!0,this.persistenceKey=e.persistenceKey||"ai_hub_cache",this.storageType=e.storageType||"session",this.saveTimeout=null,this.cleanupInterval=setInterval(()=>this.cleanup(),300*1e3)}get(e){if(!this.store.has(e))return this.stats.misses++,null;const r=this.store.get(e);return r.expiry&&r.expiry<Date.now()?(this.delete(e),this.stats.misses++,null):(r.lastAccessed=Date.now(),r.hits++,this.stats.hits++,r.value&&typeof r.value=="object"&&r.value.data!==void 0,r.value)}set(e,r,n=null){this.store.size>=this.maxSize&&!this.store.has(e)&&this.evictLeastRecent();const a=n?Date.now()+n:null;return this.store.set(e,{value:r,expiry:a,createdAt:Date.now(),lastAccessed:Date.now(),hits:0}),this.stats.sets++,this.persistenceEnabled&&this.debouncedSaveToStorage(),r}delete(e){const r=this.store.delete(e);return r&&(this.stats.deletes++,this.persistenceEnabled&&this.debouncedSaveToStorage()),r}clear(){const e=this.store.size;this.store.clear(),this.stats.deletes+=e}cleanup(){const e=Date.now();let r=0;for(const[n,a]of this.store.entries())a.expiry&&a.expiry<e&&(this.store.delete(n),r++);return r>0&&(this.stats.cleanups++,this.stats.deletes+=r,this.persistenceEnabled&&r>0&&this.debouncedSaveToStorage()),r}evictLeastRecent(){if(this.store.size===0)return;let e=null,r=null;for(const[n,a]of this.store.entries())(e===null||a.lastAccessed<e)&&(e=a.lastAccessed,r=n);r&&this.delete(r)}get size(){return this.store.size}saveToStorage(){}debouncedSaveToStorage(){this.persistenceEnabled&&(clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>this.saveToStorage(),500))}loadFromStorage(){}}const We={SHORT:60*1e3,MEDIUM:300*1e3,LONG:1800*1e3,VERY_LONG:1440*60*1e3},Xe={MODELS_LIST:"models-list",STYLES:"styles",PROMPTS:"prompts",UI_CONFIG:"ui-config",AUTH_STATUS:"auth-status"},Fr=(t,e={})=>{if(!e||Object.keys(e).length===0)return t;const r=Object.entries(e).filter(([,n])=>n!=null).map(([n,a])=>`${n}=${a}`).sort().join("&");return r?`${t}?${r}`:t},jt=new Ba({persistence:!1,persistenceKey:"ai_hub_apps_cache",storageType:"session"}),Nt=new Map,Me=async(t,e=null,r=We.MEDIUM,n=!0,a=!1)=>{try{if(e){const c=jt.get(e);if(c&&!a)return console.log(`Cache hit for: ${e}`),c.data!==void 0?c.data:c}if(n&&e){const c=Nt.get(e);if(c)return console.log(`Deduplicating request for: ${e}`),c}const i=(async()=>{var c,d,l,u,b,g,m,w,h,p,f,v,x,j,y,C,k,I;try{const E=await t();if(E.status===304||E.isNotModified){console.log(`304 Not Modified for: ${e}`);const N=jt.get(e);if(N)return N.data!==void 0?N.data:N;throw new Error("304 Not Modified but no cached data available")}const O=E.data;if(e&&O){const N={data:O,timestamp:Date.now()};a&&E.headers.etag&&(N.etag=E.headers.etag),jt.set(e,N,r)}return O}catch(E){let O=((d=(c=E.response)==null?void 0:c.data)==null?void 0:d.error)||E.message||"An unexpected error occurred",N=O;Ls(E)?N="Request timed out. The operation may have taken longer than expected.":((l=E.response)==null?void 0:l.status)===403?N="You do not have permission to access this resource. Please contact your administrator if you believe this is an error.":((u=E.response)==null?void 0:u.status)===401?(g=(b=E.response)==null?void 0:b.data)!=null&&g.message&&E.response.data.message!=="Authentication required"?N=E.response.data.message:(w=(m=E.response)==null?void 0:m.data)!=null&&w.error&&E.response.data.error!=="Authentication required"?N=E.response.data.error:N="Authentication required. Please log in to access this resource.":((h=E.response)==null?void 0:h.status)===404?N="The requested resource was not found.":((p=E.response)==null?void 0:p.status)>=500&&(N="A server error occurred. Please try again later.");const M=new Error(N);if(M.status=((f=E.response)==null?void 0:f.status)||500,M.originalError=E,M.originalMessage=O,M.userFriendlyMessage=N,M.isAccessDenied=((v=E.response)==null?void 0:v.status)===403,M.isAuthRequired=((x=E.response)==null?void 0:x.status)===401,M.isTimeout=Ls(E),M.requestDetails={url:(j=E.config)==null?void 0:j.url,method:(y=E.config)==null?void 0:y.method,timestamp:new Date().toISOString()},console.error(`API Error: ${M.originalMessage}`,{status:M.status,userFriendlyMessage:M.message,details:(C=E.response)==null?void 0:C.data,url:(k=E.config)==null?void 0:k.url}),((I=E.response)==null?void 0:I.status)>=500&&e){const _={error:M.message,isErrorPlaceholder:!0,status:M.status};jt.set(e,_,We.SHORT)}throw M}finally{e&&Nt.delete(e)}})();return n&&e&&(Nt.set(e,i),setTimeout(()=>{Nt.get(e)===i&&Nt.delete(e)},Un+1e3)),i}catch(i){throw console.error("Error in handleApiResponse wrapper:",i),i}},Ls=t=>{var e,r,n;return((e=t==null?void 0:t.message)==null?void 0:e.includes("timeout"))||((n=(r=t==null?void 0:t.originalError)==null?void 0:r.message)==null?void 0:n.includes("timeout"))||(t==null?void 0:t.code)==="ECONNABORTED"},Vn=async(t={})=>{const{language:e=null}=t;return Me(()=>be.get("/apps",{params:{language:e}}),null,null)},cr=async(t,e={})=>{const{language:r=null}=e;return Me(()=>be.get(`/apps/${t}`,{params:{language:r}}),null,null)},Va=async(t,e,r,n={})=>{if(!t||!e||!r)throw new Error("Missing required parameters");return Me(()=>$r.post(`/apps/${t}/chat/${e}`,{messages:r,...n}),null,null,!1)},Ha=async(t,e)=>Me(()=>be.post(`/apps/${t}/chat/${e}/stop`),null,null,!1),Wa=async(t,e)=>Me(()=>be.get(`/apps/${t}/chat/${e}/status`),null,null,!1),Za=async(t,e,r="default",n={},a="iHub Apps")=>{if(!t)throw new Error("Missing required parameters");const i=qa(t,e,r,n,a),c=window.open("","_blank");c.document.write(i),c.document.close(),await new Promise(u=>{c.onload=u,setTimeout(u,1e3)}),c.focus(),c.print(),setTimeout(()=>{c.close()},1e3);const d=new Date().toISOString().slice(0,19).replace(/:/g,"-");return{success:!0,filename:`chat-${a.replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${d}.pdf`}},qa=(t,e,r,n,a)=>{const i=Ga(r),c=Ja(n),d=g=>{try{return new Date(g).toLocaleString()}catch{return new Date().toLocaleString()}},l=g=>g?g.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"):"",u=t.filter(g=>!g.isGreeting).map(g=>{const m=g.role==="user"?"user-message":"assistant-message",w=g.role==="user"?"User":"Assistant";return`
        <div class="message ${m}">
          <div class="message-header">
            <span class="role">${w}</span>
            <span class="timestamp">${d(g.timestamp||Date.now())}</span>
          </div>
          <div class="message-content">
            <p>${l(g.content)}</p>
          </div>
        </div>
      `}).join(""),b=e?`
    <div class="metadata">
      <h3>Chat Settings</h3>
      <div class="metadata-grid">
        ${e.model?`<div><strong>Model:</strong> ${e.model}</div>`:""}
        ${e.temperature!==void 0?`<div><strong>Temperature:</strong> ${e.temperature}</div>`:""}
        ${e.style?`<div><strong>Style:</strong> ${e.style}</div>`:""}
        ${e.outputFormat?`<div><strong>Output Format:</strong> ${e.outputFormat}</div>`:""}
        ${e.variables&&Object.keys(e.variables).length>0?`
          <div><strong>Variables:</strong> ${Object.entries(e.variables).map(([g,m])=>`${g}: ${m}`).join(", ")}</div>
        `:""}
      </div>
    </div>
  `:"";return`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Export - ${a||"iHub Apps"}</title>
  <style>
    ${i}
    ${c}
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>Chat Conversation Export</h1>
      ${a?`<h2>${a}</h2>`:""}
      <p class="export-date">Exported on ${new Date().toLocaleString()}</p>
    </header>
    
    ${b}
    
    <main class="messages">
      ${u}
    </main>
    
    ${n.text?`<div class="watermark">${n.text}</div>`:""}
  </div>
</body>
</html>
  `},Ga=t=>{const e=`
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #fff;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      border-bottom: 2px solid #e1e5e9;
      padding-bottom: 20px;
      margin-bottom: 30px;
    }
    
    .header h1 {
      color: #1a202c;
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 5px;
    }
    
    .header h2 {
      color: #4a5568;
      font-size: 20px;
      font-weight: 500;
      margin-bottom: 10px;
    }
    
    .export-date {
      color: #718096;
      font-size: 14px;
    }
    
    .metadata {
      background-color: #f7fafc;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .metadata h3 {
      color: #2d3748;
      font-size: 16px;
      margin-bottom: 15px;
    }
    
    .metadata-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    .metadata-grid div {
      font-size: 14px;
      color: #4a5568;
    }
    
    .message {
      margin-bottom: 25px;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      page-break-inside: avoid;
    }
    
    .user-message {
      background-color: #ebf8ff;
      border-left: 4px solid #3182ce;
    }
    
    .assistant-message {
      background-color: #f0fff4;
      border-left: 4px solid #38a169;
    }
    
    .message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .role {
      font-weight: 600;
      color: #2d3748;
    }
    
    .timestamp {
      color: #718096;
    }
    
    .message-content {
      color: #2d3748;
    }
    
    .message-content p {
      margin-bottom: 10px;
    }
    
    .message-content p:last-child {
      margin-bottom: 0;
    }
    
    .message-content strong {
      font-weight: 600;
    }
    
    .message-content em {
      font-style: italic;
    }
    
    .message-content code {
      background-color: #edf2f7;
      padding: 2px 4px;
      border-radius: 3px;
      font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
      font-size: 13px;
    }
    
    @media print {
      .container {
        max-width: none;
        margin: 0;
        padding: 20px;
      }
      
      .message {
        page-break-inside: avoid;
      }
    }
  `;switch(t){case"professional":return e+`
        .user-message {
          background-color: #f8f9fa;
          border-left-color: #495057;
        }
        
        .assistant-message {
          background-color: #f8f9fa;
          border-left-color: #6c757d;
        }
        
        .header h1 {
          color: #212529;
        }
      `;case"minimal":return e+`
        .message {
          border: none;
          border-radius: 0;
          border-bottom: 1px solid #e2e8f0;
          background-color: transparent;
          padding: 15px 0;
        }
        
        .user-message {
          border-left: none;
        }
        
        .assistant-message {
          border-left: none;
        }
        
        .metadata {
          background-color: transparent;
          border: 1px solid #e2e8f0;
        }
      `;default:return e}},Ja=t=>{const e={"bottom-right":"bottom: 30px; right: 30px;","bottom-left":"bottom: 30px; left: 30px;","bottom-center":"bottom: 30px; left: 50%; transform: translateX(-50%);"};return`
    .watermark {
      position: fixed;
      ${e[t.position]||e["bottom-right"]}
      font-size: 12px;
      color: rgba(0, 0, 0, ${t.opacity||.5});
      pointer-events: none;
      font-weight: 500;
    }
    
    @media print {
      .watermark {
        position: fixed !important;
        ${e[t.position]||e["bottom-right"]}
      }
    }
  `},dr=(t,e,r)=>{const n=new Blob([t],{type:r}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=e,i.click(),URL.revokeObjectURL(a)},Ka=(t,e)=>JSON.stringify({...{model:e==null?void 0:e.model,style:e==null?void 0:e.style,outputFormat:e==null?void 0:e.outputFormat,temperature:e==null?void 0:e.temperature,variables:e==null?void 0:e.variables},messages:t},null,2),Xa=(t,e)=>{const n=[JSON.stringify({meta:{model:e==null?void 0:e.model,style:e==null?void 0:e.style,outputFormat:e==null?void 0:e.outputFormat,temperature:e==null?void 0:e.temperature,variables:e==null?void 0:e.variables}})];return t.forEach(a=>n.push(JSON.stringify(a))),n.join(`
`)},Ya=t=>t?/[*_`#\[\]]\w/.test(t)||/\n\s*[-*+]\s/.test(t):!1,Qa=t=>t?t.replace(/<strong>(.*?)<\/strong>/g,"**$1**").replace(/<em>(.*?)<\/em>/g,"*$1*").replace(/<code>(.*?)<\/code>/g,"`$1`").replace(/<br\s*\/?>/g,`
`).replace(/<\/p><p>/g,`

`).replace(/<\/?p>/g,"").replace(/<\/?div>/g,"").trim():"",eo=t=>t?t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>"):"",to=t=>t.filter(e=>!e.isGreeting).map(e=>`**${e.role}**: ${Ya(e.content)?e.content:Qa(e.content||"")}`).join(`

`),ro=t=>t.filter(e=>!e.isGreeting).map(e=>`<p><strong>${e.role}:</strong> ${eo(e.content)}</p>`).join(""),so=async(t,e,r=null)=>{const n=Ka(t.filter(c=>!c.isGreeting),e),a=new Date().toISOString().slice(0,19).replace(/:/g,"-"),i=`chat-${r||"export"}-${a}.json`;return dr(n,i,"application/json"),{success:!0,filename:i}},no=async(t,e,r=null)=>{const n=Xa(t.filter(c=>!c.isGreeting),e),a=new Date().toISOString().slice(0,19).replace(/:/g,"-"),i=`chat-${r||"export"}-${a}.jsonl`;return dr(n,i,"application/json"),{success:!0,filename:i}},ao=async(t,e=null)=>{const r=to(t),n=new Date().toISOString().slice(0,19).replace(/:/g,"-"),a=`chat-${e||"export"}-${n}.md`;return dr(r,a,"text/markdown"),{success:!0,filename:a}},oo=async(t,e=null)=>{const r=ro(t),n=new Date().toISOString().slice(0,19).replace(/:/g,"-"),a=`chat-${e||"export"}-${n}.html`;return dr(r,a,"text/html"),{success:!0,filename:a}},io=async(t,e,r,n={})=>{const{appId:a=null,chatId:i=null,appName:c="iHub Apps",template:d="default",watermark:l={}}=n;switch(r){case"pdf":return Za(t,e,d,l,c);case"json":return so(t,e,a);case"jsonl":return no(t,e,a);case"markdown":return ao(t,e);case"html":return oo(t,e);default:throw new Error(`Unsupported export format: ${r}`)}},lo=async(t={})=>{const{skipCache:e=!1}=t,r=e?null:Xe.MODELS_LIST;return Me(()=>{const n={};if(r){const a=jt.get(r);a&&a.etag&&(n["If-None-Match"]=a.etag)}return be.get("/models",{headers:n})},r,We.MEDIUM,!0,!0)},ur=async(t={})=>{const{skipCache:e=!1,language:r=null}=t,n=e?null:Fr(Xe.UI_CONFIG,{language:r});return Me(()=>be.get("/configs/ui",{params:{language:r}}),n,We.LONG)},kr=async(t={})=>{const{skipCache:e=!1}=t,r=e?null:Xe.PROMPTS;return Me(()=>{const n={};if(r){const a=jt.get(r);a&&a.etag&&(n["If-None-Match"]=a.etag)}return be.get("/prompts",{headers:n})},r,We.MEDIUM,!0,!0)},co=async(t,e={})=>Me(()=>be.post("/magic-prompt",{input:t,...e}),null,null,!1),uo=async(t={})=>{const{skipCache:e=!1}=t,r=e?null:Xe.STYLES;return Me(()=>be.get("/styles"),r,We.LONG)},mo=async t=>Me(()=>be.post("/feedback",t),null,null,!1),Ms=async(t,e={})=>{const{skipCache:r=!1}=e,n=r?null:Fr(Xe.TRANSLATIONS,{language:t});return Me(()=>be.get(`/translations/${t}`),n,We.LONG)},ho=async(t,e={})=>{const{skipCache:r=!1,language:n=null}=e,a=r?null:Fr(Xe.PAGE_CONTENT,{id:t,language:n});return Me(()=>be.get(`/pages/${t}`,{params:{lang:n}}),a,We.MEDIUM)},go=async t=>Me(()=>be.post("/shortlinks",t),null,null,!1),fo=async t=>Me(()=>be.get(`/shortlinks/${t}`),null,null,!1),po=async t=>Me(()=>be.post("/session/start",t),null,null,!1),ch=async(t={})=>{const{skipCache:e=!1}=t,r=e?null:Xe.TOOLS;return Me(()=>be.get("/tools"),r,We.MEDIUM)},xo=async(t={})=>{const{skipCache:e=!1}=t,r=e?null:Xe.AUTH_STATUS;return Me(()=>be.get("/auth/status"),r,We.MEDIUM)},Yt="#4f46e5",Hn=o.createContext({uiConfig:null,isLoading:!0,error:null,headerColor:Yt,setHeaderColor:()=>{},resetHeaderColor:()=>{},refreshUIConfig:()=>{}}),bo=({children:t})=>{var w;const[e,r]=o.useState(null),[n,a]=o.useState(!0),[i,c]=o.useState(null),[d,l]=o.useState(Yt),[u,b]=o.useState(Yt),g=async()=>{try{a(!0);const h=await ur();r(h),c(null)}catch(h){console.error("Error fetching UI configuration:",h),c("Failed to load UI configuration")}finally{a(!1)}};o.useEffect(()=>{g()},[]),o.useEffect(()=>{var h;(h=e==null?void 0:e.header)!=null&&h.defaultColor&&(b(e.header.defaultColor),d===Yt&&l(e.header.defaultColor))},[e,d]),o.useEffect(()=>{var f;const h=(f=e==null?void 0:e.customStyles)==null?void 0:f.css,p=document.getElementById("admin-custom-styles");if(p&&p.remove(),h){const v=document.createElement("style");v.id="admin-custom-styles",v.textContent=h,document.head.appendChild(v)}},[(w=e==null?void 0:e.customStyles)==null?void 0:w.css]);const m=()=>{l(u)};return s.jsx(Hn.Provider,{value:{uiConfig:e,isLoading:n,error:i,headerColor:d,setHeaderColor:l,resetHeaderColor:m,refreshUIConfig:g},children:t})},Ue=()=>o.useContext(Hn),wo=(t,e,r,n)=>{var i,c,d,l;const a=[r,{code:e,...n||{}}];if((c=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&c.forward)return t.services.logger.forward(a,"warn","react-i18next::",!0);et(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(l=(d=t==null?void 0:t.services)==null?void 0:d.logger)!=null&&l.warn?t.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},Rs={},Sr=(t,e,r,n)=>{et(r)&&Rs[r]||(et(r)&&(Rs[r]=new Date),wo(t,e,r,n))},Wn=(t,e)=>()=>{if(t.isInitialized)e();else{const r=()=>{setTimeout(()=>{t.off("initialized",r)},0),e()};t.on("initialized",r)}},Er=(t,e,r)=>{t.loadNamespaces(e,Wn(t,r))},As=(t,e,r,n)=>{if(et(r)&&(r=[r]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Er(t,r,n);r.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,Wn(t,n))},vo=(t,e,r={})=>!e.languages||!e.languages.length?(Sr(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,t))return!1}}),et=t=>typeof t=="string",yo=t=>typeof t=="object"&&t!==null,jo=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ko={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},So=t=>ko[t],Eo=t=>t.replace(jo,So);let Cr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Eo};const Co=(t={})=>{Cr={...Cr,...t}},No=()=>Cr;let Zn;const Lo=t=>{Zn=t},Mo=()=>Zn,Ro={type:"3rdParty",init(t){Co(t.options.react),Lo(t)}},Ao=o.createContext();class Io{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const To=(t,e)=>{const r=o.useRef();return o.useEffect(()=>{r.current=t},[t,e]),r.current},qn=(t,e,r,n)=>t.getFixedT(e,r,n),$o=(t,e,r,n)=>o.useCallback(qn(t,e,r,n),[t,e,r,n]),Q=(t,e={})=>{var y,C,k,I;const{i18n:r}=e,{i18n:n,defaultNS:a}=o.useContext(Ao)||{},i=r||n||Mo();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Io),!i){Sr(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const E=(N,M)=>et(M)?M:yo(M)&&et(M.defaultValue)?M.defaultValue:Array.isArray(N)?N[N.length-1]:N,O=[E,{},!1];return O.t=E,O.i18n={},O.ready=!1,O}(y=i.options.react)!=null&&y.wait&&Sr(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...No(),...i.options.react,...e},{useSuspense:d,keyPrefix:l}=c;let u=a||((C=i.options)==null?void 0:C.defaultNS);u=et(u)?[u]:u||["translation"],(I=(k=i.reportNamespaces).addUsedNamespaces)==null||I.call(k,u);const b=(i.isInitialized||i.initializedStoreOnce)&&u.every(E=>vo(E,i,c)),g=$o(i,e.lng||null,c.nsMode==="fallback"?u:u[0],l),m=()=>g,w=()=>qn(i,e.lng||null,c.nsMode==="fallback"?u:u[0],l),[h,p]=o.useState(m);let f=u.join();e.lng&&(f=`${e.lng}${f}`);const v=To(f),x=o.useRef(!0);o.useEffect(()=>{const{bindI18n:E,bindI18nStore:O}=c;x.current=!0,!b&&!d&&(e.lng?As(i,e.lng,u,()=>{x.current&&p(w)}):Er(i,u,()=>{x.current&&p(w)})),b&&v&&v!==f&&x.current&&p(w);const N=()=>{x.current&&p(w)};return E&&(i==null||i.on(E,N)),O&&(i==null||i.store.on(O,N)),()=>{x.current=!1,i&&E&&(E==null||E.split(" ").forEach(M=>i.off(M,N))),O&&i&&O.split(" ").forEach(M=>i.store.off(M,N))}},[i,f]),o.useEffect(()=>{x.current&&b&&p(m)},[i,l,b]);const j=[h,i,b];if(j.t=h,j.i18n=i,j.ready=b,b||!b&&!d)return j;throw new Promise(E=>{e.lng?As(i,e.lng,u,()=>E()):Er(i,u,()=>E())})},re=t=>typeof t=="string",Lt=()=>{let t,e;const r=new Promise((n,a)=>{t=n,e=a});return r.resolve=t,r.reject=e,r},Is=t=>t==null?"":""+t,Fo=(t,e,r)=>{t.forEach(n=>{e[n]&&(r[n]=e[n])})},Po=/###/g,Ts=t=>t&&t.indexOf("###")>-1?t.replace(Po,"."):t,$s=t=>!t||re(t),It=(t,e,r)=>{const n=re(e)?e.split("."):e;let a=0;for(;a<n.length-1;){if($s(t))return{};const i=Ts(n[a]);!t[i]&&r&&(t[i]=new r),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++a}return $s(t)?{}:{obj:t,k:Ts(n[a])}},Fs=(t,e,r)=>{const{obj:n,k:a}=It(t,e,Object);if(n!==void 0||e.length===1){n[a]=r;return}let i=e[e.length-1],c=e.slice(0,e.length-1),d=It(t,c,Object);for(;d.obj===void 0&&c.length;)i=`${c[c.length-1]}.${i}`,c=c.slice(0,c.length-1),d=It(t,c,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${i}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${i}`]=r},Oo=(t,e,r,n)=>{const{obj:a,k:i}=It(t,e,Object);a[i]=a[i]||[],a[i].push(r)},er=(t,e)=>{const{obj:r,k:n}=It(t,e);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},Do=(t,e,r)=>{const n=er(t,r);return n!==void 0?n:er(e,r)},Gn=(t,e,r)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?re(t[n])||t[n]instanceof String||re(e[n])||e[n]instanceof String?r&&(t[n]=e[n]):Gn(t[n],e[n],r):t[n]=e[n]);return t},bt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Uo=t=>re(t)?t.replace(/[&<>"'\/]/g,e=>_o[e]):t;class zo{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Bo=[" ",",","?","!",";"],Vo=new zo(20),Ho=(t,e,r)=>{e=e||"",r=r||"";const n=Bo.filter(c=>e.indexOf(c)<0&&r.indexOf(c)<0);if(n.length===0)return!0;const a=Vo.getRegExp(`(${n.map(c=>c==="?"?"\\?":c).join("|")})`);let i=!a.test(t);if(!i){const c=t.indexOf(r);c>0&&!a.test(t.substring(0,c))&&(i=!0)}return i},Nr=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(r);let a=t;for(let i=0;i<n.length;){if(!a||typeof a!="object")return;let c,d="";for(let l=i;l<n.length;++l)if(l!==i&&(d+=r),d+=n[l],c=a[d],c!==void 0){if(["string","number","boolean"].indexOf(typeof c)>-1&&l<n.length-1)continue;i+=l-i+1;break}a=c}return a},tr=t=>t==null?void 0:t.replace("_","-"),Wo={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var r,n;(n=(r=console==null?void 0:console[t])==null?void 0:r.apply)==null||n.call(r,console,e)}};class rr{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||Wo,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,n,a){return a&&!this.debug?null:(re(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new rr(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new rr(this.logger,e)}}var He=new rr;class mr{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(r)||0;this.observers[n].set(r,a+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(c=>{let[d,l]=c;for(let u=0;u<l;u++)d(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(c=>{let[d,l]=c;for(let u=0;u<l;u++)d.apply(d,[e,...n])})}}class Ps extends mr{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,n){var u,b;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,c=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,r],n&&(Array.isArray(n)?d.push(...n):re(n)&&i?d.push(...n.split(i)):d.push(n)));const l=er(this.data,d);return!l&&!r&&!n&&e.indexOf(".")>-1&&(e=d[0],r=d[1],n=d.slice(2).join(".")),l||!c||!re(n)?l:Nr((b=(u=this.data)==null?void 0:u[e])==null?void 0:b[r],n,i)}addResource(e,r,n,a){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const c=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let d=[e,r];n&&(d=d.concat(c?n.split(c):n)),e.indexOf(".")>-1&&(d=e.split("."),a=r,r=d[1]),this.addNamespaces(r),Fs(this.data,d,a),i.silent||this.emit("added",e,r,n,a)}addResources(e,r,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(re(n[i])||Array.isArray(n[i]))&&this.addResource(e,r,i,n[i],{silent:!0});a.silent||this.emit("added",e,r,n)}addResourceBundle(e,r,n,a,i){let c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[e,r];e.indexOf(".")>-1&&(d=e.split("."),a=n,n=r,r=d[1]),this.addNamespaces(r);let l=er(this.data,d)||{};c.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?Gn(l,n,i):l={...l,...n},Fs(this.data,d,l),c.silent||this.emit("added",e,r,n)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var Jn={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,r,n,a){return t.forEach(i=>{var c;e=((c=this.processors[i])==null?void 0:c.process(e,r,n,a))??e}),e}};const Os={},Ds=t=>!re(t)&&typeof t!="boolean"&&typeof t!="number";class sr extends mr{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Fo(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=He.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,r);return(n==null?void 0:n.res)!==void 0}extractFromKey(e,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const c=n&&e.indexOf(n)>-1,d=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!Ho(e,n,a);if(c&&!d){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:re(i)?[i]:i};const u=e.split(n);(n!==a||n===a&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(a)}return{key:e,namespaces:re(i)?[i]:i}}translate(e,r,n){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(e[e.length-1],r),l=d[d.length-1],u=r.lng||this.language,b=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode"){if(b){const M=r.nsSeparator||this.options.nsSeparator;return a?{res:`${l}${M}${c}`,usedKey:c,exactUsedKey:c,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${M}${c}`}return a?{res:c,usedKey:c,exactUsedKey:c,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:c}const g=this.resolve(e,r);let m=g==null?void 0:g.res;const w=(g==null?void 0:g.usedKey)||c,h=(g==null?void 0:g.exactUsedKey)||c,p=["[object Number]","[object Function]","[object RegExp]"],f=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,x=r.count!==void 0&&!re(r.count),j=sr.hasDefaultValue(r),y=x?this.pluralResolver.getSuffix(u,r.count,r):"",C=r.ordinal&&x?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",k=x&&!r.ordinal&&r.count===0,I=k&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${y}`]||r[`defaultValue${C}`]||r.defaultValue;let E=m;v&&!m&&j&&(E=I);const O=Ds(E),N=Object.prototype.toString.apply(E);if(v&&E&&O&&p.indexOf(N)<0&&!(re(f)&&Array.isArray(E))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const M=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,E,{...r,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(g.res=M,g.usedParams=this.getUsedParamsDetails(r),g):M}if(i){const M=Array.isArray(E),_=M?[]:{},$=M?h:w;for(const L in E)if(Object.prototype.hasOwnProperty.call(E,L)){const S=`${$}${i}${L}`;j&&!m?_[L]=this.translate(S,{...r,defaultValue:Ds(I)?I[L]:void 0,joinArrays:!1,ns:d}):_[L]=this.translate(S,{...r,joinArrays:!1,ns:d}),_[L]===S&&(_[L]=E[L])}m=_}}else if(v&&re(f)&&Array.isArray(m))m=m.join(f),m&&(m=this.extendTranslation(m,e,r,n));else{let M=!1,_=!1;!this.isValidLookup(m)&&j&&(M=!0,m=I),this.isValidLookup(m)||(_=!0,m=c);const L=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:m,S=j&&I!==m&&this.options.updateMissing;if(_||M||S){if(this.logger.log(S?"updateKey":"missingKey",u,l,c,S?I:m),i){const D=this.resolve(c,{...r,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let P=[];const A=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&A&&A[0])for(let D=0;D<A.length;D++)P.push(A[D]);else this.options.saveMissingTo==="all"?P=this.languageUtils.toResolveHierarchy(r.lng||this.language):P.push(r.lng||this.language);const B=(D,z,Z)=>{var ce;const se=j&&Z!==m?Z:L;this.options.missingKeyHandler?this.options.missingKeyHandler(D,l,z,se,S,r):(ce=this.backendConnector)!=null&&ce.saveMissing&&this.backendConnector.saveMissing(D,l,z,se,S,r),this.emit("missingKey",D,l,z,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?P.forEach(D=>{const z=this.pluralResolver.getSuffixes(D,r);k&&r[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(Z=>{B([D],c+Z,r[`defaultValue${Z}`]||I)})}):B(P,c,I))}m=this.extendTranslation(m,e,r,g,n),_&&m===c&&this.options.appendNamespaceToMissingKey&&(m=`${l}:${c}`),(_||M)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${c}`:c,M?m:void 0))}return a?(g.res=m,g.usedParams=this.getUsedParamsDetails(r),g):m}extendTranslation(e,r,n,a,i){var u,b;var c=this;if((u=this.i18nFormat)!=null&&u.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const g=re(e)&&(((b=n==null?void 0:n.interpolation)==null?void 0:b.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let m;if(g){const h=e.match(this.interpolator.nestingRegexp);m=h&&h.length}let w=n.replace&&!re(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),e=this.interpolator.interpolate(e,w,n.lng||this.language||a.usedLng,n),g){const h=e.match(this.interpolator.nestingRegexp),p=h&&h.length;m<p&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,p=new Array(h),f=0;f<h;f++)p[f]=arguments[f];return(i==null?void 0:i[0])===p[0]&&!n.context?(c.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):c.translate(...p,r)},n)),n.interpolation&&this.interpolator.reset()}const d=n.postProcess||this.options.postProcess,l=re(d)?[d]:d;return e!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(e=Jn.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,a,i,c,d;return re(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,r),b=u.key;a=b;let g=u.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const m=r.count!==void 0&&!re(r.count),w=m&&!r.ordinal&&r.count===0,h=r.context!==void 0&&(re(r.context)||typeof r.context=="number")&&r.context!=="",p=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);g.forEach(f=>{var v,x;this.isValidLookup(n)||(d=f,!Os[`${p[0]}-${f}`]&&((v=this.utils)!=null&&v.hasLoadedNamespace)&&!((x=this.utils)!=null&&x.hasLoadedNamespace(d))&&(Os[`${p[0]}-${f}`]=!0,this.logger.warn(`key "${a}" for languages "${p.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(j=>{var k;if(this.isValidLookup(n))return;c=j;const y=[b];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(y,b,j,f,r);else{let I;m&&(I=this.pluralResolver.getSuffix(j,r.count,r));const E=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(y.push(b+I),r.ordinal&&I.indexOf(O)===0&&y.push(b+I.replace(O,this.options.pluralSeparator)),w&&y.push(b+E)),h){const N=`${b}${this.options.contextSeparator}${r.context}`;y.push(N),m&&(y.push(N+I),r.ordinal&&I.indexOf(O)===0&&y.push(N+I.replace(O,this.options.pluralSeparator)),w&&y.push(N+E))}}let C;for(;C=y.pop();)this.isValidLookup(n)||(i=C,n=this.getResource(j,f,C,r))}))})}),{res:n,usedKey:a,exactUsedKey:i,usedLng:c,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,n){var i;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,r,n,a):this.resourceStore.getResource(e,r,n,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!re(e.replace);let a=n?e.replace:e;if(n&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const i of r)delete a[i]}return a}static hasDefaultValue(e){const r="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&r===n.substring(0,r.length)&&e[n]!==void 0)return!0;return!1}}class _s{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=He.create("languageUtils")}getScriptPartFromCode(e){if(e=tr(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=tr(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(re(e)&&e.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(e)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(n=>{if(r)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&e.forEach(n=>{if(r)return;const a=this.getLanguagePartFromCode(n);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(i=>{if(i===a)return i;if(!(i.indexOf("-")<0&&a.indexOf("-")<0)&&(i.indexOf("-")>0&&a.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===a||i.indexOf(a)===0&&a.length>1))return i})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),re(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}toResolveHierarchy(e,r){const n=this.getFallbackCodes(r||this.options.fallbackLng||[],e),a=[],i=c=>{c&&(this.isSupportedCode(c)?a.push(c):this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`))};return re(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):re(e)&&i(this.formatLanguageCode(e)),n.forEach(c=>{a.indexOf(c)<0&&i(this.formatLanguageCode(c))}),a}}const Us={zero:0,one:1,two:2,few:3,many:4,other:5},zs={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Zo{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=He.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=tr(e==="dev"?"en":e),a=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let c;try{c=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zs;if(!e.match(/-|_/))return zs;const l=this.languageUtils.getLanguagePartFromCode(e);c=this.getRule(l,r)}return this.pluralRulesCache[i]=c,c}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(a=>`${r}${a}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((a,i)=>Us[a]-Us[i]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",r,n))}}const Bs=function(t,e,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Do(t,e,r);return!i&&a&&re(r)&&(i=Nr(t,r,n),i===void 0&&(i=Nr(e,r,n))),i},wr=t=>t.replace(/\$/g,"$$$$");class qo{constructor(){var r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=He.create("interpolator"),this.options=e,this.format=((r=e==null?void 0:e.interpolation)==null?void 0:r.format)||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:a,prefix:i,prefixEscaped:c,suffix:d,suffixEscaped:l,formatSeparator:u,unescapeSuffix:b,unescapePrefix:g,nestingPrefix:m,nestingPrefixEscaped:w,nestingSuffix:h,nestingSuffixEscaped:p,nestingOptionsSeparator:f,maxReplaces:v,alwaysFormat:x}=e.interpolation;this.escape=r!==void 0?r:Uo,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?bt(i):c||"{{",this.suffix=d?bt(d):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=b?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=m?bt(m):w||bt("$t("),this.nestingSuffix=h?bt(h):p||bt(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=v||1e3,this.alwaysFormat=x!==void 0?x:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,a){var w;let i,c,d;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){const x=Bs(r,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,n,{...a,...r,interpolationkey:h}):x}const p=h.split(this.formatSeparator),f=p.shift().trim(),v=p.join(this.formatSeparator).trim();return this.format(Bs(r,l,f,this.options.keySeparator,this.options.ignoreJSONStructure),v,n,{...a,...r,interpolationkey:f})};this.resetRegExp();const b=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((w=a==null?void 0:a.interpolation)==null?void 0:w.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>wr(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?wr(this.escape(h)):wr(h)}].forEach(h=>{for(d=0;i=h.regex.exec(e);){const p=i[1].trim();if(c=u(p),c===void 0)if(typeof b=="function"){const v=b(e,i,a);c=re(v)?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,p))c="";else if(g){c=i[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),c="";else!re(c)&&!this.useRawValueToEscape&&(c=Is(c));const f=h.safeValue(c);if(e=e.replace(i[0],f),g?(h.regex.lastIndex+=c.length,h.regex.lastIndex-=i[0].length):h.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,i,c;const d=(l,u)=>{const b=this.nestingOptionsSeparator;if(l.indexOf(b)<0)return l;const g=l.split(new RegExp(`${b}[ ]*{`));let m=`{${g[1]}`;l=g[0],m=this.interpolate(m,c);const w=m.match(/'/g),h=m.match(/"/g);(((w==null?void 0:w.length)??0)%2===0&&!h||h.length%2!==0)&&(m=m.replace(/'/g,'"'));try{c=JSON.parse(m),u&&(c={...u,...c})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${b}${m}`}return c.defaultValue&&c.defaultValue.indexOf(this.prefix)>-1&&delete c.defaultValue,l};for(;a=this.nestingRegexp.exec(e);){let l=[];c={...n},c=c.replace&&!re(c.replace)?c.replace:c,c.applyPostProcessor=!1,delete c.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const b=a[1].split(this.formatSeparator).map(g=>g.trim());a[1]=b.shift(),l=b,u=!0}if(i=r(d.call(this,a[1].trim(),c),c),i&&a[0]===e&&!re(i))return i;re(i)||(i=Is(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),u&&(i=l.reduce((b,g)=>this.format(b,g,n.lng,{...n,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const Go=t=>{let e=t.toLowerCase().trim();const r={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);e==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(c=>{if(c){const[d,...l]=c.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),b=d.trim();r[b]||(r[b]=u),u==="false"&&(r[b]=!1),u==="true"&&(r[b]=!0),isNaN(u)||(r[b]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},wt=t=>{const e={};return(r,n,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const c=n+JSON.stringify(i);let d=e[c];return d||(d=t(tr(n),a),e[c]=d),d(r)}};class Jo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=He.create("formatter"),this.options=e,this.formats={number:wt((r,n)=>{const a=new Intl.NumberFormat(r,{...n});return i=>a.format(i)}),currency:wt((r,n)=>{const a=new Intl.NumberFormat(r,{...n,style:"currency"});return i=>a.format(i)}),datetime:wt((r,n)=>{const a=new Intl.DateTimeFormat(r,{...n});return i=>a.format(i)}),relativetime:wt((r,n)=>{const a=new Intl.RelativeTimeFormat(r,{...n});return i=>a.format(i,n.range||"day")}),list:wt((r,n)=>{const a=new Intl.ListFormat(r,{...n});return i=>a.format(i)})},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=wt(r)}format(e,r,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(d=>d.indexOf(")")>-1)){const d=i.findIndex(l=>l.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,d)].join(this.formatSeparator)}return i.reduce((d,l)=>{var g;const{formatName:u,formatOptions:b}=Go(l);if(this.formats[u]){let m=d;try{const w=((g=a==null?void 0:a.formatParams)==null?void 0:g[a.interpolationkey])||{},h=w.locale||w.lng||a.locale||a.lng||n;m=this.formats[u](d,h,{...b,...a,...w})}catch(w){this.logger.warn(w)}return m}else this.logger.warn(`there was no format function for ${u}`);return d},e)}}const Ko=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Xo extends mr{constructor(e,r,n){var i,c;let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=He.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(c=(i=this.backend)==null?void 0:i.init)==null||c.call(i,n,a.backend,a)}queueLoad(e,r,n,a){const i={},c={},d={},l={};return e.forEach(u=>{let b=!0;r.forEach(g=>{const m=`${u}|${g}`;!n.reload&&this.store.hasResourceBundle(u,g)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?c[m]===void 0&&(c[m]=!0):(this.state[m]=1,b=!1,c[m]===void 0&&(c[m]=!0),i[m]===void 0&&(i[m]=!0),l[g]===void 0&&(l[g]=!0)))}),b||(d[u]=!0)}),(Object.keys(i).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(c),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(l)}}loaded(e,r,n){const a=e.split("|"),i=a[0],c=a[1];r&&this.emit("failedLoading",i,c,r),!r&&n&&this.store.addResourceBundle(i,c,n,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&n&&(this.state[e]=0);const d={};this.queue.forEach(l=>{Oo(l.loaded,[i],c),Ko(l,e),r&&l.errors.push(r),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{d[u]||(d[u]={});const b=l.loaded[u];b.length&&b.forEach(g=>{d[u][g]===void 0&&(d[u][g]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(l=>!l.done)}read(e,r,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!e.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:n,tried:a,wait:i,callback:c});return}this.readingCalls++;const d=(u,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(u&&b&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,n,a+1,i*2,c)},i);return}c(u,b)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,r);u&&typeof u.then=="function"?u.then(b=>d(null,b)).catch(d):d(null,u)}catch(u){d(u)}return}return l(e,r,d)}prepareLoading(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();re(e)&&(e=this.languageUtils.toResolveHierarchy(e)),re(r)&&(r=[r]);const i=this.queueLoad(e,r,n,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(c=>{this.loadOne(c)})}load(e,r,n){this.prepareLoading(e,r,{},n)}reload(e,r,n){this.prepareLoading(e,r,{reload:!0},n)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),a=n[0],i=n[1];this.read(a,i,"read",void 0,void 0,(c,d)=>{c&&this.logger.warn(`${r}loading namespace ${i} for language ${a} failed`,c),!c&&d&&this.logger.log(`${r}loaded namespace ${i} for language ${a}`,d),this.loaded(e,c,d)})}saveMissing(e,r,n,a,i){var l,u,b,g,m;let c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((g=(b=this.services)==null?void 0:b.utils)!=null&&g.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((m=this.backend)!=null&&m.create){const w={...c,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let p;h.length===5?p=h(e,r,n,a,w):p=h(e,r,n,a),p&&typeof p.then=="function"?p.then(f=>d(null,f)).catch(d):d(null,p)}catch(p){d(p)}else h(e,r,n,a,d,w)}!e||!e[0]||this.store.addResource(e[0],r,n,a)}}}const Vs=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),re(t[1])&&(e.defaultValue=t[1]),re(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const r=t[3]||t[2];Object.keys(r).forEach(n=>{e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Hs=t=>{var e,r;return re(t.ns)&&(t.ns=[t.ns]),re(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),re(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((r=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:r.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Bt=()=>{},Yo=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(r=>{typeof t[r]=="function"&&(t[r]=t[r].bind(t))})};class Ft extends mr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Hs(e),this.services={},this.logger=He,this.modules={external:[]},Yo(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(n=r,r={}),r.defaultNS==null&&r.ns&&(re(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=Vs();this.options={...a,...this.options,...Hs(r)},this.options.interpolation={...a.interpolation,...this.options.interpolation},r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const i=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?He.init(i(this.modules.logger),this.options):He.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=Jo;const g=new _s(this.options);this.store=new Ps(this.options.resources,this.options);const m=this.services;m.logger=He,m.resourceStore=this.store,m.languageUtils=g,m.pluralResolver=new Zo(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),b&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(m.formatter=i(b),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new qo(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new Xo(i(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(w){for(var h=arguments.length,p=new Array(h>1?h-1:0),f=1;f<h;f++)p[f-1]=arguments[f];e.emit(w,...p)}),this.modules.languageDetector&&(m.languageDetector=i(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=i(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new sr(this.services,this.options),this.translator.on("*",function(w){for(var h=arguments.length,p=new Array(h>1?h-1:0),f=1;f<h;f++)p[f-1]=arguments[f];e.emit(w,...p)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Bt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=function(){return e.store[b](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=function(){return e.store[b](...arguments),e}});const l=Lt(),u=()=>{const b=(g,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(m),n(g,m)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(e){var i,c;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt;const a=re(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const d=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};a?l(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(b=>l(b)),(c=(i=this.options.preload)==null?void 0:i.forEach)==null||c.call(i,u=>l(u)),this.services.backendConnector.load(d,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,r,n){const a=Lt();return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),n||(n=Bt),this.services.backendConnector.reload(e,r,i=>{a.resolve(),n(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Jn.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,r){var n=this;this.isLanguageChangingTo=e;const a=Lt();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},c=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return n.t(...arguments)}),r&&r(l,function(){return n.t(...arguments)})},d=l=>{var b,g;!e&&!l&&this.services.languageDetector&&(l=[]);const u=re(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),(g=(b=this.services.languageDetector)==null?void 0:b.cacheUserLanguage)==null||g.call(b,u)),this.loadResources(u,m=>{c(m,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),a}getFixedT(e,r,n){var a=this;const i=function(c,d){let l;if(typeof d!="object"){for(var u=arguments.length,b=new Array(u>2?u-2:0),g=2;g<u;g++)b[g-2]=arguments[g];l=a.options.overloadTranslationOptionHandler([c,d].concat(b))}else l={...d};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||i.keyPrefix);const m=a.options.keySeparator||".";let w;return l.keyPrefix&&Array.isArray(c)?w=c.map(h=>`${l.keyPrefix}${m}${h}`):w=l.keyPrefix?`${l.keyPrefix}${m}${c}`:c,a.t(w,l)};return re(e)?i.lng=e:i.lngs=e,i.ns=r,i.keyPrefix=n,i}t(){var a;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(a=this.translator)==null?void 0:a.translate(...r)}exists(){var a;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(a=this.translator)==null?void 0:a.exists(...r)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const c=(d,l)=>{const u=this.services.backendConnector.state[`${d}|${l}`];return u===-1||u===0||u===2};if(r.precheck){const d=r.precheck(this,c);if(d!==void 0)return d}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(n,e)&&(!a||c(i,e)))}loadNamespaces(e,r){const n=Lt();return this.options.ns?(re(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),r&&r(a)}),n):(r&&r(),Promise.resolve())}loadLanguages(e,r){const n=Lt();re(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(c=>a.indexOf(c)<0&&this.services.languageUtils.isSupportedCode(c));return i.length?(this.options.preload=a.concat(i),this.loadResources(c=>{n.resolve(),r&&r(c)}),n):(r&&r(),Promise.resolve())}dir(e){var a,i;if(e||(e=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((i=this.services)==null?void 0:i.languageUtils)||new _s(Vs());return r.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new Ft(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bt;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Ft(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(d=>{i[d]=this[d]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){const d=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},Object.keys(l[u]).reduce((b,g)=>(b[g]={...l[u][g]},b),{})),{});i.store=new Ps(d,a),i.services.resourceStore=i.store}return i.translator=new sr(i.services,a),i.translator.on("*",function(d){for(var l=arguments.length,u=new Array(l>1?l-1:0),b=1;b<l;b++)u[b-1]=arguments[b];i.emit(d,...u)}),i.init(a,r),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ye=Ft.createInstance();ye.createInstance=Ft.createInstance;ye.createInstance;ye.dir;ye.init;ye.loadResources;ye.reloadResources;ye.use;ye.changeLanguage;ye.getFixedT;ye.t;ye.exists;ye.setDefaultNamespace;ye.hasLoadedNamespace;ye.loadNamespaces;ye.loadLanguages;const{slice:Qo,forEach:ei}=[];function ti(t){return ei.call(Qo.call(arguments,1),e=>{if(e)for(const r in e)t[r]===void 0&&(t[r]=e[r])}),t}function ri(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(t))}const Ws=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,si=function(t,e){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(e);let i=`${t}=${a}`;if(n.maxAge>0){const c=n.maxAge-0;if(Number.isNaN(c))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(c)}`}if(n.domain){if(!Ws.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!Ws.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i},Zs={create(t,e,r,n){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+r*60*1e3)),n&&(a.domain=n),document.cookie=si(t,e,a)},read(t){const e=`${t}=`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){let a=r[n];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var ni={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return Zs.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:r,cookieMinutes:n,cookieDomain:a,cookieOptions:i}=e;r&&typeof document<"u"&&Zs.create(r,t,n,a,i)}},ai={name:"querystring",lookup(t){var n;let{lookupQuerystring:e}=t,r;if(typeof window<"u"){let{search:a}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));const c=a.substring(1).split("&");for(let d=0;d<c.length;d++){const l=c[d].indexOf("=");l>0&&c[d].substring(0,l)===e&&(r=c[d].substring(l+1))}}return r}},oi={name:"hash",lookup(t){var a;let{lookupHash:e,lookupFromHashIndex:r}=t,n;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const c=i.substring(1);if(e){const d=c.split("&");for(let l=0;l<d.length;l++){const u=d[l].indexOf("=");u>0&&d[l].substring(0,u)===e&&(n=d[l].substring(u+1))}}if(n)return n;if(!n&&r>-1){const d=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?(a=d[typeof r=="number"?r:0])==null?void 0:a.replace("/",""):void 0}}}return n}};let vt=null;const qs=()=>{if(vt!==null)return vt;try{if(vt=typeof window<"u"&&window.localStorage!==null,!vt)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{vt=!1}return vt};var ii={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&qs())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:r}=e;r&&qs()&&window.localStorage.setItem(r,t)}};let yt=null;const Gs=()=>{if(yt!==null)return yt;try{if(yt=typeof window<"u"&&window.sessionStorage!==null,!yt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{yt=!1}return yt};var li={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&Gs())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:r}=e;r&&Gs()&&window.sessionStorage.setItem(r,t)}},ci={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:r,userLanguage:n,language:a}=navigator;if(r)for(let i=0;i<r.length;i++)e.push(r[i]);n&&e.push(n),a&&e.push(a)}return e.length>0?e:void 0}},di={name:"htmlTag",lookup(t){let{htmlTag:e}=t,r;const n=e||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(r=n.getAttribute("lang")),r}},ui={name:"path",lookup(t){var a;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(a=r[typeof e=="number"?e:0])==null?void 0:a.replace("/",""):void 0}},mi={name:"subdomain",lookup(t){var a,i;let{lookupFromSubdomainIndex:e}=t;const r=typeof e=="number"?e+1:1,n=typeof window<"u"&&((i=(a=window.location)==null?void 0:a.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[r]}};let Kn=!1;try{document.cookie,Kn=!0}catch{}const Xn=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Kn||Xn.splice(1,1);const hi=()=>({order:Xn,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Yn{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,r)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=ti(r,this.options||{},hi()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(ni),this.addDetector(ai),this.addDetector(ii),this.addDetector(li),this.addDetector(ci),this.addDetector(di),this.addDetector(ui),this.addDetector(mi),this.addDetector(oi)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return e.forEach(n=>{if(this.detectors[n]){let a=this.detectors[n].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(r=r.concat(a))}}),r=r.filter(n=>n!=null&&!ri(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(e,this.options)}))}}Yn.type="languageDetector";class gi{constructor(){this.defaultLanguage="en",this.isInitialized=!1,this.translationCache=new Map,this.pendingTranslations=new Map,this.platformConfig=null,this.languageChangeInProgress=!1,this.initializeSync()}initializeSync(){if(!this.isInitialized)try{ye.use(Yn).use(Ro).init({resources:{en:{translation:{}},de:{translation:{}}},fallbackLng:this.defaultLanguage,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]},react:{useSuspense:!1}}),ye.on("languageChanged",e=>{this.languageChangeInProgress||this.loadFullTranslations(e)}),this.isInitialized=!0,this.initializeAsync()}catch(e){console.error("Failed to initialize i18n service synchronously:",e),this.isInitialized=!0}}async initializeAsync(){try{await this.loadPlatformConfig();const[e,r]=await Promise.all([le(()=>import("./en-C4NtbKSE.js"),[],import.meta.url),le(()=>import("./de-wrmdbK0u.js"),[],import.meta.url)]);ye.addResourceBundle("en","translation",e.default,!0,!0),ye.addResourceBundle("de","translation",r.default,!0,!0);const n=ye.language||this.defaultLanguage;await this.loadFullTranslations(n)}catch(e){console.error("Failed to initialize i18n service asynchronously:",e)}}async loadPlatformConfig(){var e;try{const r=await be.get("/configs/ui");r.status>=200&&r.status<300&&(this.platformConfig=r.data,(e=this.platformConfig)!=null&&e.defaultLanguage&&(this.defaultLanguage=this.platformConfig.defaultLanguage))}catch(r){console.warn("Failed to load UI configuration, using default language en:",r)}}normalizeLanguageCode(e){return(e==null?void 0:e.split("-")[0].toLowerCase())||this.defaultLanguage}async loadFullTranslations(e){try{const r=this.normalizeLanguageCode(e);if(this.translationCache.has(r)){const i=this.translationCache.get(r);this.addTranslationsToI18n(r,i);return}if(this.pendingTranslations.has(r)){await this.pendingTranslations.get(r);return}const n=this.fetchAndCacheTranslationsWithRetry(r);this.pendingTranslations.set(r,n);const a=await n;this.pendingTranslations.delete(r),a&&(this.addTranslationsToI18n(r,a),e!==r&&this.addTranslationsToI18n(e,a),typeof ye.emit=="function"&&ye.emit("loaded",!0))}catch(r){console.error(`Failed to load translations for language: ${e}`,r),this.pendingTranslations.delete(this.normalizeLanguageCode(e)),typeof ye.emit=="function"&&ye.emit("loaded",!1)}}async fetchAndCacheTranslations(e){try{const r=await Ms(e);if(r)return this.translationCache.set(e,r),r}catch(r){console.error(`Failed to fetch translations for ${e}:`,r)}return null}async fetchAndCacheTranslationsWithRetry(e,r=3){let n;for(let a=1;a<=r;a++)try{const i=await Ms(e);if(i)return this.translationCache.set(e,i),i}catch(i){if(n=i,console.warn(`Failed to fetch translations for ${e} (attempt ${a}/${r}):`,i),a<r){const c=100*Math.pow(2,a-1);await new Promise(d=>setTimeout(d,c))}}return console.error(`Failed to fetch translations for ${e} after ${r} attempts:`,n),null}addTranslationsToI18n(e,r){ye.addResourceBundle(e,"translation",r,!0,!0)}async changeLanguage(e){if(console.log(`Changing language to: ${e}`),this.languageChangeInProgress)return console.warn("Language change already in progress, skipping"),this.getCurrentLanguage();try{return this.languageChangeInProgress=!0,await ye.changeLanguage(e),await this.loadFullTranslations(e),e}finally{this.languageChangeInProgress=!1}}getCurrentLanguage(){return ye.language||this.defaultLanguage}getDefaultLanguage(){return this.defaultLanguage}isReady(){return this.isInitialized}clearCache(){this.translationCache.clear(),this.pendingTranslations.clear()}}const fi=new gi,pi=()=>{const{i18n:t,t:e}=Q(),{uiConfig:r,isLoading:n}=Ue(),[a,i]=o.useState(!1),c=async l=>{if(!a)try{i(!0),await fi.changeLanguage(l),console.log(`Language changed to: ${l}`)}catch(u){console.error("Error changing language:",u)}finally{i(!1)}},d=o.useMemo(()=>{var u;if(!r)return[{code:"en",name:"English"},{code:"de",name:"Deutsch"}];const l=[];return(u=r.header)!=null&&u.title&&Object.keys(r.header.title).forEach(b=>{const g=e(`languages.${b}`);l.push({code:b,name:g===`languages.${b}`?b==="en"?"English":b==="de"?"Deutsch":b:g})}),l.length?l:[{code:"en",name:"English"},{code:"de",name:"Deutsch"}]},[r,e]);return n?s.jsx("div",{className:"language-selector-loading",children:e("common.loading","Loading...")}):s.jsx("div",{className:"language-selector",children:s.jsx("select",{value:t.language||"en",onChange:l=>c(l.target.value),className:"bg-transparent text-white border border-white rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-white cursor-pointer",disabled:a,children:d.map(l=>s.jsx("option",{value:l.code,className:"text-black",children:l.name},l.code))})})};let vr="en";function q(t,e=vr,r=vr){if(t==null)return"";if(typeof t=="string")return t;if(typeof t=="object")try{if(t[e])return t[e];if(t[r])return t[r];const n=Object.keys(t);return n.length>0?(e!==vr&&console.warn(`Missing translation for language: ${e}`),t[n[0]]):""}catch(n){return console.error("Error accessing content object:",n),""}try{return String(t)}catch(n){return console.error("Failed to convert content to string:",n),""}}const Js="ihub-disclaimer-acknowledged",xi=({disclaimer:t,currentLanguage:e})=>{const{t:r}=Q(),[n,a]=o.useState(!1);o.useEffect(()=>{!localStorage.getItem(Js)&&t&&a(!0)},[t]);const i=()=>{localStorage.setItem(Js,"true"),a(!1)};return n?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-2xl w-full p-6 mx-4",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:q(t.title,e)||r("disclaimer.title","Disclaimer")}),s.jsxs("div",{className:"max-h-96 overflow-y-auto mb-4 text-gray-700",children:[s.jsx("p",{children:q(t.text,e)}),t.version&&t.updated&&s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:r("disclaimer.versionInfo","Version {{version}}, Last Updated: {{date}}",{version:t.version,date:t.updated})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:i,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:r("disclaimer.accept","I Understand")})})]})}):null};function bi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const wi=o.forwardRef(bi);function vi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Ks=o.forwardRef(vi);function yi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Xs=o.forwardRef(yi);function ji({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Vt=o.forwardRef(ji);function ki({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Ys=o.forwardRef(ki);function Si({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Ht=o.forwardRef(Si);function Ei({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const Ci=o.forwardRef(Ei);function Ni({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const Qs=o.forwardRef(Ni);function Li({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"}))}const en=o.forwardRef(Li);function Mi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Wt=o.forwardRef(Mi);function Ri({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"}))}const Ai=o.forwardRef(Ri);function Ii({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Ti=o.forwardRef(Ii);function $i({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const Fi=o.forwardRef($i);function Pi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Zt=o.forwardRef(Pi);function Oi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Di=o.forwardRef(Oi);function _i({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const tn=o.forwardRef(_i);function Ui({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const zi=o.forwardRef(Ui);function Bi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}))}const rn=o.forwardRef(Bi);function Vi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Hi=o.forwardRef(Vi);function Wi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const Zi=o.forwardRef(Wi);function qi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const qt=o.forwardRef(qi);function Gi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const Ji=o.forwardRef(Gi);function Ki({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Zm3.75 11.625a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Xi=o.forwardRef(Ki);function Yi({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Qi=o.forwardRef(Yi);function el({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const tl=o.forwardRef(el);function rl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const sl=o.forwardRef(rl);function nl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const sn=o.forwardRef(nl);function al({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const ol=o.forwardRef(al);function il({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ll=o.forwardRef(il);function cl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 16.318A4.486 4.486 0 0 0 12.016 15a4.486 4.486 0 0 0-3.198 1.318M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"}))}const dl=o.forwardRef(cl);function ul({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const ml=o.forwardRef(ul);function hl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96a8.95 8.95 0 0 0 .303-.54"}))}const gl=o.forwardRef(hl);function fl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const pl=o.forwardRef(fl);function xl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const bl=o.forwardRef(xl);function wl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const vl=o.forwardRef(wl);function yl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const jl=o.forwardRef(yl);function kl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const nn=o.forwardRef(kl);function Sl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const an=o.forwardRef(Sl);function El({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const Cl=o.forwardRef(El);function Nl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ll=o.forwardRef(Nl);function Ml({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const Rl=o.forwardRef(Ml);function Al({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const Il=o.forwardRef(Al);function Tl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const on=o.forwardRef(Tl);function $l({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const ln=o.forwardRef($l);function Fl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Pl=o.forwardRef(Fl);function Ol({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const cn=o.forwardRef(Ol);function Dl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const _l=o.forwardRef(Dl);function Ul({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const zl=o.forwardRef(Ul);function Bl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Vl=o.forwardRef(Bl);function Hl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Qn=o.forwardRef(Hl);function Wl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const Zl=o.forwardRef(Wl);function ql({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Gl=o.forwardRef(ql);function Jl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const dn=o.forwardRef(Jl);function Kl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Xl=o.forwardRef(Kl);function Yl({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const un=o.forwardRef(Yl);function Ql({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Gt=o.forwardRef(Ql);function ec({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M11.7 2.805a.75.75 0 0 1 .6 0A60.65 60.65 0 0 1 22.83 8.72a.75.75 0 0 1-.231 1.337 49.948 49.948 0 0 0-9.902 3.912l-.003.002c-.114.06-.227.119-.34.18a.75.75 0 0 1-.707 0A50.88 50.88 0 0 0 7.5 12.173v-.224c0-.131.067-.248.172-.311a54.615 54.615 0 0 1 4.653-2.52.75.75 0 0 0-.65-1.352 56.123 56.123 0 0 0-4.78 2.589 1.858 1.858 0 0 0-.859 1.228 49.803 49.803 0 0 0-4.634-1.527.75.75 0 0 1-.231-1.337A60.653 60.653 0 0 1 11.7 2.805Z"}),o.createElement("path",{d:"M13.06 15.473a48.45 48.45 0 0 1 7.666-3.282c.134 1.414.22 2.843.255 4.284a.75.75 0 0 1-.46.711 47.87 47.87 0 0 0-8.105 4.342.75.75 0 0 1-.832 0 47.87 47.87 0 0 0-8.104-4.342.75.75 0 0 1-.461-.71c.035-1.442.121-2.87.255-4.286.921.304 1.83.634 2.726.99v1.27a1.5 1.5 0 0 0-.14 2.508c-.09.38-.222.753-.397 1.11.452.213.901.434 1.346.66a6.727 6.727 0 0 0 .551-1.607 1.5 1.5 0 0 0 .14-2.67v-.645a48.549 48.549 0 0 1 3.44 1.667 2.25 2.25 0 0 0 2.12 0Z"}),o.createElement("path",{d:"M4.462 19.462c.42-.419.753-.89 1-1.395.453.214.902.435 1.347.662a6.742 6.742 0 0 1-1.286 1.794.75.75 0 0 1-1.06-1.06Z"}))}const tc=o.forwardRef(ec);function rc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z",clipRule:"evenodd"}))}const sc=o.forwardRef(rc);function nc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M7.5 5.25a3 3 0 0 1 3-3h3a3 3 0 0 1 3 3v.205c.933.085 1.857.197 2.774.334 1.454.218 2.476 1.483 2.476 2.917v3.033c0 1.211-.734 2.352-1.936 2.752A24.726 24.726 0 0 1 12 15.75c-2.73 0-5.357-.442-7.814-1.259-1.202-.4-1.936-1.541-1.936-2.752V8.706c0-1.434 1.022-2.7 2.476-2.917A48.814 48.814 0 0 1 7.5 5.455V5.25Zm7.5 0v.09a49.488 49.488 0 0 0-6 0v-.09a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5Zm-3 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}),o.createElement("path",{d:"M3 18.4v-2.796a4.3 4.3 0 0 0 .713.31A26.226 26.226 0 0 0 12 17.25c2.892 0 5.68-.468 8.287-1.335.252-.084.49-.189.713-.311V18.4c0 1.452-1.047 2.728-2.523 2.923-2.12.282-4.282.427-6.477.427a49.19 49.19 0 0 1-6.477-.427C4.047 21.128 3 19.852 3 18.4Z"}))}const ac=o.forwardRef(nc);function oc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const ic=o.forwardRef(oc);function lc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M12 9a3.75 3.75 0 1 0 0 7.5A3.75 3.75 0 0 0 12 9Z"}),o.createElement("path",{fillRule:"evenodd",d:"M9.344 3.071a49.52 49.52 0 0 1 5.312 0c.967.052 1.83.585 2.332 1.39l.821 1.317c.24.383.645.643 1.11.71.386.054.77.113 1.152.177 1.432.239 2.429 1.493 2.429 2.909V18a3 3 0 0 1-3 3h-15a3 3 0 0 1-3-3V9.574c0-1.416.997-2.67 2.429-2.909.382-.064.766-.123 1.151-.178a1.56 1.56 0 0 0 1.11-.71l.822-1.315a2.942 2.942 0 0 1 2.332-1.39ZM6.75 12.75a5.25 5.25 0 1 1 10.5 0 5.25 5.25 0 0 1-10.5 0Zm12-1.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const cc=o.forwardRef(lc);function dc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const uc=o.forwardRef(dc);function mc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"}))}const mn=o.forwardRef(mc);function hc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const gc=o.forwardRef(hc);function fc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const pc=o.forwardRef(fc);function xc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M14.447 3.026a.75.75 0 0 1 .527.921l-4.5 16.5a.75.75 0 0 1-1.448-.394l4.5-16.5a.75.75 0 0 1 .921-.527ZM16.72 6.22a.75.75 0 0 1 1.06 0l5.25 5.25a.75.75 0 0 1 0 1.06l-5.25 5.25a.75.75 0 1 1-1.06-1.06L21.44 12l-4.72-4.72a.75.75 0 0 1 0-1.06Zm-9.44 0a.75.75 0 0 1 0 1.06L2.56 12l4.72 4.72a.75.75 0 0 1-1.06 1.06L.97 12.53a.75.75 0 0 1 0-1.06l5.25-5.25a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const bc=o.forwardRef(xc);function wc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M16.5 7.5h-9v9h9v-9Z"}),o.createElement("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 0 1 9 3v.75h2.25V3a.75.75 0 0 1 1.5 0v.75H15V3a.75.75 0 0 1 1.5 0v.75h.75a3 3 0 0 1 3 3v.75H21A.75.75 0 0 1 21 9h-.75v2.25H21a.75.75 0 0 1 0 1.5h-.75V15H21a.75.75 0 0 1 0 1.5h-.75v.75a3 3 0 0 1-3 3h-.75V21a.75.75 0 0 1-1.5 0v-.75h-2.25V21a.75.75 0 0 1-1.5 0v-.75H9V21a.75.75 0 0 1-1.5 0v-.75h-.75a3 3 0 0 1-3-3v-.75H3A.75.75 0 0 1 3 15h.75v-2.25H3a.75.75 0 0 1 0-1.5h.75V9H3a.75.75 0 0 1 0-1.5h.75v-.75a3 3 0 0 1 3-3h.75V3a.75.75 0 0 1 .75-.75ZM6 6.75A.75.75 0 0 1 6.75 6h10.5a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V6.75Z",clipRule:"evenodd"}))}const vc=o.forwardRef(wc);function yc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M11.625 16.5a1.875 1.875 0 1 0 0-3.75 1.875 1.875 0 0 0 0 3.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6 16.5c.66 0 1.277-.19 1.797-.518l1.048 1.048a.75.75 0 0 0 1.06-1.06l-1.047-1.048A3.375 3.375 0 1 0 11.625 18Z",clipRule:"evenodd"}),o.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const jc=o.forwardRef(yc);function kc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),o.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const Sc=o.forwardRef(kc);function Ec({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),o.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const Cc=o.forwardRef(Ec);function Nc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const Lc=o.forwardRef(Nc);function Mc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const hn=o.forwardRef(Mc);function Rc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),o.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),o.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const Ac=o.forwardRef(Rc);function Ic({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),o.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const Tc=o.forwardRef(Ic);function $c({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 0 .828.419.936.634.13.26.189.568.189.866 0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm-4.34 7.964a.75.75 0 0 1-1.061-1.06 5.236 5.236 0 0 1 3.73-1.538 5.236 5.236 0 0 1 3.695 1.538.75.75 0 1 1-1.061 1.06 3.736 3.736 0 0 0-2.639-1.098 3.736 3.736 0 0 0-2.664 1.098Z",clipRule:"evenodd"}))}const Fc=o.forwardRef($c);function Pc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"}))}const Oc=o.forwardRef(Pc);function Dc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M15.73 5.5h1.035A7.465 7.465 0 0 1 18 9.625a7.465 7.465 0 0 1-1.235 4.125h-.148c-.806 0-1.534.446-2.031 1.08a9.04 9.04 0 0 1-2.861 2.4c-.723.384-1.35.956-1.653 1.715a4.499 4.499 0 0 0-.322 1.672v.633A.75.75 0 0 1 9 22a2.25 2.25 0 0 1-2.25-2.25c0-1.152.26-2.243.723-3.218.266-.558-.107-1.282-.725-1.282H3.622c-1.026 0-1.945-.694-2.054-1.715A12.137 12.137 0 0 1 1.5 12.25c0-2.848.992-5.464 2.649-7.521C4.537 4.247 5.136 4 5.754 4H9.77a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23ZM21.669 14.023c.536-1.362.831-2.845.831-4.398 0-1.22-.182-2.398-.52-3.507-.26-.85-1.084-1.368-1.973-1.368H19.1c-.445 0-.72.498-.523.898.591 1.2.924 2.55.924 3.977a8.958 8.958 0 0 1-1.302 4.666c-.245.403.028.959.5.959h1.053c.832 0 1.612-.453 1.918-1.227Z"}))}const _c=o.forwardRef(Dc);function Uc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const zc=o.forwardRef(Uc);function Bc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const Vc=o.forwardRef(Bc);function Hc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M12 .75a8.25 8.25 0 0 0-4.135 15.39c.686.398 1.115 1.008 1.134 1.623a.75.75 0 0 0 .577.706c.352.083.71.148 1.074.195.323.041.6-.218.6-.544v-4.661a6.714 6.714 0 0 1-.937-.171.75.75 0 1 1 .374-1.453 5.261 5.261 0 0 0 2.626 0 .75.75 0 1 1 .374 1.452 6.712 6.712 0 0 1-.937.172v4.66c0 .327.277.586.6.545.364-.047.722-.112 1.074-.195a.75.75 0 0 0 .577-.706c.02-.615.448-1.225 1.134-1.623A8.25 8.25 0 0 0 12 .75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M9.013 19.9a.75.75 0 0 1 .877-.597 11.319 11.319 0 0 0 4.22 0 .75.75 0 1 1 .28 1.473 12.819 12.819 0 0 1-4.78 0 .75.75 0 0 1-.597-.876ZM9.754 22.344a.75.75 0 0 1 .824-.668 13.682 13.682 0 0 0 2.844 0 .75.75 0 1 1 .156 1.492 15.156 15.156 0 0 1-3.156 0 .75.75 0 0 1-.668-.824Z",clipRule:"evenodd"}))}const Wc=o.forwardRef(Hc);function Zc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z",clipRule:"evenodd"}))}const qc=o.forwardRef(Zc);function Gc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M8.25 4.5a3.75 3.75 0 1 1 7.5 0v8.25a3.75 3.75 0 1 1-7.5 0V4.5Z"}),o.createElement("path",{d:"M6 10.5a.75.75 0 0 1 .75.75v1.5a5.25 5.25 0 1 0 10.5 0v-1.5a.75.75 0 0 1 1.5 0v1.5a6.751 6.751 0 0 1-6 6.709v2.291h3a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1 0-1.5h3v-2.291a6.751 6.751 0 0 1-6-6.709v-1.5A.75.75 0 0 1 6 10.5Z"}))}const Jc=o.forwardRef(Gc);function Kc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm3 10.5a.75.75 0 0 0 0-1.5H9a.75.75 0 0 0 0 1.5h6Z",clipRule:"evenodd"}))}const Xc=o.forwardRef(Kc);function Yc({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z",clipRule:"evenodd"}))}const Qc=o.forwardRef(Yc);function ed({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M18.97 3.659a2.25 2.25 0 0 0-3.182 0l-10.94 10.94a3.75 3.75 0 1 0 5.304 5.303l7.693-7.693a.75.75 0 0 1 1.06 1.06l-7.693 7.693a5.25 5.25 0 1 1-7.424-7.424l10.939-10.94a3.75 3.75 0 1 1 5.303 5.304L9.097 18.835l-.008.008-.007.007-.002.002-.003.002A2.25 2.25 0 0 1 5.91 15.66l7.81-7.81a.75.75 0 0 1 1.061 1.06l-7.81 7.81a.75.75 0 0 0 1.054 1.068L18.97 6.84a2.25 2.25 0 0 0 0-3.182Z",clipRule:"evenodd"}))}const td=o.forwardRef(ed);function rd({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))}const sd=o.forwardRef(rd);function nd({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const gn=o.forwardRef(nd);function ad({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const od=o.forwardRef(ad);function id({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z",clipRule:"evenodd"}))}const ld=o.forwardRef(id);function cd({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"}))}const dd=o.forwardRef(cd);function ud({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const ea=o.forwardRef(ud);function md({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 4.125c0-1.036.84-1.875 1.875-1.875h5.25c1.036 0 1.875.84 1.875 1.875V17.25a4.5 4.5 0 1 1-9 0V4.125Zm4.5 14.25a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z",clipRule:"evenodd"}),o.createElement("path",{d:"M10.719 21.75h9.156c1.036 0 1.875-.84 1.875-1.875v-5.25c0-1.036-.84-1.875-1.875-1.875h-.14l-8.742 8.743c-.09.089-.18.175-.274.257ZM12.738 17.625l6.474-6.474a1.875 1.875 0 0 0 0-2.651L15.5 4.787a1.875 1.875 0 0 0-2.651 0l-.1.099V17.25c0 .126-.003.251-.01.375Z"}))}const hd=o.forwardRef(md);function gd({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const fd=o.forwardRef(gd);function pd({title:t,titleId:e,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},r),t?o.createElement("title",{id:e},t):null,o.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))}const xd=o.forwardRef(pd),bd={arrowLeft:{outline:Vt,solid:Vt},"arrow-right":{outline:Ht,solid:Ht},undo:{outline:Qs,solid:Qs},redo:{outline:en,solid:en},camera:{outline:Fi,solid:cc},chat:{outline:Zt,solid:Zt},check:{outline:tn,solid:mn},"check-circle":{outline:Di,solid:uc},clearCircle:{outline:un,solid:un},close:{outline:Gt,solid:Gt},cog:{outline:qt,solid:qt},"color-swatch":{outline:Zl,solid:hd},copy:{outline:rn,solid:rn},"document-text":{outline:Qi,solid:Sc},edit:{outline:on,solid:on},"exclamation-circle":{outline:sl,solid:Lc},"exclamation-triangle":{outline:sn,solid:hn},"face-frown":{outline:dl,solid:Fc},format:{outline:Wt,solid:Wt},"information-circle":{outline:bl,solid:Vc},list:{outline:nn,solid:nn},menu:{outline:Wt,solid:Wt},"chevron-down":{outline:zi,solid:gc},eye:{outline:ll,solid:Tc},"eye-slash":{outline:ol,solid:Ac},play:{outline:Pl,solid:sd},link:{outline:jl,solid:qc},"cpu-chip":{outline:Ji,solid:vc},microphone:{outline:Cl,solid:Jc},"minus-circle":{outline:Ll,solid:Xc},"paint-brush":{outline:Rl,solid:Qc},"paper-clip":{outline:Il,solid:td},pencil:{outline:ln,solid:ln},"plus-circle":{outline:cn,solid:gn},refresh:{outline:Ys,solid:Ys},search:{outline:an,solid:an},settings:{outline:qt,solid:qt},sliders:{outline:Ks,solid:Ks},star:{outline:Qn,solid:ea},trash:{outline:Gl,solid:fd},user:{outline:dn,solid:dn},login:{outline:Ht,solid:Ht},logout:{outline:Vt,solid:Vt},x:{outline:Gt,solid:Gt},"thumbs-up":{outline:pl,solid:zc},"thumbs-down":{outline:gl,solid:_c},"question-mark-circle":{outline:_l,solid:od},"chat-bubbles":{outline:Zt,solid:Zt},globe:{outline:ml,solid:Oc},sparkles:{outline:Vl,solid:dd},mail:{outline:tl,solid:Cc},calendar:{outline:Ti,solid:ic},share:{outline:zl,solid:ld},"document-search":{outline:Xi,solid:jc},users:{outline:Xl,solid:xd},"light-bulb":{outline:vl,solid:Wc},code:{outline:Zi,solid:bc},clock:{outline:Hi,solid:pc},"academic-cap":{outline:wi,solid:tc},briefcase:{outline:Ai,solid:ac},download:{outline:Xs,solid:Xs},"external-link":{outline:Ci,solid:sc},save:{outline:tn,solid:mn},plus:{outline:cn,solid:gn},warning:{outline:sn,solid:hn}},Jt={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8","2xl":"w-12 h-12"},R=({name:t,size:e="md",className:r="",solid:n=!1,title:a,...i})=>{const[c,d]=o.useState(!1);if(!t||typeof t!="string")return null;const l=bd[t];if(l){const u=n?l.solid:l.outline;return s.jsx(u,{className:`${Jt[e]||Jt.md} ${r}`,title:a,...i})}return c||t==="undefined"||t==="null"?null:s.jsx("img",{src:Tn(`icons/${t}.svg`),alt:t,onError:()=>d(!0),className:`${Jt[e]||Jt.md} ${r}`,title:a,...i})},hr=t=>{const e=()=>{try{const a=localStorage.getItem(t);return a?JSON.parse(a):[]}catch(a){return console.error(`Error retrieving favorite items for ${t}:`,a),[]}},r=a=>e().includes(a);return{getFavorites:e,isFavorite:r,toggleFavorite:a=>{try{const i=e(),c=i.includes(a);let d;return c?d=i.filter(l=>l!==a):d=[...i,a],localStorage.setItem(t,JSON.stringify(d)),!c}catch(i){return console.error(`Error toggling favorite item for ${t}:`,i),r(a)}}}},wd=()=>{try{return localStorage.getItem("ihub_username")||"default"}catch(t){return console.error("Error accessing localStorage for username:",t),"default"}};function ta({prefix:t,max:e=5,expirationMs:r=10080*60*1e3}){const n=()=>`${t}${wd()}`,a=()=>{try{const d=localStorage.getItem(n()),l=d?JSON.parse(d):{},u=Date.now(),b=Object.entries(l).filter(([,g])=>u-g<r);if(b.length!==Object.keys(l).length){const g=Object.fromEntries(b);return localStorage.setItem(n(),JSON.stringify(g)),g}return l}catch(d){return console.error("Error retrieving recent items:",d),{}}};return{recordUsage:d=>{if(d)try{const l=a(),u=Date.now();l[d]=u,Object.keys(l).forEach(g=>{u-l[g]>=r&&delete l[g]});const b=Object.entries(l).sort((g,m)=>m[1]-g[1]).slice(0,e);localStorage.setItem(n(),JSON.stringify(Object.fromEntries(b)))}catch(l){console.error("Error recording recent item usage:",l)}},getIds:()=>{const d=a(),l=Date.now();return Object.entries(d).filter(([,u])=>l-u<r).sort((u,b)=>b[1]-u[1]).map(([u])=>u)}}}const{recordUsage:vd,getIds:ra}=ta({prefix:"ihub_recent_apps_"}),sa=({isOpen:t,onClose:e,onSelect:r,items:n=[],fuseKeys:a=[],placeholder:i="",renderResult:c})=>{const[d,l]=o.useState(""),[u,b]=o.useState([]),[g,m]=o.useState(0),w=o.useRef(null),h=o.useRef(null),p=o.useRef(null),{t:f}=Q();o.useEffect(()=>{t&&(h.current=new An(n,{keys:a,threshold:.4}),l(""),b([]),m(0))},[t,n,a]),o.useEffect(()=>{t&&w.current&&w.current.focus()},[t]),o.useEffect(()=>{if(!t)return;const x=j=>{j.key==="Escape"&&e()};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[t,e]),o.useEffect(()=>{if(!t||!d.trim()||!h.current){b([]);return}const x=h.current.search(d).map(j=>j.item||j);b(x.slice(0,5)),m(0)},[d,t]),o.useEffect(()=>{if(!p.current||u.length===0)return;const x=p.current.children[g];x&&x.scrollIntoView({behavior:"smooth",block:"nearest"})},[g,u]);const v=x=>{x.key==="ArrowDown"?(x.preventDefault(),m(j=>Math.min(j+1,u.length-1))):x.key==="ArrowUp"?(x.preventDefault(),m(j=>Math.max(j-1,0))):x.key==="Enter"&&u[g]?(x.preventDefault(),r(u[g])):x.key==="Escape"&&e()};return t?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl mt-20",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(R,{name:"search",className:"text-gray-400"})}),s.jsx("input",{ref:w,type:"text",value:d,onChange:x=>l(x.target.value),onKeyDown:v,placeholder:i,className:"w-full pl-12 pr-12 py-3 border rounded-lg text-base focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true"}),d&&s.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600","aria-label":f("common.clear","Clear"),children:s.jsx(R,{name:"x",className:"w-5 h-5"})})]}),s.jsx("ul",{ref:p,className:"max-h-64 overflow-y-auto",children:u.map((x,j)=>s.jsx("li",{className:`p-3 cursor-pointer border-b border-gray-100 last:border-b-0 hover:bg-gray-50 ${j===g?"bg-indigo-50 border-indigo-200":""}`,onMouseDown:()=>r(x),children:c?c(x):JSON.stringify(x)},j))})]})}):null},yd=()=>{const{t,i18n:e}=Q(),r=e.language,n=rt(),[a,i]=o.useState(!1),[c,d]=o.useState([]),[l,u]=o.useState([]),b=o.useMemo(()=>ra(),[]),{getFavorites:g}=hr("ihub_favorite_apps");o.useEffect(()=>{const h=p=>{(p.metaKey||p.ctrlKey)&&p.key.toLowerCase()==="k"?(p.preventDefault(),i(!0)):p.key==="Escape"&&i(!1)};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[]),o.useEffect(()=>{a&&(u(g()),c.length===0&&Vn().then(d).catch(h=>console.error("Failed to load apps",h)))},[a,c.length]);const m=c.map(h=>({...h,nameText:q(h.name,r)||"",descriptionText:q(h.description,r)||""})),w=h=>{i(!1),n(`/apps/${h.id}`)};return s.jsx(sa,{isOpen:a,onClose:()=>i(!1),onSelect:w,items:m,fuseKeys:["nameText","descriptionText"],placeholder:t("smartSearch.placeholder","Search apps..."),renderResult:h=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center",children:s.jsx(R,{name:h.icon||"lightning-bolt",className:"w-3.5 h-3.5 text-indigo-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center flex-wrap mb-1",children:[s.jsx("span",{className:"font-medium text-gray-900 text-sm mr-1",children:q(h.name,r)||h.id}),l.includes(h.id)&&s.jsx("span",{className:"ml-1","aria-label":t("common.favorite","Favorite"),title:t("common.favorite","Favorite"),children:s.jsx(R,{name:"star",size:"sm",className:"text-yellow-500",solid:!0})}),b.includes(h.id)&&s.jsx("span",{className:"ml-1","aria-label":t("common.recent","Recent"),title:t("common.recent","Recent"),children:s.jsx(R,{name:"clock",size:"sm",className:"text-indigo-600",solid:!0})})]}),s.jsx("p",{className:"text-xs text-gray-500 leading-4 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:q(h.description,r)||""})]})]})})},fn=()=>{try{const t=localStorage.getItem("ihubIntegrationSettings");if(t)return JSON.parse(t)}catch(t){console.error("Error reading integration settings from localStorage:",t)}return{showHeader:!0,showFooter:!0,language:null}},na=t=>{try{localStorage.setItem("ihubIntegrationSettings",JSON.stringify(t))}catch(e){console.error("Error saving integration settings to localStorage:",e)}},jd=t=>{try{const e=fn();let r=!1;const n=t.get("header");n!==null&&(e.showHeader=n!=="false",r=!0);const a=t.get("footer");a!==null&&(e.showFooter=a!=="false",r=!0);const i=t.get("language");return i!==null&&(e.language=i,r=!0),r&&na(e),e}catch(e){return console.error("Error updating integration settings from URL:",e),fn()}},Se={SET_LOADING:"SET_LOADING",SET_USER:"SET_USER",SET_ERROR:"SET_ERROR",LOGOUT:"LOGOUT",SET_AUTH_CONFIG:"SET_AUTH_CONFIG"},kd={user:null,isAuthenticated:!1,isLoading:!0,error:null,authConfig:{authMode:"proxy",anonymousAuth:{enabled:!0,defaultGroups:["anonymous"]},authMethods:{proxy:{enabled:!1},local:{enabled:!1},oidc:{enabled:!1,providers:[]}}}};function Sd(t,e){switch(e.type){case Se.SET_LOADING:return{...t,isLoading:e.payload,error:null};case Se.SET_USER:return{...t,user:e.payload,isAuthenticated:!!e.payload&&e.payload.id!=="anonymous",isLoading:!1,error:null};case Se.SET_ERROR:return{...t,error:e.payload,isLoading:!1};case Se.LOGOUT:return localStorage.removeItem("authToken"),{...t,user:null,isAuthenticated:!1,isLoading:!1,error:null};case Se.SET_AUTH_CONFIG:return{...t,authConfig:e.payload};default:return t}}const aa=o.createContext();function Ed({children:t}){const[e,r]=o.useReducer(Sd,kd),n=()=>{const h=localStorage.getItem("authToken");return h?{Authorization:`Bearer ${h}`}:{}},a=o.useCallback(async()=>{try{r({type:Se.SET_LOADING,payload:!0});const p=(await be.get("/auth/status",{headers:n()})).data;if(p.success!==!1)if(r({type:Se.SET_AUTH_CONFIG,payload:{authMode:p.authMode,anonymousAuth:p.anonymousAuth,authMethods:p.authMethods,autoRedirect:p.autoRedirect}}),p.authenticated&&p.user)Object.keys(sessionStorage).forEach(v=>{v.startsWith("autoRedirect_")&&sessionStorage.removeItem(v)}),new URLSearchParams(window.location.search).get("logout")==="true"&&(console.log("🧹 Clearing logout parameter after successful login"),window.history.replaceState({},document.title,window.location.pathname)),r({type:Se.SET_USER,payload:p.user});else{!!localStorage.getItem("authToken")&&(console.log("🔐 Token invalidated by server (expired or auth mode change)"),localStorage.removeItem("authToken"));const x=new URLSearchParams(window.location.search).get("logout")==="true";if(!x&&!window.location.pathname.includes("/login")){const y=window.location.href.split("?")[0],C=new URLSearchParams(window.location.search);C.delete("token"),C.delete("provider"),C.delete("logout");const k=C.toString(),I=k?`${y}?${k}`:y;sessionStorage.setItem("authReturnUrl",I),console.log("📍 Stored return URL for post-authentication redirect:",I)}if(p.autoRedirect&&!p.authenticated&&!x){const j=`autoRedirect_${p.autoRedirect.provider}`,y=sessionStorage.getItem(j),C=Date.now();if(!y||C-parseInt(y)>300*1e3){console.log(`🔀 Auto-redirecting to ${p.autoRedirect.provider} provider`),sessionStorage.setItem(j,C.toString());const k=sessionStorage.getItem("authReturnUrl")||window.location.href,I=p.autoRedirect.url,E=I.includes("?")?"&":"?",O=`${I}${E}returnUrl=${encodeURIComponent(k)}`;window.location.href=O;return}else console.log(`⚠️ Skipping auto-redirect to ${p.autoRedirect.provider} - attempted recently`)}else x&&console.log("🚫 Skipping auto-redirect - user just logged out");r({type:Se.SET_USER,payload:null})}else r({type:Se.SET_USER,payload:null})}catch(h){console.error("Failed to load auth status:",h),r({type:Se.SET_ERROR,payload:h.message})}},[]),i=async h=>{try{r({type:Se.SET_LOADING,payload:!0}),localStorage.setItem("authToken",h);const f=(await be.get("/auth/user",{headers:{Authorization:`Bearer ${h}`}})).data;if(f.success&&f.user){try{const{clearApiCache:x}=await le(async()=>{const{clearApiCache:j}=await import("./cache-DemEyH2m.js");return{clearApiCache:j}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);x()}catch(x){console.warn("Could not clear API cache on token login:",x)}r({type:Se.SET_USER,payload:f.user});const v=sessionStorage.getItem("authReturnUrl");return v&&v!==window.location.href&&(console.log("↩️ Redirecting to stored return URL after token login:",v),sessionStorage.removeItem("authReturnUrl"),window.location.href=v),{success:!0}}else{localStorage.removeItem("authToken");const v="Invalid token";return r({type:Se.SET_ERROR,payload:v}),{success:!1,error:v}}}catch(p){localStorage.removeItem("authToken"),console.error("Token login error:",p);const f=p.message||"Token login failed";return r({type:Se.SET_ERROR,payload:f}),{success:!1,error:f}}},c=o.useCallback(async()=>{try{const p=new URLSearchParams(window.location.search).get("token");if(p){console.log("🔍 OIDC Callback: Processing login token"),window.history.replaceState({},document.title,window.location.pathname);const f=await i(p);return f.success&&await a(),f}}catch(h){return console.error("OIDC callback error:",h),r({type:Se.SET_ERROR,payload:h.message}),{success:!1,error:h.message}}},[]);o.useEffect(()=>{const h=new URLSearchParams(window.location.search);h.get("token")&&h.get("provider")?c():a();const p=async()=>{console.log("🔐 Session expired - handling automatic relogin"),localStorage.getItem("authToken")&&localStorage.removeItem("authToken");const v=window.location.href,j=new URLSearchParams(window.location.search).get("logout")==="true";j||(sessionStorage.setItem("authReturnUrl",v),console.log("📍 Stored return URL for post-authentication redirect:",v));try{const C=(await be.get("/auth/status")).data;if(C.autoRedirect&&!j){const k=`autoRedirect_${C.autoRedirect.provider}`,I=sessionStorage.getItem(k),E=Date.now();if(!I||E-parseInt(I)>300*1e3){console.log(`🔀 Session expired - auto-redirecting to ${C.autoRedirect.provider} provider`),sessionStorage.setItem(k,E.toString()),window.dispatchEvent(new CustomEvent("sessionExpiredReconnecting",{detail:{provider:C.autoRedirect.provider}}));const O=sessionStorage.getItem("authReturnUrl")||v,N=C.autoRedirect.url,M=N.includes("?")?"&":"?",_=`${N}${M}returnUrl=${encodeURIComponent(O)}`;window.location.href=_;return}}}catch(y){console.error("Failed to check auto-redirect on session expiry:",y)}window.dispatchEvent(new CustomEvent("sessionExpired")),r({type:Se.LOGOUT})};return window.addEventListener("authTokenExpired",p),()=>{window.removeEventListener("authTokenExpired",p)}},[c,a]);const d=async(h,p,f=null)=>{try{r({type:Se.SET_LOADING,payload:!0});const v={username:h,password:p};f&&(v.provider=f);const j=(await be.post("/auth/login",v)).data;if(j.success&&j.token){localStorage.setItem("authToken",j.token);try{const{clearApiCache:C}=await le(async()=>{const{clearApiCache:k}=await import("./cache-DemEyH2m.js");return{clearApiCache:k}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url);C()}catch(C){console.warn("Could not clear API cache on login:",C)}r({type:Se.SET_USER,payload:j.user}),await a();const y=sessionStorage.getItem("authReturnUrl");return y&&y!==window.location.href&&(console.log("↩️ Redirecting to stored return URL after login:",y),sessionStorage.removeItem("authReturnUrl"),window.location.href=y),{success:!0}}else{const y=j.error||"Login failed";return r({type:Se.SET_ERROR,payload:y}),{success:!1,error:y}}}catch(v){console.error("Login error:",v);const x=v.message||"Login failed";return r({type:Se.SET_ERROR,payload:x}),{success:!1,error:x}}},l=(h,p=window.location.href)=>{try{sessionStorage.setItem("authReturnUrl",p);const f=Ir(`auth/oidc/${h}?returnUrl=${encodeURIComponent(p)}`);window.location.href=f}catch(f){console.error("OIDC login error:",f),r({type:Se.SET_ERROR,payload:f.message})}},u=async()=>{try{console.log("🔒 LOGOUT: Redirecting to logout page to prevent auto-redirect"),e.isAuthenticated&&await be.post("/auth/logout",{},{headers:n()})}catch(h){console.error("Logout API error:",h)}finally{b(),r({type:Se.LOGOUT}),window.location.href=Pt("/?logout=true")}},b=()=>{try{localStorage.removeItem("authToken"),["authToken","userPreferences","lastLoginTime"].forEach(f=>localStorage.removeItem(f)),sessionStorage.clear();try{const{clearApiCache:f}=require("../../api/utils/cache");f()}catch(f){console.warn("Could not clear API cache:",f)}["recentApps","recentPrompts","recentItems","favoriteApps","favoritePrompts","chatHistory","uploadHistory","appSettings"].forEach(f=>{localStorage.removeItem(f),sessionStorage.removeItem(f)}),"indexedDB"in window&&["ihubApps","chatHistory","userFiles"].forEach(v=>{try{indexedDB.deleteDatabase(v)}catch(x){console.warn(`Could not clear IndexedDB ${v}:`,x)}}),"serviceWorker"in navigator&&"caches"in window&&caches.keys().then(f=>Promise.all(f.map(v=>{if(v.includes("ihubApps")||v.includes("api"))return caches.delete(v)}))).catch(f=>{console.warn("Could not clear service worker caches:",f)}),window.dispatchEvent(new CustomEvent("userLoggedOut",{detail:{timestamp:new Date().toISOString()}})),console.log("🧹 Logout cleanup completed - all user data cleared")}catch(h){console.error("Error during logout cleanup:",h)}},w={...e,login:d,loginWithToken:i,loginWithOidc:l,handleOidcCallback:c,logout:u,refreshUser:async()=>{if(e.isAuthenticated)try{const p=(await be.get("/auth/user",{headers:n()})).data;p.success&&p.user?r({type:Se.SET_USER,payload:p.user}):r({type:Se.LOGOUT})}catch(h){console.error("Failed to refresh user:",h),r({type:Se.LOGOUT})}},loadAuthStatus:a,hasPermission:(h,p)=>{var v,x,j,y,C;if(!((v=e.user)!=null&&v.permissions))return!1;const f=e.user.permissions[h];return f?((x=f.has)==null?void 0:x.call(f,"*"))||((j=f.has)==null?void 0:j.call(f,p))||((y=f.includes)==null?void 0:y.call(f,"*"))||((C=f.includes)==null?void 0:C.call(f,p)):!1},getAuthHeaders:n};return s.jsx(aa.Provider,{value:w,children:t})}function St(){const t=o.useContext(aa);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const oa=o.createContext({platformConfig:null,isLoading:!0,error:null,refreshConfig:()=>{}}),Cd=({children:t})=>{const[e,r]=o.useState(null),[n,a]=o.useState(!0),[i,c]=o.useState(null),d=async()=>{var u,b,g,m,w;try{a(!0);const[h,p]=await Promise.all([xo(),ur()]),f={auth:{mode:h.authMode},anonymousAuth:h.anonymousAuth,localAuth:(u=h.authMethods)==null?void 0:u.local,proxyAuth:(b=h.authMethods)==null?void 0:b.proxy,oidcAuth:(g=h.authMethods)==null?void 0:g.oidc,ldapAuth:(m=h.authMethods)==null?void 0:m.ldap,ntlmAuth:(w=h.authMethods)==null?void 0:w.ntlm,admin:p.admin,version:p.version,computedRefreshSalt:p.computedRefreshSalt,defaultLanguage:p.defaultLanguage,authenticated:h.authenticated,user:h.user,autoRedirect:h.autoRedirect};r(f),c(null)}catch(h){console.error("Error fetching platform configuration:",h),c("Failed to load platform configuration")}finally{a(!1)}},l=()=>{d()};return o.useEffect(()=>{d()},[]),s.jsx(oa.Provider,{value:{platformConfig:e,isLoading:n,error:i,refreshConfig:l},children:t})},Pr=()=>o.useContext(oa),st=({message:t="Loading..."})=>s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-gray-700",children:t})]}),pn=({onSuccess:t,onCancel:e})=>{var $,L,S,P,A,B,D,z,Z,se,ce,T,H,J,ne;const{t:r}=Q(),{login:n,loginWithOidc:a,isLoading:i,error:c,authConfig:d}=St(),{platformConfig:l}=Pr(),[u,b]=o.useState({username:"",password:"",provider:""}),[g,m]=o.useState(!1),w=Y=>{const{name:xe,value:F}=Y.target;b(G=>({...G,[xe]:F}))},h=async Y=>{if(Y.preventDefault(),!(!u.username||!u.password)){m(!0);try{(await n(u.username,u.password,u.provider)).success&&(t==null||t())}catch(xe){console.error("Login form error:",xe)}finally{m(!1)}}},p=Y=>{a(Y)},f=()=>{const Y=window.location.href,xe=`/api/auth/ntlm/login?returnUrl=${encodeURIComponent(Y)}`;window.location.href=xe},v=((L=($=d==null?void 0:d.authMethods)==null?void 0:$.oidc)==null?void 0:L.providers)||[],x=((P=(S=d==null?void 0:d.authMethods)==null?void 0:S.oidc)==null?void 0:P.enabled)&&v.length>0,j=(B=(A=d==null?void 0:d.authMethods)==null?void 0:A.local)==null?void 0:B.enabled,y=((z=(D=d==null?void 0:d.authMethods)==null?void 0:D.ldap)==null?void 0:z.providers)||[],C=(se=(Z=d==null?void 0:d.authMethods)==null?void 0:Z.ldap)==null?void 0:se.enabled,k=(T=(ce=d==null?void 0:d.authMethods)==null?void 0:ce.ntlm)==null?void 0:T.enabled,I=(J=(H=d==null?void 0:d.authMethods)==null?void 0:H.ntlm)==null?void 0:J.domain,E=j||C,O=((ne=l==null?void 0:l.localAuth)==null?void 0:ne.showDemoAccounts)===!0,N=(x?1:0)+(k?1:0)+(E?1:0),M=Y=>{switch(Y){case"google":return"🔍";case"microsoft":return"🏢";case"auth0":return"🔐";default:return"🔑"}},_=i||g;return s.jsxs("div",{className:"max-w-md mx-auto bg-white shadow-lg rounded-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:r("errors.signIn","Sign In")}),c&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),x&&s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-sm text-gray-600 text-center mb-3",children:r("auth.login.signInWith","Sign in with:")}),s.jsx("div",{className:"space-y-2",children:v.map(Y=>s.jsxs("button",{type:"button",onClick:()=>p(Y.name),disabled:_,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"mr-2",children:M(Y.name)}),Y.displayName||Y.name]},Y.name))}),N>1&&s.jsxs("div",{className:"my-4 flex items-center",children:[s.jsx("div",{className:"flex-grow border-t border-gray-300"}),s.jsx("span",{className:"px-3 text-sm text-gray-500",children:r("auth.login.or","or")}),s.jsx("div",{className:"flex-grow border-t border-gray-300"})]})]}),k&&s.jsxs("div",{className:"mb-6",children:[!x&&N>1&&s.jsx("div",{className:"text-sm text-gray-600 text-center mb-3",children:r("auth.login.signInWith","Sign in with:")}),s.jsxs("button",{type:"button",onClick:f,disabled:_,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"mr-2",children:"🔐"}),r("auth.login.windowsAuth","Windows Authentication"),I&&s.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",I,")"]})]}),E&&s.jsxs("div",{className:"my-4 flex items-center",children:[s.jsx("div",{className:"flex-grow border-t border-gray-300"}),s.jsx("span",{className:"px-3 text-sm text-gray-500",children:r("auth.login.or","or")}),s.jsx("div",{className:"flex-grow border-t border-gray-300"})]})]}),E&&s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[C&&y.length>1&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"provider",className:"block text-sm font-medium text-gray-700 mb-1",children:r("auth.login.ldapProvider","LDAP Provider")}),s.jsxs("select",{id:"provider",name:"provider",value:u.provider,onChange:w,disabled:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900 bg-white",children:[s.jsx("option",{value:"",children:r("auth.login.selectProvider","Auto-detect")}),y.map(Y=>s.jsx("option",{value:Y.name,children:Y.displayName||Y.name},Y.name))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:r("auth.login.username","Username or Email")}),s.jsx("input",{type:"text",id:"username",name:"username",value:u.username,onChange:w,required:!0,disabled:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900 bg-white",placeholder:r("auth.login.usernamePlaceholder","Enter your username or email")})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:r("auth.login.password","Password")}),s.jsx("input",{type:"password",id:"password",name:"password",value:u.password,onChange:w,required:!0,disabled:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed text-gray-900 bg-white",placeholder:r("auth.login.passwordPlaceholder","Enter your password")})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",disabled:_||!u.username||!u.password,className:"flex-1 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:_?s.jsxs(s.Fragment,{children:[s.jsx(st,{size:"sm",className:"mr-2"}),r("auth.login.signingIn","Signing In...")]}):r("auth.menu.signIn","Sign In")}),e&&s.jsx("button",{type:"button",onClick:e,disabled:_,className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Cancel"})]})]}),j&&O&&s.jsxs("div",{className:"mt-6 text-xs text-gray-500 text-center",children:[s.jsx("p",{children:"Demo accounts:"}),s.jsx("p",{children:"Admin: admin / password123"}),s.jsx("p",{children:"User: user / password123"})]}),!E&&!x&&!k&&s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("p",{children:"No authentication methods are currently enabled."}),s.jsx("p",{className:"text-sm mt-2",children:"Please contact your administrator."})]})]})},Nd=({variant:t="header",className:e=""})=>{var E,O,N,M,_,$,L,S;const{t:r}=Q(),{user:n,isAuthenticated:a,logout:i,authConfig:c}=St(),{platformConfig:d}=Pr(),[l,u]=o.useState(!1),[b,g]=o.useState(!1),[m,w]=o.useState(!1),h=o.useRef(null),p=(d==null?void 0:d.auth)||{},f=(c==null?void 0:c.authMode)||p.mode||"anonymous",v=((E=c==null?void 0:c.anonymousAuth)==null?void 0:E.enabled)??((O=d==null?void 0:d.anonymousAuth)==null?void 0:O.enabled)!==!1,x=(n==null?void 0:n.name)||(n==null?void 0:n.email)||(n==null?void 0:n.username)||(n==null?void 0:n.id)||"User",j=x.split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2);if(o.useEffect(()=>{const P=A=>{h.current&&!h.current.contains(A.target)&&(u(!1),w(!1))};return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[]),f==="proxy")return null;const y=((M=(N=c==null?void 0:c.authMethods)==null?void 0:N.local)==null?void 0:M.enabled)||(($=(_=c==null?void 0:c.authMethods)==null?void 0:_.oidc)==null?void 0:$.enabled)||((S=(L=c==null?void 0:c.authMethods)==null?void 0:L.proxy)==null?void 0:S.enabled);if(v&&!y||t==="sidebar"&&(!a||!n||n.id==="anonymous"))return null;if(!v&&!a)return ks.createPortal(s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full",style:{zIndex:2147483647},children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:s.jsx(pn,{})})}),document.body);const C=()=>{g(!0),u(!1),w(!1)},k=()=>{i(),u(!1),w(!1)},I=(n==null?void 0:n.isAdmin)===!0;return s.jsxs("div",{className:`relative ${e}`,ref:h,children:[s.jsxs("button",{onClick:()=>u(!l),className:t==="header"?"flex items-center space-x-2 text-white hover:text-white/80 focus:outline-none":"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors","aria-expanded":l,"aria-haspopup":"true",children:[a?s.jsx(s.Fragment,{children:t==="header"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:s.jsx(R,{name:"user",size:"sm",className:"text-white"})}),s.jsx("span",{className:"hidden md:block text-sm",children:(n==null?void 0:n.name)||(n==null?void 0:n.username)||"User"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:j}),s.jsxs("div",{className:"hidden sm:block text-left",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x}),(n==null?void 0:n.email)&&n.email!==x&&s.jsx("div",{className:"text-xs text-gray-500",children:n.email})]})]})}):s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"user",size:"md",className:t==="header"?"text-white":"text-gray-600"}),s.jsx("span",{className:t==="header"?"hidden md:block text-sm":"text-sm text-gray-600",children:"Login"})]}),s.jsx(R,{name:"chevron-down",size:"sm",className:`transition-transform duration-200 ${l?"rotate-180":""} ${t==="header"?"text-white":"text-gray-500"}`})]}),l&&s.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:x}),(n==null?void 0:n.email)&&s.jsx("div",{className:"text-sm text-gray-500",children:n.email}),(n==null?void 0:n.groups)&&n.groups.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(m?n.groups:n.groups.slice(0,3)).map((P,A)=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:P},A)),n.groups.length>3&&s.jsx("button",{onClick:P=>{P.preventDefault(),w(!m)},className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:m?"Show less":`+${n.groups.length-3} more`})]}),(n==null?void 0:n.authMethod)&&s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["via ",n.authMethod]})]}),s.jsxs("div",{className:"py-1",children:[t==="sidebar"&&s.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",onClick:()=>{u(!1),w(!1)},children:[s.jsx(R,{name:"user",className:"w-4 h-4 mr-3"}),r("auth.menu.profile","Profile")]}),I&&s.jsxs(_e,{to:"/admin",className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{u(!1),w(!1)},children:[s.jsx(R,{name:"settings",size:"sm",className:"mr-3 text-gray-400"}),r("auth.menu.adminPanel","Admin Panel")]}),s.jsxs("button",{onClick:k,className:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50",children:[s.jsx(R,{name:t==="sidebar"?"log-out":"logout",size:"sm",className:"mr-3 text-red-400"}),r("auth.menu.signOut","Sign Out")]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:s.jsx(R,{name:"user",size:"md",className:"text-gray-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Anonymous User"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Not signed in"})]})]})}),s.jsxs("button",{onClick:C,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx(R,{name:"login",size:"sm",className:"mr-3 text-gray-400"}),r("auth.menu.signIn","Sign In")]})]})}),b&&ks.createPortal(s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full",style:{zIndex:2147483647},children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r("auth.menu.signIn","Sign In")}),s.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(R,{name:"x",size:"md"})})]}),s.jsx(pn,{onSuccess:()=>g(!1)})]})}),document.body)]})},Ld=(t,e)=>$n(t).startsWith(e),xn=(t,e)=>{if(e.startsWith("http"))return!1;const r=$n(t);return e==="/"?r==="/":r===e||r.startsWith(e+"/")},bn=()=>{var j,y,C,k,I,E,O,N,M,_;const{t,i18n:e}=Q(),r=e.language,{headerColor:n,uiConfig:a,resetHeaderColor:i}=Ue(),c=Mn(),[d,l]=o.useState(!1),[u]=or(),{user:b,isAuthenticated:g}=St(),{showHeader:m,showFooter:w,language:h}=jd(u);o.useEffect(()=>{h&&h!==e.language&&(console.log(`Setting language from URL parameter: ${h}`),e.changeLanguage(h))},[h,e]);const p=o.useMemo(()=>Ld(c.pathname,"/apps/"),[c.pathname]);o.useEffect(()=>{na({showHeader:m,showFooter:w,language:h})},[m,w,h]);const f={backgroundColor:n||"#4f46e5",transition:"background-color 0.3s ease"},v=()=>{l(!d)},x=$=>{if(!$.url.startsWith("/pages/")||!(a!=null&&a.pages))return!0;const L=$.url.replace("/pages/",""),S=a.pages[L];if(!S)return!0;if(S.authRequired&&!g)return!1;if(Array.isArray(S.allowedGroups)){if(S.allowedGroups.includes("*"))return!0;if(S.allowedGroups.length>0)return((b==null?void 0:b.groups)||[]).some(A=>S.allowedGroups.includes(A))}return!0};return s.jsxs("div",{className:"flex flex-col min-h-screen h-full w-full",children:[(a==null?void 0:a.disclaimer)&&a.disclaimer.enabled!==!1&&s.jsx(xi,{disclaimer:a.disclaimer,currentLanguage:r}),s.jsx(yd,{}),m&&s.jsxs("header",{className:"text-white sticky top-0 z-10",style:f,children:[s.jsxs("div",{className:"relative flex items-stretch h-16",children:[((y=(j=a==null?void 0:a.header)==null?void 0:j.logo)==null?void 0:y.url)&&s.jsx("div",{className:"absolute left-0 h-full flex items-center",style:a.header.logo.containerStyle,children:s.jsx("img",{src:Tn(a.header.logo.url),alt:q(a.header.logo.alt,r)||"Organization Logo",className:"h-full w-auto",style:a.header.logo.imageStyle})}),s.jsxs("div",{className:"container mx-auto px-4 flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center h-full",children:s.jsx(_e,{to:"/",onClick:i,className:"text-2xl font-bold flex items-center py-4",children:(C=a==null?void 0:a.header)!=null&&C.title?q(a.header.title,r):"iHub Apps"})}),s.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:((k=a==null?void 0:a.header)==null?void 0:k.links)&&a.header.links.filter($=>{var L;return!($.url==="/prompts"&&((L=a==null?void 0:a.promptsList)==null?void 0:L.enabled)===!1)&&x($)}).map(($,L)=>s.jsx(_e,{to:$.url,onClick:i,className:`hover:text-white/80 ${xn(c.pathname,$.url)?"underline font-medium":""}`,target:$.url.startsWith("http")?"_blank":void 0,rel:$.url.startsWith("http")?"noopener noreferrer":void 0,children:q($.name,r)},L))}),s.jsxs("div",{className:"flex items-center space-x-4",children:[((E=(I=a==null?void 0:a.header)==null?void 0:I.languageSelector)==null?void 0:E.enabled)!==!1&&s.jsx(pi,{}),s.jsx(Nd,{}),s.jsx("button",{className:"md:hidden text-white",onClick:v,"aria-label":t("common.toggleMenu","Toggle menu"),children:s.jsx(R,{name:"menu",size:"lg",className:"text-white"})})]})]})]}),d&&s.jsx("div",{className:"md:hidden bg-indigo-800 shadow-lg",style:f,children:s.jsx("nav",{className:"container mx-auto px-4 py-3 flex flex-col",children:((O=a==null?void 0:a.header)==null?void 0:O.links)&&a.header.links.filter($=>{var L;return!($.url==="/prompts"&&((L=a==null?void 0:a.promptsList)==null?void 0:L.enabled)===!1)&&x($)}).map(($,L)=>s.jsx(_e,{to:$.url,className:`block py-2 ${xn(c.pathname,$.url)?"font-medium":""}`,target:$.url.startsWith("http")?"_blank":void 0,rel:$.url.startsWith("http")?"noopener noreferrer":void 0,onClick:()=>{l(!1),i()},children:q($.name,r)},L))})})]}),s.jsx("main",{className:"flex-grow w-full overflow-y-auto",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsx(La,{})})}),((N=a==null?void 0:a.footer)==null?void 0:N.enabled)!==!1&&w&&s.jsx("footer",{className:"bg-gray-800 text-white py-4",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[s.jsx("div",{className:"mb-4 md:mb-0",children:s.jsx("p",{children:(M=a==null?void 0:a.footer)!=null&&M.text?q(a.footer.text,r):t("footer.copyright")})}),!p&&s.jsx("div",{className:"flex flex-wrap justify-center gap-4 md:gap-6",children:((_=a==null?void 0:a.footer)==null?void 0:_.links)&&a.footer.links.filter($=>x($)).map(($,L)=>s.jsx(_e,{to:$.url,onClick:i,className:"hover:text-gray-300",target:$.url.startsWith("http")||$.url.startsWith("mailto:")?"_blank":void 0,rel:$.url.startsWith("http")?"noopener noreferrer":void 0,children:q($.name,r)},L))})]})})})]})},Md=()=>{var ne,Y,xe;const{t,i18n:e}=Q(),r=e.language,{resetHeaderColor:n,uiConfig:a}=Ue(),{user:i,isAuthenticated:c}=St(),{getFavorites:d,toggleFavorite:l}=hr("ihub_favorite_apps"),u=o.useMemo(()=>{var G;const F={enabled:!0,placeholder:{en:"Search apps...",de:"Apps suchen..."},width:"w-full sm:w-2/3 lg:w-1/3"};return((G=a==null?void 0:a.appsList)==null?void 0:G.search)||F},[a]),b=o.useMemo(()=>{var G;const F={enabled:!0,default:"relevance"};return((G=a==null?void 0:a.appsList)==null?void 0:G.sort)||F},[a]),g=o.useMemo(()=>{var G;const F={enabled:!1,showAll:!0,list:[]};return((G=a==null?void 0:a.appsList)==null?void 0:G.categories)||F},[a]),[m,w]=o.useState([]),[h,p]=o.useState(!0),[f,v]=o.useState(null),[x,j]=o.useState(""),[y,C]=o.useState([]),[k,I]=o.useState(0),[E,O]=o.useState("all"),N=o.useMemo(()=>ra(),[]),[M,_]=o.useState(b.default||"relevance"),$=o.useMemo(()=>{if(!g.enabled)return[];if(m.length<=1)return[];const F=new Set(m.map(V=>V.category||"utility")),G=g.list.filter(V=>V.id==="all"?g.showAll:F.has(V.id));return G.filter(V=>V.id!=="all").length<=1?[]:G},[g,m]);o.useEffect(()=>{E!=="all"&&(m.some(G=>(G.category||"utility")===E)||O("all"))},[m,E]),o.useEffect(()=>{_(b.default||"relevance")},[b]);const L=o.useRef(null),S=o.useRef(null),P=o.useCallback(()=>{if(!L.current||!S.current)return 9;const F=L.current.getBoundingClientRect(),G=S.current.getBoundingClientRect(),W=F.top-G.top,V=window.innerHeight-W-120,ue=Math.max(1,Math.floor(V/250));let Ee=1;return window.innerWidth>=1024?Ee=3:window.innerWidth>=640&&(Ee=2),ue*Ee},[]);o.useEffect(()=>{const F=()=>{const G=P();I(G)};return F(),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}},[P]),o.useEffect(()=>{let F=!0;return(async()=>{try{if(p(!0),await new Promise(K=>setTimeout(K,100)),!F)return;console.log("Fetching apps data...");const W=await Vn();if(!F)return;if(!W||!Array.isArray(W)){console.error("Invalid apps data received:",W),v(t("error.invalidDataFormat","Failed to load applications: Invalid data format")),w([]);return}const V=d();if(F){w(W),C(V),v(null);const K=P();I(K)}}catch(W){console.error("Error loading apps:",W),F&&(v(t("error.loadingFailed","Failed to load applications. Please try again later.")),w([]))}finally{F&&p(!1)}})(),()=>{F=!1}},[r,i==null?void 0:i.id,c,t]),o.useEffect(()=>{if(u.enabled&&m.length>3&&x){const F=P();I(F)}},[x,u.enabled,m.length]);const A=o.useRef(r);o.useEffect(()=>{A.current!==r&&(A.current=r)},[r]),o.useEffect(()=>{n()},[n]);const B=o.useCallback(F=>{const G=F.target.value;j(G)},[]),D=o.useCallback(()=>{j("")},[]),z=o.useCallback((F,G)=>{F.preventDefault(),F.stopPropagation();const W=l(G);C(W?V=>[...V,G]:V=>V.filter(K=>K!==G))},[l]),Z=o.useCallback(()=>{const F=P();I(G=>G+F)},[]),se=o.useCallback(F=>{O(F);const G=P();I(G)},[]),ce=o.useMemo(()=>m.filter(F=>{try{if(!F||g.enabled&&E!=="all"&&(F.category||"utility")!==E)return!1;if(!(u.enabled&&m.length>3)||x==="")return!0;const W=F.name&&q(F.name,r)||"",V=F.description&&q(F.description,r)||"",K=W.toLowerCase().includes(x.toLowerCase()),ue=V.toLowerCase().includes(x.toLowerCase());return K||ue}catch(G){return console.error("Error filtering app:",F,G),!1}}),[m,x,r,u.enabled,g.enabled,E]),T=o.useMemo(()=>{const F=(K,ue)=>{const Ee=y.includes(K.id),Ie=y.includes(ue.id);if(Ee&&!Ie)return-1;if(!Ee&&Ie)return 1;const je=K.order!==void 0&&K.order!==null,Le=ue.order!==void 0&&ue.order!==null;if(je&&Le&&K.order!==ue.order)return K.order-ue.order;if(je&&!Le)return-1;if(!je&&Le)return 1;const X=q(K.name,r)||"",ae=q(ue.name,r)||"";return X.localeCompare(ae)},G=(K,ue)=>{const Ee=new Set(N),Ie=y.includes(K.id),je=y.includes(ue.id);if(Ie&&!je)return-1;if(!Ie&&je)return 1;const Le=Ee.has(K.id),X=Ee.has(ue.id);if(Le&&!X)return-1;if(!Le&&X)return 1;if(Le&&X)return N.indexOf(K.id)-N.indexOf(ue.id);const ae=K.order!==void 0&&K.order!==null,fe=ue.order!==void 0&&ue.order!==null;if(ae&&fe&&K.order!==ue.order)return K.order-ue.order;if(ae&&!fe)return-1;if(!ae&&fe)return 1;const Re=q(K.name,r)||"",ge=q(ue.name,r)||"";return Re.localeCompare(ge)},W=(K,ue,Ee="asc")=>{const Ie=q(K.name,r)||"",je=q(ue.name,r)||"";return Ee==="asc"?Ie.localeCompare(je):je.localeCompare(Ie)},V=[...ce];return M==="relevance"?(console.log("Sorting by relevance"),V.sort(G)):M==="nameAsc"?(console.log("Sorting by name ascending"),V.sort((K,ue)=>W(K,ue,"asc"))):M==="nameDesc"?(console.log("Sorting by name descending"),V.sort((K,ue)=>W(K,ue,"desc"))):V.sort(F)},[ce,y,N,r,M]),H=o.useMemo(()=>T.slice(0,k),[T,k]),J=H.length<T.length;return h?s.jsx("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:s.jsx(st,{message:t("app.loading")})}):f?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 mb-4",children:f}),s.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",onClick:()=>window.location.reload(),children:t("app.retry")})]}):m.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-yellow-500 mb-4",children:t("error.noAppsAvailable","No apps available from server")}),s.jsx("p",{className:"mb-4",children:t("error.checkServer","Check if the server is running and returning data correctly.")}),s.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",onClick:()=>window.location.reload(),children:t("app.retry")})]}):s.jsxs("div",{ref:S,className:"container mx-auto py-8 px-4 flex flex-col",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center justify-center",children:[s.jsx(R,{name:((ne=a==null?void 0:a.icons)==null?void 0:ne.appsListLogo)||"apps-svg-logo",className:"text-indigo-600 w-[4rem] h-[4rem] mr-2"}),(Y=a==null?void 0:a.appsList)!=null&&Y.title?q(a.appsList.title,r):t("pages.appsList.title")]}),s.jsx("p",{className:"text-gray-600",children:(xe=a==null?void 0:a.appsList)!=null&&xe.subtitle?q(a.appsList.subtitle,r):t("pages.appsList.subtitle")})]}),u.enabled&&m.length>3&&s.jsxs("div",{className:`flex flex-col sm:flex-row items-stretch gap-4 mb-4 mx-auto ${u.width||"w-full sm:w-2/3 lg:w-1/3"}`,children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(R,{name:"search",className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",placeholder:q(u.placeholder,r)||t("pages.appsList.searchPlaceholder"),value:x,onChange:B,className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true"}),x&&s.jsx("button",{onClick:D,className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600","aria-label":t("common.clearSearch","Clear search"),children:s.jsx(R,{name:"x",className:"w-5 h-5"})})]}),b.enabled&&s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("select",{className:"h-full border rounded-lg py-2 px-3 w-full sm:w-auto",value:M,onChange:F=>_(F.target.value),children:[s.jsx("option",{value:"relevance",children:t("pages.appsList.sort.relevance","Relevance")}),s.jsx("option",{value:"nameAsc",children:t("pages.appsList.sort.nameAsc","Name A-Z")}),s.jsx("option",{value:"nameDesc",children:t("pages.appsList.sort.nameDesc","Name Z-A")})]})})]}),g.enabled&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-6 justify-center",children:$.map(F=>s.jsx("button",{onClick:()=>se(F.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${E===F.id?"text-white shadow-lg transform scale-105":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,style:{backgroundColor:E===F.id?F.color:void 0},children:q(F.name,r)},F.id))}),H.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:t("pages.appsList.noApps")}),u.enabled&&m.length>3&&x?s.jsx("button",{onClick:()=>{D()},className:"mt-4 px-4 py-2 text-indigo-600 border border-indigo-600 rounded hover:bg-indigo-50",children:t("pages.appsList.clearFilters")}):null]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-center w-full",children:s.jsx("div",{ref:L,className:`grid gap-6 ${H.length===1?"grid-cols-1 max-w-md mx-auto":H.length===2?"grid-cols-1 sm:grid-cols-2 max-w-2xl mx-auto":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"}`,role:"list","aria-label":"Apps list",children:H.map(F=>s.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 w-full max-w-md",role:"listitem",children:[s.jsx("button",{onClick:G=>z(G,F.id),className:"absolute top-2 right-2 z-10 p-1 bg-white bg-opacity-70 rounded-full hover:bg-opacity-100 transition-all",title:y.includes(F.id)?t("pages.appsList.unfavorite"):t("pages.appsList.favorite"),"aria-label":y.includes(F.id)?t("pages.appsList.unfavorite"):t("pages.appsList.favorite"),children:s.jsx(R,{name:"star",className:y.includes(F.id)?"text-yellow-500":"text-gray-400",solid:y.includes(F.id)})}),s.jsx(_e,{to:`/apps/${F.id}`,className:"block h-full","aria-label":`Open ${q(F.name,r)||F.id} app`,children:s.jsxs("div",{className:"flex flex-row sm:flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-center w-20 h-full flex-shrink-0 rounded-l-lg sm:rounded-t-lg sm:rounded-l-none sm:w-full sm:h-24 relative",style:{backgroundColor:F.color||"#4f46e5"},children:[s.jsx("div",{className:"w-12 h-12 bg-white/30 rounded-full flex items-center justify-center",children:s.jsx(R,{name:F.icon||"lightning-bolt",size:"xl",className:"text-white"})}),F.type&&F.type!=="chat"&&s.jsxs("div",{className:"absolute bottom-2 right-2 bg-white/90 dark:bg-gray-800/90 px-2 py-0.5 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1",children:[s.jsx(R,{name:F.type==="redirect"?"external-link":"window",size:"xs"}),t(`pages.appsList.appTypes.${F.type}`)]})]}),s.jsxs("div",{className:"px-4 py-2 flex flex-col flex-1",children:[s.jsxs("h3",{className:"font-bold text-lg mb-1 break-words",children:[q(F.name,r)||F.id,y.includes(F.id)&&s.jsx("span",{className:"ml-2 hidden sm:inline-block","aria-label":"Favorite",children:s.jsx(R,{name:"star",size:"sm",className:"text-yellow-500",solid:!0})}),N.includes(F.id)&&s.jsx("span",{className:"ml-1 inline-block","aria-label":t("pages.appsList.recent"),title:t("pages.appsList.recent"),children:s.jsx(R,{name:"clock",size:"sm",className:"text-indigo-600",solid:!0})})]}),s.jsx("p",{className:"text-gray-600 text-sm flex-grow",children:q(F.description,r)||""})]})]})})]},F.id))})}),J&&s.jsxs("div",{className:"text-center mt-6",children:[s.jsx("button",{onClick:Z,className:"bg-white hover:bg-gray-50 text-indigo-600 font-medium py-2 px-4 border border-indigo-500 rounded shadow-sm transition-colors",children:t("pages.appsList.loadMore","Load More")}),s.jsx("p",{className:"text-gray-500 text-sm mt-2",children:t("pages.appsList.showingCountOfTotal",{defaultValue:"Showing {{displayed}} of {{total}} apps",displayed:H.length,total:T.length})})]})]})]})},Or=t=>t.split(/(\[[^\]]+\])/g).map((e,r)=>e.startsWith("[")&&e.endsWith("]")?s.jsx("span",{className:"text-indigo-600 font-semibold",children:e},r):s.jsx("span",{children:e},r)),Rd=({prompt:t,onClose:e,isFavorite:r,onToggleFavorite:n,t:a})=>{const[i,c]=o.useState("idle"),[d,l]=o.useState("idle");if(o.useEffect(()=>{const g=m=>{m.key==="Escape"&&e()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[e]),!t)return null;const u=async()=>{const g=`${window.location.origin}/prompts?id=${encodeURIComponent(t.id)}`;try{await navigator.clipboard.writeText(g),l("success")}catch(m){console.error("Failed to copy share link:",m),l("error")}setTimeout(()=>l("idle"),2e3)},b=async()=>{try{await navigator.clipboard.writeText(t.prompt.replace("[content]","")),c("success")}catch(g){console.error("Failed to copy prompt:",g),c("error")}setTimeout(()=>c("idle"),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full p-6 animate-fade-in mx-4 max-h-[60vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(R,{name:t.icon||"clipboard",className:"w-6 h-6 mr-2"}),t.name]}),s.jsx("button",{onClick:e,"aria-label":a("common.cancel","Cancel"),children:s.jsx(R,{name:"x"})})]}),s.jsx("p",{className:"text-gray-700 mb-4 whitespace-pre-line",children:Or(t.description||t.prompt)}),s.jsx("pre",{className:"bg-gray-100 p-3 rounded whitespace-pre-wrap break-words mb-4 overflow-y-auto flex-grow",children:t.prompt}),s.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[s.jsxs("button",{onClick:b,className:"px-3 py-1 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-1",children:[i==="success"?s.jsx(R,{name:"check-circle",className:"text-green-600",solid:!0}):i==="error"?s.jsx(R,{name:"exclamation-circle",className:"text-red-600",solid:!0}):s.jsx(R,{name:"copy"}),s.jsx("span",{children:a("pages.promptsList.copyPrompt","Copy")})]}),t.appId&&s.jsx(_e,{to:`/apps/${t.appId}?prefill=${encodeURIComponent(t.prompt.replace("[content]",""))}${t.variables&&t.variables.length>0?"&"+t.variables.map(g=>`var_${g.name}=${encodeURIComponent(g.defaultValue||"")}`).join("&"):""}`,className:"px-3 py-1 text-sm border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-50 flex items-center",onClick:e,children:a("pages.promptsList.useInApp","Try it")}),s.jsx("button",{onClick:()=>{n(t.id)},className:"px-3 py-1 text-sm border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-50 flex items-center",children:s.jsx(R,{name:"star",className:r?"text-yellow-500":"text-gray-600",solid:r})}),s.jsx("button",{onClick:u,className:"px-3 py-1 text-sm border border-indigo-600 text-indigo-600 rounded hover:bg-indigo-50 flex items-center","aria-label":a("pages.promptsList.sharePrompt","Share prompt"),children:d==="success"?s.jsx(R,{name:"check-circle",className:"text-green-600",solid:!0}):d==="error"?s.jsx(R,{name:"exclamation-circle",className:"text-red-600",solid:!0}):s.jsx(R,{name:"share"})})]})]})})},{recordUsage:Lr,getIds:Mr}=ta({prefix:"ihub_recent_prompts_"}),yr=9,Ad=()=>{const{t,i18n:e}=Q(),[r,n]=o.useState([]),[a,i]=o.useState(!0),[c,d]=o.useState(null),[l,u]=o.useState(""),[b,g]=o.useState(0),[m,w]=o.useState([]),[h,p]=o.useState([]),[f,v]=o.useState(null),[x,j]=o.useState("all"),{getFavorites:y,toggleFavorite:C}=hr("ihub_favorite_prompts"),[k,I]=o.useState({}),[E]=or(),{uiConfig:O}=Ue(),N=o.useMemo(()=>{var H;const T={enabled:!0,default:"relevance"};return((H=O==null?void 0:O.promptsList)==null?void 0:H.sort)||T},[O]),M=o.useMemo(()=>{var H;const T={enabled:!1,showAll:!0,list:[]};return((H=O==null?void 0:O.promptsList)==null?void 0:H.categories)||T},[O]),_=o.useMemo(()=>{if(!M.enabled)return[];const T=new Set(r.map(H=>H.category||"creative"));return M.list.filter(H=>H.id==="all"?M.showAll:T.has(H.id))},[M,r]);o.useEffect(()=>{x!=="all"&&(r.some(H=>(H.category||"creative")===x)||j("all"))},[r,x]);const[$,L]=o.useState(N.default||"relevance");o.useEffect(()=>{L(N.default||"relevance")},[N]),o.useEffect(()=>{(async()=>{try{const T=await kr(),H=(Array.isArray(T)?T:[]).map(J=>({...J,name:q(J.name,e.language),prompt:q(J.prompt,e.language),description:q(J.description,e.language)}));n(H),w(y()),p(Mr()),d(null)}catch(T){console.error("Error loading prompts:",T),d(t("error.loadingFailed","Failed to load prompts"))}finally{i(!1)}})()},[t,e.language]),o.useEffect(()=>{if(!r.length)return;const T=E.get("id");if(T){const H=r.find(J=>J.id===T);H&&v(H)}},[r,E]);const S=o.useMemo(()=>{let T=r;if(M.enabled&&x!=="all"&&(T=T.filter(H=>(H.category||"creative")===x)),l){const H=l.toLowerCase();T=T.filter(J=>J.name.toLowerCase().includes(H)||J.prompt.toLowerCase().includes(H)||J.description&&J.description.toLowerCase().includes(H))}return T},[r,l,M.enabled,x]),P=o.useMemo(()=>{if(!N.enabled)return S;const T=(ne,Y)=>{const xe=new Set(m),F=new Set(h),G=xe.has(ne.id),W=xe.has(Y.id);if(G&&!W)return-1;if(!G&&W)return 1;const V=F.has(ne.id),K=F.has(Y.id);return V&&!K?-1:!V&&K?1:V&&K?h.indexOf(ne.id)-h.indexOf(Y.id):0},H=(ne,Y,xe="asc")=>{const F=ne.name.toLowerCase(),G=Y.name.toLowerCase();return xe==="asc"?F.localeCompare(G):G.localeCompare(F)},J=[...S];return $==="nameAsc"?J.sort((ne,Y)=>H(ne,Y,"asc")):$==="nameDesc"?J.sort((ne,Y)=>H(ne,Y,"desc")):J.sort(T)},[S,m,h,$,N.enabled]),A=Math.ceil(P.length/yr),B=P.slice(b*yr,(b+1)*yr),D=T=>{u(T.target.value),g(0)},z=()=>g(T=>Math.max(T-1,0)),Z=()=>g(T=>Math.min(T+1,A-1)),se=(T,H)=>{T.preventDefault();const J=C(H);w(J?ne=>[...ne,H]:ne=>ne.filter(Y=>Y!==H))},ce=T=>{j(T),g(0)};return a?s.jsx(st,{message:t("app.loading")}):c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 mb-4",children:c}),s.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",onClick:()=>window.location.reload(),children:t("app.retry")})]}):s.jsxs("div",{className:"py-8 flex flex-col items-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:t("pages.promptsList.title","Prompts")}),s.jsx("p",{className:"text-gray-600 mb-6",children:t("pages.promptsList.subtitle","Browse available prompts")}),s.jsx("div",{className:"w-full max-w-md sm:max-w-lg lg:max-w-xl mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(R,{name:"search",className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:t("pages.promptsList.searchPlaceholder","Search prompts..."),value:l,onChange:D,autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true"}),l&&s.jsx("button",{type:"button",onClick:()=>{u(""),g(0)},className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600","aria-label":t("common.clear","Clear"),children:s.jsx(R,{name:"x",className:"w-5 h-5"})})]}),N.enabled&&s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("select",{className:"h-full border rounded-lg py-2 px-3 w-full sm:w-auto",value:$,onChange:T=>{L(T.target.value),g(0)},children:[s.jsx("option",{value:"relevance",children:t("pages.promptsList.sort.relevance","Relevance")}),s.jsx("option",{value:"nameAsc",children:t("pages.promptsList.sort.nameAsc","Name A-Z")}),s.jsx("option",{value:"nameDesc",children:t("pages.promptsList.sort.nameDesc","Name Z-A")})]})})]})}),M.enabled&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-6 justify-center",children:_.map(T=>s.jsx("button",{onClick:()=>ce(T.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${x===T.id?"text-white shadow-lg transform scale-105":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,style:{backgroundColor:x===T.id?T.color:void 0},children:q(T.name,e.language)},T.id))}),S.length===0?s.jsx("p",{className:"text-gray-500",children:t("pages.promptsList.noPrompts","No prompts found")}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 max-w-6xl mx-auto w-full",children:B.map(T=>s.jsxs("div",{className:"group relative bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md hover:border-indigo-300 transition-all duration-200 transform hover:-translate-y-0.5 cursor-pointer",onClick:()=>v(T),children:[s.jsxs("div",{className:"p-4 h-full flex flex-col",children:[s.jsx("button",{onClick:H=>{H.stopPropagation(),se(H,T.id)},className:"absolute top-3 right-3 z-10 p-1.5 bg-white bg-opacity-70 rounded-full hover:bg-opacity-100 transition-all",title:m.includes(T.id)?t("pages.promptsList.unfavorite"):t("pages.promptsList.favorite"),"aria-label":m.includes(T.id)?t("pages.promptsList.unfavorite"):t("pages.promptsList.favorite"),children:s.jsx(R,{name:"star",className:m.includes(T.id)?"text-yellow-500":"text-gray-400",solid:m.includes(T.id)})}),s.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center group-hover:bg-indigo-200 transition-colors",children:s.jsx(R,{name:T.icon||"clipboard",className:"w-4 h-4 text-indigo-600"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("h3",{className:"font-semibold text-gray-900 text-sm leading-5 mb-1 flex items-center flex-wrap",children:[T.name,m.includes(T.id)&&s.jsx("span",{className:"ml-1","aria-label":t("pages.promptsList.favorite"),title:t("pages.promptsList.favorite"),children:s.jsx(R,{name:"star",size:"sm",className:"text-yellow-500",solid:!0})}),h.includes(T.id)&&s.jsx("span",{className:"ml-1","aria-label":t("pages.promptsList.recent"),title:t("pages.promptsList.recent"),children:s.jsx(R,{name:"clock",size:"sm",className:"text-indigo-600",solid:!0})}),T.appId&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs text-indigo-600 bg-indigo-50 rounded-full",children:t("common.promptSearch.appSpecific","app")})]})})]}),s.jsx("p",{className:"text-xs text-gray-500 leading-4 flex-grow overflow-hidden mb-4",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:Or(T.description||T.prompt)}),s.jsxs("div",{className:"flex gap-2 mt-auto justify-start",children:[s.jsxs("button",{onClick:async H=>{H.stopPropagation();try{await navigator.clipboard.writeText(T.prompt.replace("[content]","")),I(J=>({...J,[T.id]:"success"})),Lr(T.id)}catch(J){console.error("Failed to copy prompt:",J),I(ne=>({...ne,[T.id]:"error"}))}setTimeout(()=>{I(J=>({...J,[T.id]:"idle"}))},2e3)},className:"px-3 py-1.5 text-xs bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-1",children:[k[T.id]==="success"?s.jsx(R,{name:"check-circle",size:"sm",className:"text-green-200",solid:!0}):k[T.id]==="error"?s.jsx(R,{name:"exclamation-circle",size:"sm",className:"text-red-200",solid:!0}):s.jsx(R,{name:"copy",size:"sm"}),s.jsx("span",{children:t("pages.promptsList.copyPrompt","Copy")})]}),T.appId&&s.jsx(_e,{to:`/apps/${T.appId}?prefill=${encodeURIComponent(T.prompt.replace("[content]",""))}${T.variables&&T.variables.length>0?"&"+T.variables.map(H=>`var_${H.name}=${encodeURIComponent(H.defaultValue||"")}`).join("&"):""}`,className:"px-3 py-1.5 text-xs border border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center gap-1",onClick:H=>{H.stopPropagation(),Lr(T.id)},children:t("pages.promptsList.useInApp","Open")})]})]}),s.jsx("div",{className:"absolute inset-0 rounded-xl border border-transparent group-hover:border-indigo-200 transition-colors pointer-events-none"})]},T.id))}),A>1&&s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[s.jsx("button",{onClick:z,disabled:b===0,className:"px-3 py-1 border rounded text-indigo-600 disabled:opacity-50",children:t("pages.promptsList.previous","Previous")}),s.jsx("span",{className:"text-sm text-gray-600",children:t("pages.promptsList.pageOfTotal",{defaultValue:"Page {{current}} of {{total}}",current:b+1,total:A})}),s.jsx("button",{onClick:Z,disabled:b>=A-1,className:"px-3 py-1 border rounded text-indigo-600 disabled:opacity-50",children:t("pages.promptsList.next","Next")})]})]}),f&&s.jsx(Rd,{prompt:f,onClose:()=>v(null),isFavorite:m.includes(f.id),onToggleFavorite:T=>{const H=C(T);w(H?J=>[...J,T]:J=>J.filter(ne=>ne!==T))},t})]})},nr=(t,e="chat")=>{const r=`ai_hub_${e}_id_${t}`;try{let n=sessionStorage.getItem(r);return n||(n=`${e}-${Tt()}`,sessionStorage.setItem(r,n)),n}catch(n){return console.error("Error accessing sessionStorage for chat id:",n),`${e}-${Tt()}`}},ar=(t,e="chat")=>{const r=`ai_hub_${e}_id_${t}`;try{const n=`${e}-${Tt()}`;return sessionStorage.setItem(r,n),n}catch(n){return console.error("Error resetting chat id in sessionStorage:",n),`${e}-${Tt()}`}};function wn(t=6){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}const Id=()=>{try{return localStorage.getItem("ihub_username")||"anonymous"}catch{return"anonymous"}},ia=({appId:t,path:e,params:r,onClose:n})=>{const{t:a}=Q(),[i,c]=o.useState(wn()),[d,l]=o.useState(!0),[u,b]=o.useState(""),[g,m]=o.useState(!1),[w,h]=o.useState(!0),[p,f]=o.useState(i.length>=5),[v,x]=o.useState(""),[j,y]=o.useState(!1),[C,k]=o.useState(!1),I=async N=>{if(N.length<5){f(!1),h(!1);return}f(!0),m(!0);try{await fo(N),h(!1)}catch(M){M.status===404?h(!0):h(!1)}finally{m(!1)}};o.useEffect(()=>{i.length>=5?I(i):(f(!1),h(!1))},[i]);const E=async()=>{y(!0);try{const N=await go({appId:t,path:e,params:r,userId:Id(),includeParams:d,code:i,expiresAt:u?new Date(u).toISOString():null});x(`${window.location.origin}/s/${N.code}`)}catch(N){console.error("Failed to create short link",N)}finally{y(!1)}},O=async()=>{try{await navigator.clipboard.writeText(v),k(!0),setTimeout(()=>k(!1),2e3)}catch(N){console.error("Failed to copy link",N)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:a("common.share")}),s.jsx("button",{onClick:n,"aria-label":a("common.cancel"),children:s.jsx(R,{name:"x"})})]}),v?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"break-all",children:v}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:O,className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-1",children:[s.jsx(R,{name:"copy"})," ",a("pages.promptsList.copyPrompt","Copy")]}),C&&s.jsx("span",{className:"text-green-600 text-sm",children:a("pages.promptsList.linkCopied","Link copied!")})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm font-medium",children:a("common.shortCode")}),s.jsxs("div",{className:"flex mt-1",children:[s.jsx("input",{type:"text",value:i,onChange:N=>c(N.target.value),className:"w-full border rounded-l px-2 py-1"}),s.jsx("button",{type:"button",onClick:()=>c(wn()),className:"border border-l-0 rounded-r px-2",title:a("pages.appChat.regenerate","Regenerate"),children:s.jsx(R,{name:"redo",size:"sm"})})]})]}),s.jsx("div",{className:"text-sm",children:p?g?a("common.loading"):w?s.jsx("span",{className:"text-green-600",children:a("common.codeAvailable")}):s.jsx("span",{className:"text-red-600",children:a("common.codeTaken")}):s.jsx("span",{className:"text-red-600",children:a("common.codeTooShort","Code too short")})}),s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:N=>l(N.target.checked)}),a("common.includeSettings")]}),s.jsxs("label",{className:"block",children:[s.jsx("span",{className:"text-sm",children:a("common.expiresAt","Expires At")}),s.jsx("input",{type:"datetime-local",value:u,onChange:N=>b(N.target.value),className:"mt-1 w-full border rounded px-2 py-1"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:n,className:"px-3 py-1 border rounded",children:a("common.cancel")}),s.jsx("button",{onClick:E,disabled:!p||!w||j,className:"px-3 py-1 bg-indigo-600 text-white rounded disabled:opacity-50",children:a("common.save")})]})]})]})})};function Td(t="default"){const e=`ai_hub_chat_messages_${t}`,r=o.useRef(t),n=()=>{try{const f=sessionStorage.getItem(e);return f?JSON.parse(f):[]}catch(f){return console.error("Error loading messages from sessionStorage:",f),[]}},[a,i]=o.useState(n);o.useEffect(()=>{if(r.current!==t&&r.current!==null){console.log("[useChatMessages] ChatId changed from",r.current,"to",t,"- loading messages for new chat");const f=`ai_hub_chat_messages_${t}`;try{const v=sessionStorage.getItem(f),x=v?JSON.parse(v):[];i(x)}catch(v){console.error("Error loading messages from sessionStorage for new chatId:",v),i([])}}r.current=t},[t]);const c=o.useRef(a);o.useEffect(()=>{c.current=a},[a]),o.useEffect(()=>{try{const f=a.filter(v=>!v.isGreeting);f.length>0?sessionStorage.setItem(e,JSON.stringify(f)):sessionStorage.removeItem(e)}catch(f){console.error("Error saving messages to sessionStorage:",f)}},[a,e]);const d=o.useCallback((f,v={})=>{const{rawContent:x,imageData:j,fileData:y,...C}=v,k=`user-${Date.now()}-${Math.floor(Math.random()*1e3)}`,I={id:k,role:"user",content:f,imageData:j,fileData:y,...C};return x!==void 0&&(I.rawContent=x),i(E=>[...E,I]),k},[]),l=o.useCallback((f=null)=>{const v=f||`msg-${Date.now()}-${Math.floor(Math.random()*1e3)}`;return i(x=>[...x,{id:v,role:"assistant",content:"",loading:!0}]),v},[]),u=o.useCallback((f,v,x=!0,j={})=>{x===!1&&console.log("✅ Setting message to completed state:",{id:f,contentLength:(v==null?void 0:v.length)||0}),i(y=>y.map(k=>k.id===f?{...k,content:v,loading:x,...j,_timestamp:Date.now(),_contentLength:v.length}:k))},[]),b=o.useCallback((f,v,x=!0)=>{i(j=>j.map(y=>y.id===f?{...y,content:x&&y.content&&!y.content.includes(v)?`${y.content}

${v}`:v,loading:!1,error:!0}:y))},[]),g=o.useCallback(f=>{const v=c.current.findIndex(x=>x.id===f);if(v!==-1){const x=c.current.slice(0,v);i(x)}},[]),m=o.useCallback((f,v)=>{i(x=>x.map(j=>j.id===f?{...j,content:v,rawContent:v}:j))},[]),w=o.useCallback((f,v=!1)=>{const x=`system-${Date.now()}`;return i(j=>[...j,{id:x,role:"system",content:f,error:v,isErrorMessage:v}]),x},[]),h=o.useCallback(()=>{i([])},[]),p=o.useCallback((f=!0,v=null)=>{let x=f?c.current.filter(j=>!j.isGreeting):[];return v&&(x=[...x,v]),x.map(j=>{const{rawContent:y,...C}=j,k=y!==void 0?y:C.content;return{...C,content:k}})},[]);return{messages:a,messagesRef:c,addUserMessage:d,addAssistantMessage:l,updateAssistantMessage:u,setMessageError:b,deleteMessage:g,editMessage:m,addSystemMessage:w,clearMessages:h,getMessagesForApi:p}}function $d({appId:t,chatId:e,timeoutDuration:r=3e4,onEvent:n,onProcessingChange:a}){const i=o.useRef(null),c=o.useRef(null),d=o.useRef(null),l=o.useRef(""),u=o.useCallback(async()=>{if(i.current){const m=i.current;i.current=null;try{d.current&&(clearInterval(d.current),d.current=null)}catch(w){console.error("Error clearing heartbeat interval:",w)}try{c.current&&(clearTimeout(c.current),c.current=null)}catch(w){console.error("Error clearing connection timeout:",w)}try{t&&e&&await Ha(t,e)}catch(w){console.warn("Failed to stop chat stream:",w)}try{m&&(m.__handlers&&m.__handlers.events&&m.__handlers.events.forEach(w=>m.removeEventListener(w,m.__handlers.handleEvent)),m.onmessage=null,m.onerror=null,m.close())}catch(w){console.error("Error cleaning up event source:",w)}}},[t,e]),b=o.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(async()=>{if(!(!i.current||!t||!e))try{const m=await Wa(t,e);(!m||!m.active)&&(u(),a&&a(!1))}catch(m){console.warn("Error checking chat status:",m)}},3e4)},[t,e,u,a]),g=o.useCallback(m=>{u(),l.current="",a&&a(!0);const w=new EventSource(m);i.current=w;let h=!1;c.current=setTimeout(()=>{h||(console.error("SSE connection timeout"),w.close(),n&&n({type:"error",data:{message:"Connection timeout. Please try again."},fullContent:l.current}),a&&a(!1))},r);const p=v=>{let x=null;if(v.data)try{x=JSON.parse(v.data)}catch{x=v.data}v.type==="chunk"&&x&&x.content&&(l.current+=x.content),v.type==="connected"?(h=!0,clearTimeout(c.current)):v.type==="done"&&(h=!0),n&&n({type:v.type,data:x,fullContent:l.current}),(v.type==="done"||v.type==="error")&&(w.close(),i.current=null,a&&a(!1))},f=["connected","chunk","done","error","processing","image","thinking","research-start","research-query-analysis","research-round","research-results","research-fetch","research-fetched","research-refine","research-refined","research-complete","research-error"];return f.forEach(v=>w.addEventListener(v,p)),w.onmessage=p,w.onerror=p,w.__handlers={handleEvent:p,events:f},b(),w},[u,a,n,b,r]);return o.useEffect(()=>()=>{u(),d.current&&clearInterval(d.current),c.current&&clearTimeout(c.current)},[u]),{initEventSource:g,cleanupEventSource:u,eventSourceRef:i,isConnected:!!i.current}}function la({appId:t,chatId:e,onMessageComplete:r}){const{t:n}=Q(),a=e||`chat-${Tt()}`,[i,c]=o.useState(!1),d=o.useRef(null),l=o.useRef(null),u=o.useRef(null),b=o.useRef(!1),g=o.useRef(null),{messages:m,messagesRef:w,addUserMessage:h,addAssistantMessage:p,updateAssistantMessage:f,setMessageError:v,deleteMessage:x,editMessage:j,addSystemMessage:y,clearMessages:C,getMessagesForApi:k}=Td(a),I=o.useRef(),E=o.useCallback(async L=>{var B;const{type:S,fullContent:P,data:A}=L;switch(S){case"connected":if(l.current)try{const{appId:D,chatId:z,messages:Z,params:se}=l.current;await Va(D,z,Z,se),l.current=null}catch(D){if(d.current&&!b.current){let z;D.isAuthRequired||D.status===401?(z=n("error.sessionExpired","Your session has expired. Please log in again to continue."),console.log("🔐 Session expired during chat message send")):z=D.userFriendlyMessage||D.message||n("error.failedToGenerateResponse","Failed to generate response. Please try again or select a different model.");const Z=w.current.find(se=>se.id===d.current);f(d.current,((Z==null?void 0:Z.content)||"")+`

`+z,!1)}(B=I.current)==null||B.call(I),c(!1)}break;case"chunk":d.current&&f(d.current,P,!0);break;case"image":if(d.current){const D=w.current.find(Z=>Z.id===d.current),z=(D==null?void 0:D.images)||[];f(d.current,P,!0,{images:[...z,{mimeType:A==null?void 0:A.mimeType,data:A==null?void 0:A.data,thoughtSignature:A==null?void 0:A.thoughtSignature}]})}break;case"thinking":if(d.current){const D=w.current.find(Z=>Z.id===d.current),z=(D==null?void 0:D.thoughts)||[];f(d.current,P,!0,{thoughts:[...z,A==null?void 0:A.content]})}break;case"done":if(d.current){const D={finishReason:A==null?void 0:A.finishReason,...g.current||{}};f(d.current,P,!1,D),r&&r(P,u.current)}c(!1);break;case"error":if(d.current&&!b.current){const D=w.current.find(Z=>Z.id===d.current),z=(A==null?void 0:A.message)||n("error.streamingError","An error occurred during streaming");f(d.current,((D==null?void 0:D.content)||"")+`

`+z,!1)}c(!1);break;default:console.log("🔍 Unknown event type:",S,A)}},[l,v,f,r,n,w]),{initEventSource:O,cleanupEventSource:N}=$d({appId:t,chatId:a,onEvent:E,onProcessingChange:c});I.current=N;const M=o.useCallback(({displayMessage:L,apiMessage:S,params:P,sendChatHistory:A=!0,messageMetadata:B=null})=>{try{b.current=!1,N(),c(!0);const D=`msg-${Date.now()}-${Math.floor(Math.random()*1e3)}`;d.current=D,u.current=S.content,g.current=B;const z=typeof L=="string"?L:(L==null?void 0:L.content)||"";h(z,{...(L==null?void 0:L.meta)||{},imageData:S.imageData,fileData:S.fileData}),p(D);const Z=k(A,{role:"user",content:S.content,promptTemplate:S.promptTemplate||null,variables:S.variables||{},messageId:D,imageData:S.imageData,fileData:S.fileData});l.current={appId:t,chatId:a,messages:Z,params:P},O(Ir(`apps/${t}/chat/${a}`))}catch(D){console.error("Error sending message:",D),y(`Error: ${n("error.sendMessageFailed","Failed to send message.")} ${D.message||n("error.tryAgain","Please try again.")}`,!0),c(!1)}},[N,h,p,k,O,y,n,t,a]),_=o.useCallback((L,S)=>{var Z,se;const P=m.find(ce=>ce.id===L);if(!P)return{content:"",variables:null,imageData:null,fileData:null};let A=S,B=null,D=null,z=null;if(P.role==="assistant"){const ce=m.findIndex(H=>H.id===L),T=[...m.slice(0,ce)].reverse().find(H=>H.role==="user");if(!T)return{content:"",variables:null,imageData:null,fileData:null};D=T.imageData||null,z=T.fileData||null,A=D||z?T.rawContent||"":T.rawContent||T.content,B=((Z=T.meta)==null?void 0:Z.variables)||null,x(T.id)}else x(L),A===void 0&&(D=P.imageData||null,z=P.fileData||null,A=D||z?P.rawContent||"":P.rawContent||P.content),B=((se=P.meta)==null?void 0:se.variables)||null,D||(D=P.imageData||null),z||(z=P.fileData||null);return{content:A||"",variables:B,imageData:D,fileData:z}},[m,x]),$=o.useCallback(()=>{if(b.current=!0,N(),d.current){const L=w.current.find(S=>S.id===d.current);f(d.current,((L==null?void 0:L.content)||"")+n("message.generationCancelled"," [Generation cancelled]"),!1)}c(!1),setTimeout(()=>{b.current=!1},100)},[N,f,n,w]);return{chatId:a,messages:m,processing:i,sendMessage:M,resendMessage:_,deleteMessage:x,editMessage:j,clearMessages:C,cancelGeneration:$,addSystemMessage:y}}function ca({messages:t=[],clearChat:e=()=>{},sendMessage:r=()=>{},isProcessing:n=!1,currentText:a="",onConfirmClear:i,customCommands:c={},setInput:d=()=>{}}){const l=o.useRef(""),u=o.useCallback(g=>(l.current=g,d(g),g),[d]),b=o.useCallback(g=>{if(console.log("Voice command detected:",g),c[g])return c[g]();switch(g){case"clearChat":t.length>0&&(i?i():window.confirm("Are you sure you want to clear the entire chat history?"))&&e();break;case"sendMessage":const m=l.current||a;console.log("Executing send message command with text:",m),m.trim()&&!n?r(m):console.log("No text to send or processing in progress");break;default:console.log("Unknown command:",g)}},[t,e,r,n,a,i,c]);return{handleVoiceInput:u,handleVoiceCommand:b,currentVoiceTextRef:l}}const Qt=(t,e)=>{try{const r=`ai_hub_app_settings_${t}`;sessionStorage.setItem(r,JSON.stringify(e))}catch(r){console.error("Error saving app settings to sessionStorage:",r)}},da=t=>{try{const e=`ai_hub_app_settings_${t}`,r=sessionStorage.getItem(e);return r?JSON.parse(r):null}catch(e){return console.error("Error loading app settings from sessionStorage:",e),null}},ua=(t,e)=>{const{setHeaderColor:r}=Ue(),[n,a]=o.useState(null),[i,c]=o.useState("normal"),[d,l]=o.useState("markdown"),[u,b]=o.useState(.7),[g,m]=o.useState(!0),[w,h]=o.useState(null),[p,f]=o.useState(null),[v,x]=o.useState(null),[j,y]=o.useState([]),[C,k]=o.useState([]),[I,E]=o.useState(!0),[O,N]=o.useState(!0);o.useEffect(()=>{(async()=>{try{E(!0),N(!0);const[L,S]=await Promise.all([lo(),uo()]);y(L||[]),k(S||[])}catch(L){console.error("Failed to load models and styles:",L)}finally{E(!1),N(!1)}})()},[]),o.useEffect(()=>{var A,B,D,z;if(!e||I)return;e.color&&r(e.color);const $=j.find(Z=>Z.default);let L=e.preferredModel;j.some(Z=>Z.id===L)||(L=$?$.id:((A=j[0])==null?void 0:A.id)||null);const S={selectedModel:L,selectedStyle:e.preferredStyle||"normal",temperature:e.preferredTemperature||.7,selectedOutputFormat:e.preferredOutputFormat||"markdown",sendChatHistory:!0,thinkingEnabled:((B=e.thinking)==null?void 0:B.enabled)??null,thinkingBudget:((D=e.thinking)==null?void 0:D.budget)??null,thinkingThoughts:((z=e.thinking)==null?void 0:z.thoughts)??null};a(S.selectedModel),c(S.selectedStyle),b(S.temperature),l(S.selectedOutputFormat),m(S.sendChatHistory),h(S.thinkingEnabled),f(S.thinkingBudget),x(S.thinkingThoughts);const P=da(t);P&&(P.selectedModel&&j.some(Z=>Z.id===P.selectedModel)&&a(P.selectedModel),P.selectedStyle&&c(P.selectedStyle),P.selectedOutputFormat&&l(P.selectedOutputFormat),P.temperature&&b(P.temperature),P.sendChatHistory!==void 0&&m(P.sendChatHistory),P.thinkingEnabled!==void 0&&h(P.thinkingEnabled),P.thinkingBudget!==void 0&&f(P.thinkingBudget),P.thinkingThoughts!==void 0&&x(P.thinkingThoughts))},[e,t,r,j,I]),o.useEffect(()=>{e&&Qt(t,{selectedModel:n,selectedStyle:i,selectedOutputFormat:d,temperature:u,sendChatHistory:g,thinkingEnabled:w,thinkingBudget:p,thinkingThoughts:v})},[t,e,n,i,d,u,g,w,p,v]);const M={selectedModel:n,selectedStyle:i,selectedOutputFormat:d,temperature:u,sendChatHistory:g,thinkingEnabled:w,thinkingBudget:p,thinkingThoughts:v},_={setSelectedModel:a,setSelectedStyle:c,setSelectedOutputFormat:l,setTemperature:b,setSendChatHistory:m,setThinkingEnabled:h,setThinkingBudget:f,setThinkingThoughts:x};return{...M,..._,models:j,styles:C,modelsLoading:I,stylesLoading:O,settings:M,setters:_}},Fd=()=>{const[t,e]=o.useState(null),[r,n]=o.useState(!1);return{selectedFile:t,showUploader:r,handleFileSelect:u=>{console.log("useFileUploadHandler: handleFileSelect called with",u),e(u)},toggleUploader:()=>{n(u=>!u)},createUploadConfig:(u,b)=>{const g=(u==null?void 0:u.upload)||{},m=(g==null?void 0:g.imageUpload)||{},w=(g==null?void 0:g.fileUpload)||{};if(!((g==null?void 0:g.enabled)!==!1&&((m==null?void 0:m.enabled)===!0||(w==null?void 0:w.enabled)===!0)))return{enabled:!1};const p=b&&(b.includes("vision")||b.includes("gpt-4")||b.includes("claude-3")||b.includes("gemini")||b.includes("4o")),f=(m==null?void 0:m.enabled)!==!1&&p,v=(w==null?void 0:w.enabled)!==!1;return{enabled:!0,imageUploadEnabled:f,fileUploadEnabled:v,allowMultiple:(g==null?void 0:g.allowMultiple)||!1,maxFileSizeMB:Math.max((m==null?void 0:m.maxFileSizeMB)||0,(w==null?void 0:w.maxFileSizeMB)||0)||10,imageUpload:{enabled:f,resizeImages:(m==null?void 0:m.resizeImages)!==!1,maxResizeDimension:(m==null?void 0:m.maxResizeDimension)||1024,supportedFormats:(m==null?void 0:m.supportedFormats)||["image/jpeg","image/jpg","image/png","image/gif","image/webp"],maxFileSizeMB:(m==null?void 0:m.maxFileSizeMB)||10},fileUpload:{enabled:v,maxFileSizeMB:(w==null?void 0:w.maxFileSizeMB)||5,supportedFormats:(w==null?void 0:w.supportedFormats)||["text/plain","text/markdown","text/csv","application/json","text/html","text/css","text/javascript","application/javascript","application/pdf"]},resizeImages:(m==null?void 0:m.resizeImages)!==!1,maxResizeDimension:(m==null?void 0:m.maxResizeDimension)||1024,supportedImageFormats:f?(m==null?void 0:m.supportedFormats)||["image/jpeg","image/jpg","image/png","image/gif","image/webp"]:[],supportedFormats:v?(w==null?void 0:w.supportedFormats)||["text/plain","text/markdown","text/csv","application/json","text/html","text/css","text/javascript","application/javascript","application/pdf"]:[]}},clearSelectedFile:()=>{e(null)},hideUploader:()=>{n(!1)},setSelectedFile:e,setShowUploader:n}},Pd=()=>{const[t,e]=o.useState(null),[r,n]=o.useState(!1);return{originalInput:t,magicLoading:r,handleMagicPrompt:async(d,l,u)=>{var b,g,m,w;if(d.trim())try{n(!0);const h=await co(d,{prompt:(g=(b=l==null?void 0:l.features)==null?void 0:b.magicPrompt)==null?void 0:g.prompt,modelId:(w=(m=l==null?void 0:l.features)==null?void 0:m.magicPrompt)==null?void 0:w.model,appId:u});return h&&h.prompt?(e(d),h.prompt):null}catch(h){return console.error("Error generating magic prompt:",h),null}finally{n(!1)}},handleUndoMagicPrompt:()=>{if(t!==null){const d=t;return e(null),d}return null},resetMagicPrompt:()=>{e(null),n(!1)},showUndoMagicPrompt:t!==null}},Od=()=>{const{t}=Q(),[e,r]=o.useState(new Map),n={jira:{name:"JIRA",icon:"ticket",authUrl:"/api/integrations/jira/auth",statusUrl:"/api/integrations/jira/status",disconnectUrl:"/api/integrations/jira/disconnect",refreshUrl:"/api/integrations/jira/refresh",authErrorPatterns:["JIRA_AUTH_REQUIRED","JIRA authentication","connect your JIRA account"],toolPrefix:"jira_",description:{en:"Link your JIRA account to search, view, and manage tickets directly from the chat.",de:"Verknüpfen Sie Ihr JIRA-Konto, um Tickets direkt im Chat zu suchen, anzuzeigen und zu verwalten."},features:{en:["Search tickets using natural language or JQL","View detailed ticket information and comments","Add comments and update ticket status","Access only tickets you have permission to see"],de:["Tickets mit natürlicher Sprache oder JQL durchsuchen","Detaillierte Ticket-Informationen und Kommentare anzeigen","Kommentare hinzufügen und Ticket-Status aktualisieren","Nur auf Tickets zugreifen, für die Sie Berechtigungen haben"]}}},a=o.useCallback((h,p)=>{const f=n[p];return!f||!h||typeof h!="object"?!1:h.toolCalls&&h.toolCalls.some(x=>{if(x.name&&x.name.startsWith(f.toolPrefix))try{const j=typeof x.result=="string"?JSON.parse(x.result):x.result;return j&&f.authErrorPatterns.some(y=>j.error===y||j.message&&j.message.includes(y))}catch{return x.result&&f.authErrorPatterns.some(y=>x.result.includes(y))}return!1})?(r(x=>new Map(x.set(p,{required:!0,connecting:!1,error:null,lastFailedRequest:{timestamp:Date.now(),toolCalls:h.toolCalls.filter(j=>j.name&&j.name.startsWith(f.toolPrefix))}}))),!0):h.content&&typeof h.content=="string"&&f.authErrorPatterns.some(x=>h.content.toLowerCase().includes(x.toLowerCase()))?(r(x=>new Map(x.set(p,{required:!0,connecting:!1,error:null,lastFailedRequest:{timestamp:Date.now()}}))),!0):!1},[]),i=o.useCallback((h,p=[])=>{if(!h||!Array.isArray(h))return;const f=h.filter(v=>v.role==="assistant").pop();f&&p.forEach(v=>{a(f,v)})},[a]),c=o.useCallback(async h=>{const p=n[h];if(!p){console.error(`Unknown integration: ${h}`);return}try{r(j=>new Map(j.set(h,{...j.get(h)||{},connecting:!0,error:null})));const f=window.location.pathname,v=window.location.search;sessionStorage.setItem(`${h}_post_auth_redirect`,`${f}${v}`);const x=e.get(h);x!=null&&x.lastFailedRequest&&sessionStorage.setItem(`${h}_retry_request`,JSON.stringify(x.lastFailedRequest)),window.location.href=p.authUrl}catch(f){console.error(`Error initiating ${h} connection:`,f),r(v=>new Map(v.set(h,{...v.get(h)||{},connecting:!1,error:t(`integrations.${h}.connectionError`,"Failed to initiate connection. Please try again.")})))}},[e,t]),d=o.useCallback(async h=>{const p=n[h];if(!p)return!1;try{const v=await(await fetch(p.statusUrl)).json();if(v.connected){const x=v.tokenInfo||null;return x&&x.isExpiring&&!x.isExpired?r(j=>new Map(j.set(h,{required:!1,connecting:!1,error:null,lastFailedRequest:null,tokenInfo:x,warning:`Tokens expire in ${x.minutesUntilExpiry} minutes`}))):r(j=>{const y=new Map(j);return y.delete(h),y}),!0}return!1}catch(f){return console.error(`Error checking ${h} connection status:`,f),!1}},[]),l=o.useCallback(async h=>{const p=n[h];if(!p||!p.refreshUrl)return!1;try{const f=await fetch(p.refreshUrl,{method:"POST"});if(f.ok)return await d(h),!0;{const v=await f.json();throw new Error(v.message||"Refresh failed")}}catch(f){return console.error(`Error refreshing ${h}:`,f),f.message.includes("authentication required")?r(v=>new Map(v.set(h,{required:!0,connecting:!1,error:"Authentication expired. Please reconnect.",lastFailedRequest:null,tokenInfo:null}))):r(v=>new Map(v.set(h,{...v.get(h)||{},error:t(`integrations.${h}.refreshError`,"Failed to refresh tokens. Please try again.")}))),!1}},[t,d]),u=o.useCallback(async h=>{const p=n[h];if(!p)return!1;try{if((await fetch(p.disconnectUrl,{method:"POST"})).ok)return r(v=>{const x=new Map(v);return x.delete(h),x}),!0;throw new Error("Disconnect failed")}catch(f){return console.error(`Error disconnecting ${h}:`,f),r(v=>new Map(v.set(h,{...v.get(h)||{},error:t(`integrations.${h}.disconnectError`,"Failed to disconnect. Please try again.")}))),!1}},[t]),b=o.useCallback(()=>{const h=new URLSearchParams(window.location.search);Object.keys(n).forEach(p=>{const f=h.get(`${p}_auth`)==="success",v=h.get(`${p}_error`);if(f){r(y=>{const C=new Map(y);return C.delete(p),C});const x=sessionStorage.getItem(`${p}_retry_request`);if(x)try{const y=JSON.parse(x);console.log(`${p} connection successful, could retry:`,y),sessionStorage.removeItem(`${p}_retry_request`)}catch(y){console.error(`Error parsing ${p} retry request:`,y)}const j=window.location.pathname;window.history.replaceState({},document.title,j)}else v&&r(x=>new Map(x.set(p,{...x.get(p)||{},connecting:!1,error:t(`integrations.${p}.authError`,`Authentication failed: ${v}`)})))})},[t]),g=o.useCallback(h=>{r(p=>{const f=new Map(p);return f.delete(h),f})},[]),m=o.useCallback(h=>e.get(h)||{required:!1,connecting:!1,error:null,lastFailedRequest:null},[e]),w=o.useCallback(()=>{const h=[];return e.forEach((p,f)=>{p.required&&h.push({id:f,config:n[f],state:p})}),h},[e]);return o.useEffect(()=>{b()},[b]),{authRequests:e,integrationConfigs:n,monitorChatMessages:i,connectIntegration:c,checkConnectionStatus:d,refreshIntegration:l,disconnectIntegration:u,resetAuthState:g,getAuthState:m,getRequiredIntegrations:w}},Dd=3,ma=t=>{const{isActive:e,setIsActive:r,transcript:n="",mode:a="automatic"}=t,{t:i}=Q(),c=()=>{r(!1)};return s.jsx("div",{id:"voice-feedback",className:`voice-feedback ${e?"active":""}`,children:s.jsxs("div",{className:"voice-feedback-content",children:[s.jsx("div",{className:"voice-waves",children:Array.from(Array(Dd).keys()).map((d,l)=>s.jsx("div",{className:"wave"},`wave-${l}`))}),s.jsx("h3",{className:"voice-text",children:i("voiceInput.listening","Listening...")}),s.jsx("span",{className:"voice-mode",children:a==="manual"?i("voiceInput.modeManual","Manual mode - click close when finished"):i("voiceInput.modeAutomatic","Automatic mode - stops when you stop speaking")}),s.jsx("span",{className:"voice-instructions",children:i("voiceInput.instructions","Speak clearly and naturally")}),n&&s.jsx("div",{className:"voice-transcript",children:n}),s.jsx("button",{className:"voice-close",onClick:c,type:"button",children:"×"})]})})};var $e=Aa();const _d="",Ud=void 0;var Oe,ha,ga,Mt,fa;class vn{constructor(){js(this,Oe);Ut(this,"recognition");Ut(this,"lang","de-DE");Ut(this,"host","")}start(){Ke(this,Oe,ga).call(this),this.recognition.recognizeOnceAsync(e=>{switch(e.reason){case $e.ResultReason.RecognizedSpeech:Ke(this,Oe,ha).call(this,e),Ke(this,Oe,fa).call(this);break;case $e.ResultReason.NoMatch:Ke(this,Oe,Mt).call(this,{error:"no-speech"});break;case $e.ResultReason.Canceled:const r=$e.CancellationDetails.fromResult(e);if(r.reason==$e.CancellationReason.Error)switch(r.ErrorCode){case $e.CancellationErrorCode.Forbidden:case $e.CancellationErrorCode.ServiceError:case $e.CancellationErrorCode.TooManyRequests:case $e.CancellationErrorCode.AuthenticationFailure:Ke(this,Oe,Mt).call(this,{error:"not-allowed"});break;case $e.CancellationErrorCode.ServiceTimeout:case $e.CancellationErrorCode.ConnectionFailure:Ke(this,Oe,Mt).call(this,{error:"network"});break;default:Ke(this,Oe,Mt).call(this,{error:""})}break}this.recognition.close()})}initRecognizer(){try{const e=new URL(`${this.host}/speech/recognition/interactive/cognitiveservices/v1${_d}`),r=$e.SpeechConfig.fromHost(e,Ud),n=$e.AudioConfig.fromDefaultMicrophoneInput();r.speechRecognitionLanguage=this.lang??"de-DE";const a=new $e.SpeechRecognizer(r,n);this.recognition=a}catch(e){if(!host){console.error("Failed to construct URL since 'host' is not defined");return}console.error(e)}}get host(){return this.host}set host(e){this.host=e}get lang(){return this.lang}set lang(e){this.lang=e}}Oe=new WeakSet,ha=function(e){if(console.log("Triggered onresult..."),"onresult"in this){this.onresult(e);return}console.log("'onresult' is not defined")},ga=function(){if(console.log("Triggered onstart..."),"onstart"in this){this.onstart();return}console.log("'onstart' is not defined")},Mt=function(e){if(console.log("Triggered onerror..."),"onerror"in this){this.onerror(e);return}console.log("'onerror' is not defined")},fa=function(){if(console.log("Triggered onend..."),"onend"in this){this.onend();return}console.log("'onend' is not defined")};const pa=({app:t,inputRef:e,onSpeechResult:r,onCommand:n,disabled:a=!1})=>{var I,E,O;const{t:i,i18n:c}=Q(),[d,l]=o.useState(!1),[u,b]=o.useState(""),[g,m]=o.useState(""),w=o.useRef(null),h=o.useRef(""),p=o.useRef(""),f=((E=(I=t==null?void 0:t.inputMode)==null?void 0:I.microphone)==null?void 0:E.mode)||((O=t==null?void 0:t.microphone)==null?void 0:O.mode)||"automatic",v=o.useCallback(()=>{if(w.current){try{w.current.stop()}catch(N){console.error("Error stopping recognition:",N)}w.current=null}l(!1),m(""),e!=null&&e.current&&(e.current.placeholder=p.current)},[e]);o.useEffect(()=>()=>{v()},[v]),o.useEffect(()=>{u&&(e!=null&&e.current)&&(e.current.placeholder=u)},[u,e]);const x=()=>({clearChat:[i("voiceCommands.clearChat","clear chat"),"clear the chat","delete chat","delete all messages","start new chat","reset chat",i("voiceCommands.clearChat_de","chat löschen"),"alles löschen","nachrichten löschen","neuer chat","chat zurücksetzen"],sendMessage:[i("voiceCommands.sendMessage","send message"),"send","sent","sent message","submit message","submit",i("voiceCommands.sendMessage_de","nachricht senden"),"senden","abschicken","nachricht abschicken"]}),j=N=>{if(!N)return{text:N,command:null};let M=N.trim().replace(".","").toLowerCase(),_=N.trim(),$=null;const L=x();for(const[S,P]of Object.entries(L))for(const A of P)if(M.endsWith(A)){const B=M.lastIndexOf(A);return _=_.substring(0,B).trim(),$=S,{text:_,command:$}}return{text:_,command:null}},y=N=>{b(N),e!=null&&e.current&&(e.current.placeholder=N,setTimeout(()=>{e!=null&&e.current&&(e.current.placeholder=p.current)},3e3))},C=async()=>{var N,M,_,$;if(!a)try{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){y(i("voiceInput.error.notSupported","Speech recognition not supported in this browser"));return}try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(D=>D.stop())}catch{y(i("voiceInput.error.permissionDenied","Please allow microphone access and try again."));return}e!=null&&e.current&&(h.current=e.current.value||"",p.current=e.current.placeholder||"");const L=window.SpeechRecognition||window.webkitSpeechRecognition;let S;switch((M=(N=t==null?void 0:t.settings)==null?void 0:N.speechRecognition)==null?void 0:M.service){case"azure":S=new vn,S.host=($=(_=t==null?void 0:t.settings)==null?void 0:_.speechRecognition)==null?void 0:$.host;break;case"default":default:S=new L}S.continuous=f==="manual",S.interimResults=!0;let P=c.language;P.length===2&&(P={en:"en-US",de:"de-DE",fr:"fr-FR",es:"es-ES",it:"it-IT",ja:"ja-JP",ko:"ko-KR",zh:"zh-CN",ru:"ru-RU",pt:"pt-BR",nl:"nl-NL",pl:"pl-PL",tr:"tr-TR",ar:"ar-SA"}[P.toLowerCase()]||"en-US"),S.lang=P;const A=S instanceof vn;A&&S.initRecognizer(),S.onstart=()=>{l(!0),m(""),e!=null&&e.current&&(e.current.placeholder=i("voiceInput.listening","Listening..."))},S.onresult=B=>{let D="",z="";if("text"in B?B.text:B.results,A)z=B.text;else for(let Z=B.resultIndex;Z<B.results.length;Z++){const se=B.results[Z][0].transcript;B.results[Z].isFinal?z+=se:D+=se}if(m(D||z),z){const{text:Z,command:se}=j(z);if(se&&n){if(Z){const T=Z;e!=null&&e.current&&(e.current.value=T,r&&r(T,!0))}n(se),v();return}const ce=h.current?`${h.current} ${z}`.trim():z.trim();e!=null&&e.current&&(e.current.value=ce,r&&r(ce),h.current=ce)}if(D){const Z=h.current?`${h.current} ${D}`.trim():D;e!=null&&e.current&&(e.current.value=Z)}},S.onerror=B=>{let D="";switch(B.error){case"no-speech":D=i("voiceInput.error.noSpeech","No speech detected. Please try again.");break;case"audio-capture":D=i("voiceInput.error.noMicrophone","No microphone found. Please check your device settings.");break;case"not-allowed":D=i("voiceInput.error.permissionDenied","Please allow microphone access and try again.");break;case"network":D=i("voiceInput.error.network","Network error. Please check your connection.");break;default:D=i("voiceInput.error.general","Voice input error. Please try again.")}y(D)},S.onend=()=>{l(!1),m(""),e!=null&&e.current&&(e.current.placeholder=p.current),w.current=null},w.current=S,S.start()}catch(L){console.error("Error starting speech recognition:",L),y(i("voiceInput.error.startError","Error starting voice input. Please try again.")),l(!1)}};return{isListening:d,transcript:g,toggleListening:()=>{d?v():C()},stopListening:v,microphoneMode:f}},zd=({isListening:t,toggleListening:e,disabled:r,microphoneMode:n})=>{const{t:a}=Q();return s.jsx("button",{className:`voice-input-button ${t?"active":""} h-fit`,onClick:i=>{i.preventDefault(),e()},type:"button",disabled:r,title:n==="manual"?a("voiceInput.tooltipManual","Voice input (Ctrl+M) - manual"):a("voiceInput.tooltipAutomatic","Voice input (Ctrl+M) - automatic"),"aria-label":a("voiceInput.ariaLabel","Toggle voice input"),children:s.jsx(R,{name:"microphone",size:"md"})})},Bd=({app:t,onSpeechResult:e,inputRef:r,disabled:n=!1,onCommand:a=null})=>{var g,m,w;const{isListening:i,transcript:c,toggleListening:d,stopListening:l,microphoneMode:u}=pa({app:t,inputRef:r,onSpeechResult:e,onCommand:a,disabled:n});o.useEffect(()=>{const h=p=>{(p.ctrlKey||p.metaKey)&&p.key==="m"&&(p.preventDefault(),d())};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[d]);const b=()=>{l()};return s.jsxs(s.Fragment,{children:[s.jsx(ma,{isActive:i,setIsActive:b,transcript:(m=(g=t==null?void 0:t.inputMode)==null?void 0:g.microphone)!=null&&m.showTranscript||(w=t==null?void 0:t.microphone)!=null&&w.showTranscript?c:"",mode:u}),s.jsx(zd,{isListening:i,toggleListening:d,disabled:n,microphoneMode:u})]})},Vd=()=>s.jsxs("div",{className:"magic-prompt-stars",children:[s.jsx(R,{name:"star",size:"xs",className:"magic-prompt-star"}),s.jsx(R,{name:"star",size:"xs",className:"magic-prompt-star"}),s.jsx(R,{name:"star",size:"xs",className:"magic-prompt-star"})]}),Hd=({accept:t=[],maxSizeMB:e=10,disabled:r=!1,data:n=null,onSelect:a,onProcessFile:i,allowMultiple:c=!1,children:d})=>{const[l,u]=o.useState(null),[b,g]=o.useState(null),[m,w]=o.useState(!1),[h,p]=o.useState(!1),[f,v]=o.useState(0),x=o.useRef(null);o.useEffect(()=>{n===null&&l!==null&&(u(null),x.current&&(x.current.value=""))},[n,l]);const j=async M=>{if(g(null),!M.length||!M[0])return;const _=t.filter($=>!$.startsWith("."));for(const $ of M){if(console.log("File validation:",{name:$.name,type:$.type,size:$.size}),$.size>e*1024*1024){g("file-too-large");return}if(!(_.length===0||_.includes($.type))){const S="."+$.name.split(".").pop().toLowerCase();if(!t.some(A=>A.startsWith(".")&&A===S)){console.error("File validation failed:",{fileName:$.name,fileType:$.type,fileExtension:S,acceptedMimeTypes:_,acceptedExtensions:t.filter(A=>A.startsWith("."))}),g("unsupported-format");return}console.log("File accepted via extension fallback:",S)}}if(i)try{if(w(!0),c){const $=[];for(const L of M){const S=await i(L);S&&typeof S=="object"&&$.push(S)}$.length>0&&(u($.map(L=>L.preview||null)),a&&a($.map(L=>L.data)))}else{const $=await i(M[0]);$&&typeof $=="object"&&(u($.preview||null),a&&a($.data))}}catch($){console.error("Error processing file:",$),g($.message||"processing-error")}finally{w(!1)}};return d({preview:l,error:b,isProcessing:m,isDragging:h,handleButtonClick:()=>{x.current&&!m&&x.current.click()},handleClear:()=>{u(null),g(null),w(!1),x.current&&(x.current.value=""),a&&a(null)},handleDragEnter:M=>{M.preventDefault(),M.stopPropagation(),!r&&!m&&(v(_=>_+1),p(!0))},handleDragLeave:M=>{M.preventDefault(),M.stopPropagation(),!r&&!m&&v(_=>{const $=_-1;return $===0&&p(!1),$})},handleDragOver:M=>{M.preventDefault(),M.stopPropagation()},handleDrop:async M=>{if(M.preventDefault(),M.stopPropagation(),v(0),p(!1),r||m)return;const _=Array.from(M.dataTransfer.files);_.length!==0&&await j(c?_:[_[0]])},inputProps:{type:"file",ref:x,onChange:async M=>{const _=c?Array.from(M.target.files):[M.target.files[0]];await j(_)},accept:t.join(","),disabled:r||m,className:"hidden",multiple:c}})},Wd=async()=>{const t=await le(()=>import("./pdf-CcZYcL52.js"),[],import.meta.url);return t.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.worker.min.mjs",t},Zd=async()=>await le(()=>import("./index-B6qKirJC.js").then(e=>e.i),__vite__mapDeps([7,1,8,5]),import.meta.url),qd=async()=>await le(()=>import("./index-C9oQ90Gt.js").then(e=>e.i),__vite__mapDeps([9,1,5]),import.meta.url),Gd=async()=>(await le(()=>import("./jszip.min-BBsE_OR0.js").then(e=>e.j),__vite__mapDeps([10,1,8,5]),import.meta.url)).default,Jd=["text/plain","text/markdown","text/csv","application/json","text/html","text/css","text/javascript","application/javascript","text/xml","message/rfc822","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-outlook","application/x-msg","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"],Kd={"image/jpeg":".jpeg,.jpg","image/jpg":".jpg","image/png":".png","image/gif":".gif","image/webp":".webp","text/plain":".txt","text/markdown":".md","text/csv":".csv","application/json":".json","text/html":".html","text/css":".css","text/javascript":".js","application/javascript":".js","text/xml":".xml","message/rfc822":".eml","application/pdf":".pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-outlook":".msg","application/x-msg":".msg","application/vnd.oasis.opendocument.text":".odt","application/vnd.oasis.opendocument.spreadsheet":".ods","application/vnd.oasis.opendocument.presentation":".odp"},Xd=t=>{const e=[];return t.forEach(r=>{e.push(r);const n=Kd[r];if(n){const a=n.split(",");e.push(...a)}}),e},xa=t=>{switch(t){case"text/plain":return"TXT";case"text/markdown":return"MD";case"text/csv":return"CSV";case"application/json":return"JSON";case"text/html":return"HTML";case"text/css":return"CSS";case"text/javascript":case"application/javascript":return"JS";case"text/xml":return"XML";case"message/rfc822":return"EML";case"application/pdf":return"PDF";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"DOCX";case"application/vnd.ms-outlook":return"MSG";case"application/vnd.oasis.opendocument.text":return"ODT";case"application/vnd.oasis.opendocument.spreadsheet":return"ODS";case"application/vnd.oasis.opendocument.presentation":return"ODP";default:return"FILE"}},Yd=t=>{const e=t.map(xa);return[...new Set(e)].join(", ")},Qd=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=a=>e(a.target.result),n.onerror=()=>r(new Error("read-error")),n.readAsText(t)}),eu=async t=>{const e=await t.arrayBuffer(),n=await(await Wd()).getDocument(e).promise;let a="";for(let i=1;i<=n.numPages;i++){const l=(await(await n.getPage(i)).getTextContent()).items.map(u=>u.str).join(" ");a+=l+`
`}return a.trim()},tu=async t=>{const e=await t.arrayBuffer(),n=await(await Zd()).convertToHtml({arrayBuffer:e}),a=document.createElement("div");return a.innerHTML=n.value,a.textContent||a.innerText||""},ru=async t=>{const e=await t.arrayBuffer(),r=await qd(),a=new r.default(e).getFileData();let i="";return a.subject&&(i+=`Subject: ${a.subject}

`),a.senderName&&(i+=`From: ${a.senderName}`,a.senderEmail&&(i+=` <${a.senderEmail}>`),i+=`
`),a.recipients&&a.recipients.length>0&&(i+=`To: ${a.recipients.map(c=>c.name||c.email).join(", ")}
`),a.body&&(i+=`
${a.body}`),i.trim()},su=async t=>{var i;const e=await t.arrayBuffer(),a=await((i=(await(await Gd()).loadAsync(e)).file("content.xml"))==null?void 0:i.async("string"));if(a){const d=new DOMParser().parseFromString(a,"text/xml"),l=u=>{let b="";if(u.nodeType===Node.TEXT_NODE)b=u.textContent;else if(u.nodeType===Node.ELEMENT_NODE){(u.nodeName==="text:p"||u.nodeName==="text:h")&&(b=`
`);for(const g of u.childNodes)b+=l(g);(u.nodeName==="text:p"||u.nodeName==="text:h")&&(b+=`
`)}return b};return l(d.documentElement).trim()}else throw new Error("Unable to extract content from OpenOffice document")},nu=async t=>{let e="";const r="."+t.name.split(".").pop().toLowerCase();return t.type==="application/pdf"||r===".pdf"?e=await eu(t):t.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||r===".docx"?e=await tu(t):t.type==="application/vnd.ms-outlook"||t.type==="application/x-msg"||r===".msg"?e=await ru(t):t.type==="application/vnd.oasis.opendocument.text"||t.type==="application/vnd.oasis.opendocument.spreadsheet"||t.type==="application/vnd.oasis.opendocument.presentation"||r===".odt"||r===".ods"||r===".odp"?e=await su(t):e=await Qd(t),e},au=({onFileSelect:t,disabled:e=!1,fileData:r=null,config:n={}})=>{const{t:a}=Q(),i=n.imageUpload||{},c=i.enabled!==!1&&n.imageUploadEnabled!==!1,d=n.fileUpload||{},l=d.enabled!==!1&&n.fileUploadEnabled!==!1,u=n.allowMultiple||!1,b=n.maxFileSizeMB||Math.max(i.maxFileSizeMB||0,d.maxFileSizeMB||0)||10,g=c?i.supportedFormats||n.supportedImageFormats||["image/jpeg","image/jpg","image/png","image/gif","image/webp"]:[],m=i.resizeImages!==!1&&n.resizeImages!==!1,w=i.maxResizeDimension||n.maxResizeDimension||1024,h=l?d.supportedFormats||n.supportedFormats||Jd:[],p=Xd([...g,...h]),f=k=>g.includes(k),v=k=>f(k)?k.replace("image/","").toUpperCase():xa(k),x=k=>new Promise((I,E)=>{const O=new FileReader;O.onload=N=>{const M=new Image;M.onload=()=>{const _=URL.createObjectURL(k);if(!m)return I({preview:{type:"image",url:_},data:{type:"image",base64:N.target.result,fileName:k.name,fileSize:k.size,fileType:k.type,width:M.width,height:M.height}});const $=document.createElement("canvas");let L=M.width,S=M.height;L>S&&L>w?(S=Math.round(S*w/L),L=w):S>w&&(L=Math.round(L*w/S),S=w),$.width=L,$.height=S,$.getContext("2d").drawImage(M,0,0,L,S);const A=$.toDataURL("image/jpeg",.8);I({preview:{type:"image",url:_},data:{type:"image",base64:A,fileName:k.name,fileSize:k.size,fileType:"image/jpeg",width:L,height:S}})},M.onerror=()=>E(new Error("invalid-image")),M.src=N.target.result},O.onerror=()=>E(new Error("read-error")),O.readAsDataURL(k)}),j=async k=>{if(!c&&g.some(O=>O===k.type))throw new Error("image-upload-disabled");if(!l&&h.some(O=>O===k.type))throw new Error("file-upload-disabled");if(f(k.type))return await x(k);const I=await nu(k),E=I.length>200?I.substring(0,200)+"...":I;return{preview:{type:"document",fileName:k.name,fileType:v(k.type),content:E},data:{type:"document",content:I,fileName:k.name,fileSize:k.size,fileType:k.type,displayType:v(k.type)}}},y=(()=>{const k=g.map(O=>O.replace("image/","").toUpperCase()),I=Yd(h);return k.length>0?[...k,I].join(", "):I})(),C=k=>{switch(k){case"file-too-large":return a("errors.fileTooLarge",{maxSize:b,defaultValue:`File too large. Maximum size is ${b}MB.`});case"unsupported-format":return a("errors.unsupportedFormat",{formats:y,defaultValue:`Unsupported file format. Please use: ${y}`});case"invalid-image":return a("errors.invalidImage","Invalid image file");case"read-error":return a("errors.readError","Error reading file");case"image-upload-disabled":return a("errors.imageUploadDisabled","Image upload is not supported by the selected model. Please choose a different model or upload a text file instead.");case"file-upload-disabled":return a("errors.fileUploadDisabled","File upload is disabled for this application.");default:return a("errors.fileProcessingError","Error processing file. Please try again.")}};return s.jsx(Hd,{accept:p,maxSizeMB:b,disabled:e,onSelect:t,onProcessFile:j,data:r,allowMultiple:u,children:({preview:k,error:I,isProcessing:E,isDragging:O,handleButtonClick:N,handleClear:M,handleDragEnter:_,handleDragLeave:$,handleDragOver:L,handleDrop:S,inputProps:P})=>s.jsxs("div",{className:"unified-uploader",onDragEnter:_,onDragLeave:$,onDragOver:L,onDrop:S,children:[s.jsx("input",{...P}),O&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-blue-500 bg-opacity-20 pointer-events-none",role:"alert","aria-live":"polite","aria-label":a("components.uploader.dropZoneActive","Drop zone active. Release to upload files."),children:s.jsx("div",{className:"bg-white rounded-lg shadow-2xl p-8 border-4 border-blue-500 border-dashed",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📎"}),s.jsx("p",{className:"text-xl font-semibold text-blue-600",children:a("components.uploader.dropFileHere","Drop file here")})]})})}),k?s.jsx("div",{className:"relative mt-2 mb-4",children:Array.isArray(k)?s.jsxs("div",{className:"space-y-2",children:[k.map((A,B)=>s.jsx("div",{children:A.type==="image"?s.jsx("div",{className:"relative rounded-lg overflow-hidden border border-gray-300",children:s.jsx("img",{src:A.url,alt:a("common.preview","Preview"),className:"max-w-full max-h-60 mx-auto"})}):s.jsx("div",{className:"relative rounded-lg overflow-hidden border border-gray-300 p-3 bg-gray-50",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(R,{name:"document-text",className:"w-8 h-8 text-blue-500 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:A.fileName}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[A.fileType," file"]}),s.jsx("div",{className:"text-xs text-gray-700 bg-white p-2 rounded border max-h-20 overflow-y-auto",children:A.content})]})]})})},B)),s.jsx("button",{type:"button",onClick:M,className:"w-full mt-2 px-3 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm",title:a("common.remove","Remove files"),children:a("common.removeAll","Remove All")}),s.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:a("components.uploader.filesSelected","{{count}} file(s) selected",{count:k.length})})]}):k.type==="image"?s.jsxs("div",{children:[s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-300",children:[s.jsx("img",{src:k.url,alt:a("common.preview","Preview"),className:"max-w-full max-h-60 mx-auto"}),s.jsx("button",{type:"button",onClick:M,className:"absolute top-2 right-2 bg-gray-800 bg-opacity-70 text-white rounded-full p-1 hover:bg-opacity-90",title:a("common.remove","Remove file"),children:s.jsx(R,{name:"x",className:"w-4 h-4"})})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:a("components.uploader.imageSelected","Image selected")})]}):s.jsxs("div",{children:[s.jsx("div",{className:"relative rounded-lg overflow-hidden border border-gray-300 p-3 bg-gray-50",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(R,{name:"document-text",className:"w-8 h-8 text-blue-500 flex-shrink-0 mt-1"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:k.fileName}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[k.fileType," file"]}),s.jsx("div",{className:"text-xs text-gray-700 bg-white p-2 rounded border max-h-20 overflow-y-auto",children:k.content})]}),s.jsx("button",{type:"button",onClick:M,className:"bg-gray-800 bg-opacity-70 text-white rounded-full p-1 hover:bg-opacity-90 flex-shrink-0",title:a("common.remove","Remove file"),children:s.jsx(R,{name:"x",className:"w-4 h-4"})})]})}),s.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:a("components.uploader.fileSelected","File selected and processed")})]})}):s.jsxs("div",{className:"mt-2 mb-4",children:[s.jsx("button",{type:"button",onClick:N,disabled:e||E,className:`flex items-center justify-center w-full p-3 border-2 border-dashed rounded-lg ${e||E?"border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-400 hover:border-indigo-500 hover:text-indigo-500"}`,children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin h-5 w-5 mr-2 flex items-center justify-center",children:s.jsx(R,{name:"refresh",className:"text-current"})}),s.jsx("span",{children:a("components.uploader.processing","Processing file...")})]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"paper-clip",className:"mr-2"}),s.jsx("span",{children:u?a("components.uploader.uploadFiles","Upload Files"):a("components.uploader.uploadFile","Upload File")})]})}),I&&s.jsx("div",{className:"text-red-500 text-sm mt-1",children:C(I)}),s.jsx("div",{className:"text-xs text-gray-500 mt-1 text-center",children:a("components.uploader.supportedFormats","Supported: {{formats}} (max {{maxSize}}MB)",{formats:y,maxSize:b})})]})]})})},ou={current:null},iu=({isOpen:t,onClose:e,onSelect:r,appId:n})=>{const{t:a,i18n:i}=Q(),[c,d]=o.useState([]),[l,u]=o.useState([]),[b,g]=o.useState([]),{getFavorites:m}=hr("ihub_favorite_prompts");o.useEffect(()=>{t&&(u(m()),g(Mr()))},[t]),o.useEffect(()=>{t&&(async()=>{try{const p=await kr(),f=(Array.isArray(p)?p:[]).map(v=>({...v,name:q(v.name,i.language),prompt:q(v.prompt,i.language),description:q(v.description,i.language)}));d(f),ou.current=new An(f,{keys:["name","prompt","description"],threshold:.4})}catch(p){console.error("Failed to load prompts",p)}})()},[t,i.language]),o.useEffect(()=>{t&&(u(m()),g(Mr()),c.length===0&&kr().then(p=>{const f=(Array.isArray(p)?p:[]).map(v=>({...v,name:q(v.name,i.language),prompt:q(v.prompt,i.language),description:q(v.description,i.language)}));d(f)}).catch(p=>console.error("Failed to load prompts",p)))},[t,i.language,c.length]);const w=c,h=p=>{Lr(p.id),r(p)};return t?s.jsx(sa,{isOpen:t,onClose:e,onSelect:h,items:w,fuseKeys:["name","prompt","description"],placeholder:a("common.promptSearch.placeholder","Search prompts..."),renderResult:p=>s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center",children:s.jsx(R,{name:p.icon||"clipboard",className:"w-3.5 h-3.5 text-indigo-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center flex-wrap mb-1",children:[s.jsx("span",{className:"font-medium text-gray-900 text-sm mr-1",children:p.name}),l.includes(p.id)&&s.jsx("span",{className:"ml-1","aria-label":a("pages.promptsList.favorite"),title:a("pages.promptsList.favorite"),children:s.jsx(R,{name:"star",size:"sm",className:"text-yellow-500",solid:!0})}),b.includes(p.id)&&s.jsx("span",{className:"ml-1","aria-label":a("pages.promptsList.recent"),title:a("pages.promptsList.recent"),children:s.jsx(R,{name:"clock",size:"sm",className:"text-indigo-600",solid:!0})}),p.appId&&p.appId===n&&s.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs text-indigo-600 bg-indigo-100 rounded-full",children:a("common.promptSearch.appSpecific","app")})]}),s.jsx("p",{className:"text-xs text-gray-500 leading-4 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:Or(p.description||p.prompt)})]})]})}):null},Rt=({app:t,value:e,onChange:r,onSubmit:n,isProcessing:a,onCancel:i,onVoiceInput:c,onVoiceCommand:d,onFileSelect:l,allowEmptySubmit:u=!1,inputRef:b=null,formRef:g=null,disabled:m=!1,uploadConfig:w={},selectedFile:h=null,showUploader:p=void 0,onToggleUploader:f=null,magicPromptEnabled:v=!1,onMagicPrompt:x=null,showUndoMagicPrompt:j=!1,onUndoMagicPrompt:y=null,magicPromptLoading:C=!1})=>{var Y,xe;const{t:k,i18n:I}=Q(),{uiConfig:E}=Ue(),O=o.useRef(null),N=b||O,[M,_]=o.useState(!1),[$,L]=o.useState(!1),S=((Y=E==null?void 0:E.promptsList)==null?void 0:Y.enabled)!==!1&&((xe=t==null?void 0:t.features)==null?void 0:xe.promptsList)!==!1,P=t==null?void 0:t.inputMode,A=(P==null?void 0:P.type)==="multiline"||P==="multiline",B=A?(P==null?void 0:P.rows)||2:1,D=p!==void 0?p:M,z=t!=null&&t.messagePlaceholder?typeof t.messagePlaceholder=="object"?t.messagePlaceholder[I.language]||t.messagePlaceholder.en:t.messagePlaceholder:null;let Z=a?k("pages.appChat.thinking"):z||(u?k("pages.appChat.optionalMessagePlaceholder","Type here (optional)..."):k("pages.appChat.messagePlaceholder","Type here..."));const se=o.useCallback(()=>{if(N.current){const F=N.current;F.focus();const G=F.value.length;F.setSelectionRange(G,G)}},[N]);o.useEffect(()=>{a||se()},[a,se]),o.useEffect(()=>{if(N.current){const F=N.current,G=()=>{F.style.height="auto";const W=F.scrollHeight,V=B*1.5*16,K=(A?12:3)*1.5*16+24,ue=Math.min(Math.max(W,V),K);F.style.height=`${ue}px`};return G(),F.addEventListener("input",G),()=>{F.removeEventListener("input",G)}}},[e,A,B,N]);const ce=F=>{F.preventDefault(),(e.trim()||u)&&!a&&(n(F),setTimeout(()=>{se()},0))},T=()=>{r({target:{value:""}})},H=F=>{F.preventDefault(),i&&typeof i=="function"?(console.log("Cancel button clicked, executing onCancel"),i()):console.warn("Cancel handler is not properly defined")},J=()=>{f?f():_(F=>!F)},ne=F=>{if(S&&!$&&F.key==="/"&&e===""){F.preventDefault(),L(!0);return}if($){F.key==="Escape"&&L(!1);return}if((F.metaKey||F.ctrlKey)&&F.key==="Enter"){F.preventDefault(),ce(F);return}if(!A&&F.key==="Enter"){F.preventDefault(),ce(F);return}};return s.jsxs("div",{className:"chat-input-container",children:[S&&s.jsx(iu,{isOpen:$,appId:t==null?void 0:t.id,onClose:()=>L(!1),onSelect:F=>{r({target:{value:F.prompt.replace("[content]","")}}),L(!1),setTimeout(()=>{se()},0)}}),(w==null?void 0:w.enabled)===!0&&D&&s.jsx(au,{onFileSelect:l,disabled:m||a,fileData:h,config:w}),s.jsxs("form",{ref:g,onSubmit:ce,autoComplete:"off",className:"flex space-x-2 items-center",children:[s.jsx("textarea",{autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true",type:"text",value:e,onChange:r,onKeyDown:ne,disabled:m||a,className:"w-full p-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 pr-10",placeholder:Z,ref:N,style:{resize:A?"vertical":"none",minHeight:A?`${B*1.5}em`:void 0,maxHeight:A?"calc(11 * 1.5em + 1.5rem)":void 0,overflowY:A?"auto":"hidden",height:A?"auto":void 0},title:A?k("input.multilineTooltip","Press Shift+Enter for new line, Cmd+Enter to send"):k("input.singlelineTooltip","Press Enter to send")}),s.jsx("span",{className:"sr-only"}),s.jsx("div",{className:"flex-1 relative",children:e&&s.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 h-fit",onClick:T,title:k("common.clear","Clear"),children:s.jsx(R,{name:"clearCircle",size:"sm"})})}),s.jsxs("div",{className:"flex flex-col gap-1 justify-start",children:[(w==null?void 0:w.enabled)===!0&&s.jsx("button",{type:"button",onClick:J,disabled:m||a,className:`image-upload-button ${D?"active":""} h-fit`,title:k("common.toggleUpload","Toggle file upload"),"aria-label":k("common.toggleUpload","Toggle file upload"),children:s.jsx(R,{name:"paper-clip",size:"md"})}),v&&!j&&s.jsx("button",{type:"button",onClick:x,disabled:m||a,className:"image-upload-button h-fit",title:k("common.magicPrompt","Magic prompt"),"aria-label":k("common.magicPrompt","Magic prompt"),children:C?s.jsx(Vd,{}):s.jsx(R,{name:"sparkles",size:"md"})}),j&&s.jsx("button",{type:"button",onClick:y,disabled:m||a,className:"image-upload-button h-fit",title:k("common.undo","Undo"),"aria-label":k("common.undo","Undo"),children:s.jsx(R,{name:"arrowLeft",size:"md"})}),c&&s.jsx(Bd,{app:t,onSpeechResult:c,inputRef:N,disabled:m||a,onCommand:d})]}),s.jsx("button",{type:"button",onClick:a?H:ce,disabled:m||!u&&!e.trim()&&!a,className:`px-4 py-3 rounded-lg font-medium flex items-center justify-center h-fit ${m||!u&&!e.trim()&&!a?"bg-gray-300 text-gray-500 cursor-not-allowed":a?"bg-red-600 text-white hover:bg-red-700":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:a?s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"close",size:"sm",className:"mr-1"}),s.jsx("span",{children:k("common.cancel")})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:k("common.send")}),s.jsx("span",{className:"ml-1 text-xs opacity-70 hidden sm:inline",children:A?"⌘↵":"↵"})]})})]})]})},lu={js:"JavaScript",javascript:"JavaScript",jsx:"JSX",ts:"TypeScript",tsx:"TSX",py:"Python",python:"Python",java:"Java",c:"C",cpp:"C++",csharp:"C#",cs:"C#",php:"PHP",rb:"Ruby",ruby:"Ruby",go:"Go",rust:"Rust",swift:"Swift",kotlin:"Kotlin",scala:"Scala",html:"HTML",css:"CSS",scss:"SCSS",sass:"Sass",less:"Less",xml:"XML",json:"JSON",yaml:"YAML",yml:"YAML",toml:"TOML",ini:"INI",sh:"Shell",bash:"Bash",zsh:"Zsh",fish:"Fish",powershell:"PowerShell",ps1:"PowerShell",sql:"SQL",mysql:"MySQL",postgresql:"PostgreSQL",sqlite:"SQLite",r:"R",matlab:"MATLAB",perl:"Perl",lua:"Lua",dart:"Dart",elm:"Elm",clojure:"Clojure",erlang:"Erlang",elixir:"Elixir",haskell:"Haskell",ocaml:"OCaml",fsharp:"F#",fs:"F#",vb:"Visual Basic",vba:"VBA",text:"Text",txt:"Text",md:"Markdown",markdown:"Markdown",tex:"LaTeX",latex:"LaTeX",diff:"Diff",patch:"Patch",mermaid:"Mermaid",diagram:"Diagram",graph:"Graph"},cu={javascript:"js",js:"js",jsx:"jsx",typescript:"ts",ts:"ts",tsx:"tsx",python:"py",py:"py",java:"java",c:"c",cpp:"cpp",csharp:"cs",cs:"cs",php:"php",ruby:"rb",rb:"rb",go:"go",rust:"rs",swift:"swift",kotlin:"kt",scala:"scala",html:"html",css:"css",scss:"scss",sass:"sass",less:"less",xml:"xml",json:"json",yaml:"yaml",yml:"yml",toml:"toml",ini:"ini",sh:"sh",bash:"sh",zsh:"zsh",fish:"fish",powershell:"ps1",ps1:"ps1",sql:"sql",mysql:"sql",postgresql:"sql",sqlite:"sql",r:"r",matlab:"m",perl:"pl",lua:"lua",dart:"dart",elm:"elm",clojure:"clj",erlang:"erl",elixir:"ex",haskell:"hs",ocaml:"ml",fsharp:"fs",fs:"fs",vb:"vb",vba:"vba",markdown:"md",md:"md",tex:"tex",latex:"tex",diff:"diff",patch:"patch",text:"txt",mermaid:"mmd",diagram:"mmd",graph:"mmd"},du=new Set(["mermaid","diagram","graph","flowchart","sequence","class","state","gantt","pie","journey","timeline","mindmap","mind-map","gitgraph","er","quadrant"]),uu=(t="text")=>{const e=t.toLowerCase();return lu[e]||t.toUpperCase()},mu=(t="text")=>{const e=t.toLowerCase();return cu[e]||"txt"},hu=t=>t?du.has(t.toLowerCase()):!1,gu=t=>{if(!t||typeof t!="string")return!1;const e=t.trim();if(e.length<10||[/-->\s*$/,/^\s*\w+\s*$/,/:\s*$/,/\[\s*$/,/\(\s*$/,/{\s*$/].some(i=>i.test(e)))return!1;const n=e.split(`
`).filter(i=>i.trim());return n.length<2?!1:/^(graph|flowchart|sequenceDiagram|classDiagram|stateDiagram|erDiagram|journey|gantt|pie|timeline|mindmap|gitgraph|quadrantChart)/i.test(n[0])||e.includes("-->")||e.includes("->")||e.includes("participant")||e.includes("class ")||e.includes("state ")},fu=t=>{let e=t;return(t.includes("<br>")||t.includes("<br/>")||t.includes("<br />"))&&(e=t.replace(/<br\s*\/?>/gi,`
`),e=e.replace(/(\w+)(\[)([^\]]+)(\])/g,(r,n,a,i)=>i.includes(`
`)?`${n}["${i.trim()}"]`:r)),e=e.replace(/(\w+\s*-->\s*\w+\[[^\]]+\])\s+\1/g,"$1"),e=e.replace(/(\w+\s*-->\s*\w+\[[^\]]+\])\s+(\w+)$/gm,"$1"),e=e.split(`
`).map(r=>r.includes("-->")&&/\]\s+[A-Z]\d*\s*$/.test(r)?r.replace(/\]\s+[A-Z]\d*\s*$/,"]"):r).join(`
`),e},pu=t=>{var a;const e=t.trim(),r=e.split(`
`),n=((a=r[0])==null?void 0:a.trim().toLowerCase())||"";return n.startsWith("flowchart")||n.startsWith("graph")?"flowchart":n==="mindmap"?"mindmap":n.startsWith("sequencediagram")||n.startsWith("sequence")?"sequence":n.startsWith("classDiagram")||n.startsWith("class")?"class":n.startsWith("stateDiagram")||n.startsWith("state")?"state":n.startsWith("gantt")?"gantt":n.startsWith("pie")?"pie":n.startsWith("journey")?"journey":n.startsWith("timeline")?"timeline":n.startsWith("gitgraph")?"gitgraph":n.startsWith("erdiagram")||n.startsWith("er")?"er":n.startsWith("quadrantchart")||n.startsWith("quadrant")?"quadrant":e.includes("-->")||e.includes("---")?"flowchart":r.length>1&&r.slice(1).some(i=>i.trim()&&!i.trim().includes("-->")&&!i.trim().includes("---"))&&r.slice(1).some(c=>c.startsWith("    ")||c.startsWith("	"))?"mindmap":"flowchart"},xu=()=>`id-${Date.now().toString(36)}-${Math.random().toString(36).substring(2,7)}`,Kt=(t,e,r=!0)=>{const n=t.innerHTML,a='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',i='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>';t.innerHTML=`
    ${r?a:i}
    <span class="hidden sm:inline">${e}</span>
  `,t.classList.toggle("text-green-600",r),t.classList.toggle("text-red-600",!r),t.classList.remove("text-gray-600"),t.disabled=!0,setTimeout(()=>{t.innerHTML=n,t.classList.remove("text-green-600","text-red-600"),t.classList.add("text-gray-600"),t.disabled=!1},2e3)},bu=()=>{o.useEffect(()=>{const t=e=>{var c,d;const r=e.target.closest("button");if(!r)return;const n=r.classList.contains("code-copy-btn"),a=r.classList.contains("code-download-btn");if(!n&&!a)return;let i=r.dataset.codeContent;if(!i||i==="[object Object]"||i==="undefined"){const l=(c=r.closest(".code-block-container"))==null?void 0:c.querySelector("pre > code");i=l?l.textContent:""}else try{i=decodeURIComponent(i)}catch(l){console.warn("Failed to decode code content:",l);const u=(d=r.closest(".code-block-container"))==null?void 0:d.querySelector("pre > code");i=u?u.textContent:""}if(i=i.trim(),n&&navigator.clipboard.writeText(i).then(()=>Kt(r,"Copied!",!0)).catch(l=>{console.error("Failed to copy code block:",l),Kt(r,"Error",!1)}),a)try{const l=r.dataset.codeLanguage||"text",u=mu(l),b=new Blob([i],{type:"text/plain"}),g=URL.createObjectURL(b),m=document.createElement("a");m.href=g,m.download=`code.${u}`,m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g),Kt(r,"Downloaded!",!0)}catch(l){console.error("Download failed:",l),Kt(r,"Error",!1)}};return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[])},wu=(t,e)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>t.apply(null,n),e)}},Pe=(t,e,r,n)=>{const a=t.innerHTML,i=t.className;let c;n==="checkmark"?c='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>':n==="error"&&(c='<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>'),t.innerHTML=`
    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      ${c}
    </svg>
    <span class="hidden sm:inline">${e}</span>
  `,t.className=t.className.replace(/text-gray-600|text-red-600/,r),setTimeout(()=>{t.innerHTML=a,t.className=i},2e3)},vu=({t})=>{o.useEffect(()=>{let e,r=!1;const n=async()=>{if(!e)try{e=(await le(()=>import("./mermaid-DechTdnA.js").then(g=>g.bB),__vite__mapDeps([2,1]),import.meta.url)).default,e.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose",fontFamily:"ui-sans-serif, system-ui, sans-serif",flowchart:{useMaxWidth:!1,htmlLabels:!0},sequence:{useMaxWidth:!1,htmlLabels:!1},gantt:{useMaxWidth:!1,htmlLabels:!1},journey:{useMaxWidth:!1,htmlLabels:!1},class:{useMaxWidth:!1,htmlLabels:!1},state:{useMaxWidth:!1,htmlLabels:!1},er:{useMaxWidth:!1,htmlLabels:!1},pie:{useMaxWidth:!1,htmlLabels:!1},quadrantChart:{useMaxWidth:!1,htmlLabels:!1},timeline:{useMaxWidth:!1,htmlLabels:!1},gitgraph:{useMaxWidth:!1,htmlLabels:!1},mindmap:{useMaxWidth:!1,htmlLabels:!0},maxTextSize:5e4,maxEdges:500}),r=!0,a()}catch(b){console.error("Failed to load or initialize Mermaid:",b)}},a=async()=>{const b=document.querySelectorAll('.mermaid-diagram-container:not([data-processed="true"])');if(b.length!==0&&r)for(const g of b){g.dataset.processed="true";const m=decodeURIComponent(g.dataset.code),w=g.dataset.language||"mermaid";if(!gu(m)){console.warn("Skipping incomplete or invalid Mermaid code."),g.innerHTML='<div class="p-4 text-sm text-yellow-700 bg-yellow-50 border border-yellow-200 rounded-lg">Incomplete diagram code.</div>';continue}const h=fu(m);try{const p=m.length,f=(m.match(/\[.*?\]|{.*?}|\(.*?\)/g)||[]).length,v=(m.match(/-->|->|---|-\.-|==>|==|\.\./g)||[]).length,x={maxNodes:100,maxEdges:200,maxTextLength:1e4};if(p>x.maxTextLength||f>x.maxNodes||v>x.maxEdges)throw new Error(`Diagram too complex (${p} chars, ${f} nodes, ${v} edges)`);const j=`${g.id}-svg`;let y;try{y=(await e.render(j,h)).svg}catch(k){const I=document.getElementById(j);throw I&&I.remove(),k}g.innerHTML=`
            <div class="mermaid-container code-block-container relative group border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm">
              <div class="mermaid-diagram p-4 bg-white overflow-x-auto" style="min-height: 200px; width: 100%; max-width: none;">
                <div class="mermaid-svg-container" style="display: flex; justify-content: flex-start; width: 100%; min-width: 100%;">
                  ${y}
                </div>
              </div>
              <div class="code-block-toolbar flex flex-row items-center justify-between bg-gray-50 border-t border-gray-200 px-3 py-2 rounded-b-lg">
                <div class="flex flex-row items-center gap-2">
                  <span class="text-xs font-medium text-gray-600">Mermaid ${w!=="mermaid"?`(${w})`:""}</span>
                </div>
                <div class="flex flex-row items-center gap-1">
                  <button class="mermaid-copy-code p-1.5 rounded text-xs bg-transparent text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200 flex items-center gap-1" 
                          data-code="${encodeURIComponent(m)}" data-processed-code="${encodeURIComponent(h)}" type="button" title="${t?t("common.copyCode","Copy code"):"Copy code"}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    <span class="hidden sm:inline">${t?t("common.copy","Code"):"Code"}</span>
                  </button>
                  <button class="mermaid-download-svg p-1.5 rounded text-xs bg-transparent text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200 flex items-center gap-1" 
                          data-svg="${encodeURIComponent(y)}" data-id="${g.id}" type="button" title="${t?t("common.downloadSVG","Download SVG"):"Download SVG"}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span class="hidden md:inline">SVG</span>
                  </button>
                  <button class="mermaid-download-png p-1.5 rounded text-xs bg-transparent text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200 flex items-center gap-1" 
                          data-svg="${encodeURIComponent(y)}" data-id="${g.id}" type="button" title="${t?t("common.downloadPNG","Download PNG"):"Download PNG"}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <span class="hidden md:inline">PNG</span>
                  </button>
                  <button class="mermaid-download-pdf p-1.5 rounded text-xs bg-transparent text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200 flex items-center gap-1" 
                          data-svg="${encodeURIComponent(y)}" data-id="${g.id}" type="button" title="${t?t("common.downloadPDF","Download PDF"):"Download PDF"}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h8.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span class="hidden md:inline">PDF</span>
                  </button>
                  <button class="mermaid-fullscreen p-1.5 rounded text-xs bg-transparent text-gray-600 hover:bg-gray-200 hover:text-gray-800 transition-colors duration-200 flex items-center gap-1" 
                          data-svg="${encodeURIComponent(y)}" type="button" title="${t?t("common.viewFullscreen","View Fullscreen"):"View Fullscreen"}">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path>
                    </svg>
                    <span class="hidden lg:inline">Full</span>
                  </button>
                </div>
              </div>
            </div>
          `;const C=g.querySelector("svg");C&&(C.style.width="auto",C.style.maxWidth="none",C.style.minWidth="600px",C.style.height="auto",C.removeAttribute("width"),C.removeAttribute("height"))}catch(p){console.error("Mermaid rendering error:",p),g.innerHTML=`
            <div class="code-block-container relative group border border-red-200 rounded-lg overflow-hidden bg-red-50 shadow-sm">
              <div class="bg-red-900 text-red-100 rounded-t-lg p-4 overflow-x-auto">
                <div class="text-sm text-red-200 mb-2">Mermaid Syntax Error:</div>
                <div class="text-red-100 text-sm mb-3">${p.message}</div>
                <pre class="text-red-200 text-xs"><code>${m}</code></pre>
              </div>
              <div class="code-block-toolbar flex flex-row items-center justify-between bg-red-100 border-t border-red-200 px-3 py-2 rounded-b-lg">
                <div class="flex flex-row items-center gap-2">
                  <span class="text-xs font-medium text-red-600">Mermaid (Error)</span>
                </div>
                <div class="flex flex-row items-center gap-2">
                  <button class="mermaid-copy-code p-1.5 rounded text-xs bg-transparent text-red-600 hover:bg-red-200 hover:text-red-800 transition-colors duration-200 flex items-center gap-1" 
                          data-code="${encodeURIComponent(m)}" data-processed-code="${encodeURIComponent(h)}" type="button" title="Copy code">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    <span class="hidden sm:inline">Copy</span>
                  </button>
                </div>
              </div>
            </div>
          `}}},i=wu(a,300),c=new MutationObserver(b=>{let g=!1,m=!1;b.forEach(w=>{w.addedNodes.length>0&&w.addedNodes.forEach(h=>{var p,f,v,x,j,y;h.nodeType===Node.ELEMENT_NODE&&((p=h.classList)!=null&&p.contains("mermaid-diagram-container")||(f=h.querySelector)!=null&&f.call(h,".mermaid-diagram-container"))&&(g=!0),h.nodeType===Node.ELEMENT_NODE&&((v=h.classList)!=null&&v.contains("streaming-cursor")||(x=h.querySelector)!=null&&x.call(h,".streaming-cursor")||(j=h.classList)!=null&&j.contains("typing-indicator")||(y=h.querySelector)!=null&&y.call(h,".typing-indicator"))&&(m=!0)})}),g&&setTimeout(()=>{document.querySelector(".streaming-cursor, .typing-indicator")||i()},m?2e3:100)}),d=[],l=()=>{a(),d.push(setTimeout(()=>{a()},500)),d.push(setTimeout(()=>{a()},1500))};n(),l(),c.observe(document.body,{childList:!0,subtree:!0});const u=b=>{const g=b.target.closest("button");if(g){if(g.classList.contains("mermaid-copy-code")){const m=decodeURIComponent(g.dataset.code);navigator.clipboard.writeText(m).then(()=>Pe(g,"Copied!","text-green-600","checkmark")).catch(()=>Pe(g,"Error","text-red-600","error"))}if(g.classList.contains("mermaid-download-svg")){const m=g.dataset.id;try{const w=g.closest(".mermaid-container");let h=null;if(w&&(h=w.querySelector(".mermaid-diagram svg")||w.querySelector(".mermaid-svg-container svg")||w.querySelector(".mermaid-container > div > svg"),!h)){const C=w.querySelectorAll("svg");for(const k of C)if(!k.closest("button")){h=k;break}}if(!h)throw new Error("Could not find SVG element in the diagram");const p=h.cloneNode(!0);p.getAttribute("xmlns")||p.setAttribute("xmlns","http://www.w3.org/2000/svg");const v=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
${new XMLSerializer().serializeToString(p)}`,x=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),j=URL.createObjectURL(x),y=document.createElement("a");y.href=j,y.download=`${m}.svg`,y.style.display="none",document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(j),Pe(g,"Downloaded!","text-green-600","checkmark")}catch(w){console.error("SVG download error:",w),Pe(g,"Error","text-red-600","error")}}if(g.classList.contains("mermaid-download-png")){const m=g.dataset.id;try{const w=g.closest(".mermaid-container");let h=null;if(w&&(h=w.querySelector(".mermaid-diagram svg")||w.querySelector(".mermaid-svg-container svg")||w.querySelector(".mermaid-container > div > svg"),!h)){const E=w.querySelectorAll("svg");for(const O of E)if(!O.closest("button")){h=O;break}}if(!h)throw new Error("Could not find SVG element in the diagram");const p=h.cloneNode(!0);p.getAttribute("xmlns")||p.setAttribute("xmlns","http://www.w3.org/2000/svg");const f=h.getBoundingClientRect(),v=Math.max(f.width||800,400),x=Math.max(f.height||600,300);p.setAttribute("width",v),p.setAttribute("height",x);const j=new XMLSerializer().serializeToString(p),y=document.createElement("canvas"),C=y.getContext("2d"),k=new Image;k.onload=()=>{const E=Math.max(3,v>1e3||x>800?4:3);y.width=v*E,y.height=x*E,C.imageSmoothingEnabled=!0,C.imageSmoothingQuality="high",C.fillStyle="white",C.fillRect(0,0,y.width,y.height),C.scale(E,E),C.drawImage(k,0,0,v,x),y.toBlob(O=>{if(O){const N=URL.createObjectURL(O),M=document.createElement("a");M.href=N,M.download=`${m}.png`,M.style.display="none",document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(N),Pe(g,"Downloaded!","text-green-600","checkmark")}else Pe(g,"Error","text-red-600","error")},"image/png",1)},k.onerror=E=>{console.error("Image load error:",E),Pe(g,"Error","text-red-600","error")};const I="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(j);k.src=I}catch(w){console.error("PNG download error:",w),Pe(g,"Error","text-red-600","error")}}if(g.classList.contains("mermaid-download-pdf")){const m=g.dataset.id;try{const w=g.closest(".mermaid-container");let h=null;if(w&&(h=w.querySelector(".mermaid-diagram svg")||w.querySelector(".mermaid-svg-container svg")||w.querySelector(".mermaid-container > div > svg"),!h)){const E=w.querySelectorAll("svg");for(const O of E)if(!O.closest("button")){h=O;break}}if(!h)throw new Error("Could not find SVG element in the diagram");const p=h.cloneNode(!0);p.getAttribute("xmlns")||p.setAttribute("xmlns","http://www.w3.org/2000/svg");const f=h.getBoundingClientRect(),v=Math.max(f.width||800,400),x=Math.max(f.height||600,300);p.setAttribute("width",v),p.setAttribute("height",x);const j=new XMLSerializer().serializeToString(p),y=document.createElement("canvas"),C=y.getContext("2d"),k=new Image;k.onload=()=>{const E=Math.max(3,v>1e3||x>800?4:3);y.width=v*E,y.height=x*E,C.imageSmoothingEnabled=!0,C.imageSmoothingQuality="high",C.fillStyle="white",C.fillRect(0,0,y.width,y.height),C.scale(E,E),C.drawImage(k,0,0,v,x),y.toBlob(async O=>{if(O)try{const{jsPDF:N}=await le(async()=>{const{jsPDF:D}=await import("https://cdn.skypack.dev/jspdf@2.5.1");return{jsPDF:D}},[],import.meta.url),M=2.834645669,_=10;let $=Math.max(v*.26458,100),L=Math.max(x*.26458,70);$+=_*2,L+=_*2;const S=420,P=297;if($>S||L>P){const D=Math.min(S/$,P/L);$*=D,L*=D}const A=new N({orientation:$>L?"landscape":"portrait",unit:"mm",format:[$,L],compress:!1}),B=new FileReader;B.onload=()=>{const D=$-_*2,z=L-_*2;A.addImage(B.result,"PNG",_,_,D,z,void 0,"MEDIUM"),A.save(`${m}.pdf`),Pe(g,"Downloaded!","text-green-600","checkmark")},B.readAsDataURL(O)}catch(N){console.error("PDF library error:",N),Pe(g,"Error","text-red-600","error")}else Pe(g,"Error","text-red-600","error")},"image/png",1)},k.onerror=E=>{console.error("Image load error for PDF:",E),Pe(g,"Error","text-red-600","error")};const I="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(j);k.src=I}catch(w){console.error("PDF download error:",w),Pe(g,"Error","text-red-600","error")}}if(g.classList.contains("mermaid-fullscreen")){const m=decodeURIComponent(g.dataset.svg);if(document.querySelector(".mermaid-fullscreen-modal"))return;const w=document.createElement("div");w.className="mermaid-fullscreen-modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4",w.style.zIndex="9999",w.innerHTML=`
          <div class="relative w-full h-full bg-white rounded-lg shadow-xl overflow-hidden flex flex-col">
            <div class="absolute top-4 right-4 z-20 flex gap-2">
              <button class="zoom-out p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors" title="Zoom Out">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"></path>
                </svg>
              </button>
              <button class="zoom-in p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors" title="Zoom In">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                </svg>
              </button>
              <button class="reset-zoom p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors" title="Reset Zoom">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                </svg>
              </button>
              <button class="close-fullscreen p-2 bg-white rounded-full shadow-lg hover:bg-gray-100 transition-colors" title="Close">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            <div class="diagram-viewer flex-1 overflow-hidden p-8 relative" style="cursor: grab;">
              <div class="diagram-content transition-transform duration-200" style="transform-origin: 0 0; width: fit-content; position: absolute; top: 0; left: 0;">
                ${m}
              </div>
            </div>
          </div>
        `;let h=1,p=!1,f,v,x=0,j=0;const y=w.querySelector(".diagram-viewer"),C=w.querySelector(".diagram-content"),k=()=>{const L=y.getBoundingClientRect(),S=C.querySelector("svg");if(!S)return;const P=C.style.transform;C.style.transform="none";const A=S.getBoundingClientRect();C.style.transform=P;const B=A.width,D=A.height,z=L.width-64,Z=L.height-64;x=(z-B*h)/2+32,j=(Z-D*h)/2+32,I()},I=()=>{C.style.transform=`translate(${x}px, ${j}px) scale(${h})`},E=(L,S=null,P=null)=>{const A=h;h=Math.max(.1,Math.min(5,L));const B=h/A;if(S===null||P===null){const D=y.getBoundingClientRect();S=D.width/2,P=D.height/2}x=S-(S-x)*B,j=P-(P-j)*B,I()};w.querySelector(".zoom-in").addEventListener("click",()=>E(h*1.2)),w.querySelector(".zoom-out").addEventListener("click",()=>E(h/1.2)),w.querySelector(".reset-zoom").addEventListener("click",()=>{h=1,k()}),setTimeout(()=>{let L=0;const S=10,P=()=>{const A=C.querySelector("svg");A&&A.getBoundingClientRect().width>0?k():L<S&&(L++,setTimeout(P,100))};P()},50),y.addEventListener("mousedown",L=>{L.target.closest("button")||(p=!0,y.style.cursor="grabbing",f=L.clientX-x,v=L.clientY-j,L.preventDefault())}),y.addEventListener("wheel",L=>{if(L.ctrlKey||L.metaKey){L.preventDefault();const S=L.deltaY>0?.9:1.1,P=y.getBoundingClientRect(),A=L.clientX-P.left,B=L.clientY-P.top;E(h*S,A,B)}});const N=L=>{p&&(L.preventDefault(),x=L.clientX-f,j=L.clientY-v,I())},M=()=>{p&&(p=!1,y.style.cursor="grab")},_=L=>{L.key==="Escape"&&$()};document.addEventListener("mousemove",N),document.addEventListener("mouseup",M),document.addEventListener("keydown",_);const $=()=>{document.body.contains(w)&&(document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",M),document.removeEventListener("keydown",_),document.body.removeChild(w))};w.addEventListener("click",L=>{L.target===w&&$()}),w.querySelector(".close-fullscreen").addEventListener("click",$),document.body.appendChild(w)}}};return document.addEventListener("click",u),()=>{d.forEach(clearTimeout),c.disconnect(),document.removeEventListener("click",u)}},[t])},yu=(t,e)=>{const r=`mermaid-${xu()}`,n=pu(t);return`
    <div class="mermaid-diagram-container" id="${r}" data-code="${encodeURIComponent(t)}" data-language="${e||"mermaid"}" data-diagram-type="${n}">
      <div class="mermaid-diagram-placeholder">
        <div class="flex items-center justify-center p-8 bg-gray-50 border border-gray-200 rounded-lg">
          <div class="flex items-center gap-2 text-gray-600">
            <svg class="animate-spin w-4 h-4" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-sm">Loading diagram...</span>
          </div>
        </div>
      </div>
    </div>
  `},gr=t=>{const e=new qe.Renderer;e.code=(r,n)=>{let a=r,i=n;typeof r=="object"&&r!==null&&(a=r.text||r.raw||r.code||r,i=n||r.lang||r.language),typeof a!="string"&&(a=String(a));const c=(i||"text").toLowerCase();if(hu(c))return yu(a,c);const d=uu(c),l=qe.defaults.highlight?qe.defaults.highlight(a,c):a.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`
      <div class="code-block-container relative group my-4 border border-gray-200 rounded-lg shadow-sm">
        <pre class="bg-gray-900 text-gray-100 rounded-t-lg p-4 overflow-x-auto"><code class="language-${c}">${l}</code></pre>
        <div class="code-block-toolbar flex items-center justify-between bg-gray-50 border-t border-gray-200 px-3 py-2 rounded-b-lg">
          <span class="text-xs font-medium text-gray-600">${d}</span>
          <div class="flex flex-row items-center gap-2">
            <button
              class="code-copy-btn p-1.5 rounded text-xs text-gray-600 hover:bg-gray-200 flex flex-row items-center gap-1"
              data-code-content="${encodeURIComponent(a)}"
              type="button"
              title="${t?t("common.copyCode","Copy code"):"Copy code"}"
            >
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
              <span class="hidden sm:inline">${t?t("common.copy","Copy"):"Copy"}</span>
            </button>
            <button
              class="code-download-btn p-1.5 rounded text-xs text-gray-600 hover:bg-gray-200 flex flex-row items-center gap-1"
              data-code-content="${encodeURIComponent(a)}"
              data-code-language="${c}"
              type="button"
              title="${t?t("common.downloadCode","Download code"):"Download code"}"
            >
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
              <span class="hidden sm:inline">${t?t("common.download","Download"):"Download"}</span>
            </button>
          </div>
        </div>
      </div>
    `},e.link=r=>{let n=r.href,a=r.title,i=r.text;if(typeof r=="string"&&(n=r,a=arguments[1],i=arguments[2]),typeof n=="string"&&n.startsWith("{")&&n.endsWith("}"))try{const b=JSON.parse(n);n=b.href||b.url||n,a||(a=b.title||null)}catch{console.warn("Failed to parse href JSON")}n=n||"",i=i||n;const c=typeof window<"u"?window.location.hostname:"";let d=!1;try{new URL(n,window.location.href).hostname!==c&&(d=!0)}catch{}const l=d?' target="_blank" rel="noopener noreferrer"':"",u=a?` title="${a}"`:"";return`<a href="${n}"${u}${l}>${i}</a>`},qe.setOptions({gfm:!0,breaks:!0,headerIds:!0,mangle:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1,renderer:e,highlight:(r,n)=>{if(n&&window.hljs&&window.hljs.getLanguage(n))try{return window.hljs.highlight(r,{language:n,ignoreIllegals:!0}).value}catch(a){console.error("Highlight.js error:",a)}return r.replace(/</g,"&lt;").replace(/>/g,"&gt;")}})},ju=()=>{const{t}=Q();return bu(),vu({t}),o.useEffect(()=>{gr(t)},[t]),null},yn=({rating:t=0,onRatingChange:e,readonly:r=!1,size:n="w-5 h-5",allowHalfStars:a=!0,maxStars:i=5,showTooltip:c=!0,className:d=""})=>{const[l,u]=o.useState(0),b=o.useCallback((f,v)=>{if(r)return;let x=f+1;if(a){const j=v.currentTarget.getBoundingClientRect(),y=v.clientX-j.left,C=j.width;x=y<C/2?f+.5:f+1}e==null||e(x)},[r,e,a]),g=o.useCallback((f,v)=>{if(r)return;if(!a){u(f+1);return}const x=v.currentTarget.getBoundingClientRect(),j=v.clientX-x.left,y=x.width,k=j<y/2?f+.5:f+1;u(k)},[r,a]),m=o.useCallback(()=>{r||u(0)},[r]),w=f=>{const v=l||t,x=f+1;return v>=x?"full":a&&v>=x-.5?"half":"empty"},h=f=>{if(!c)return"";const v=f+1;return{1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"}[v]||`${v} stars`},p=f=>{const v=w(f),x=!r&&l>0;return s.jsxs("div",{className:`relative cursor-pointer ${r?"cursor-default":""}`,onClick:j=>b(f,j),onMouseMove:j=>g(f,j),title:h(f),children:[s.jsx(Qn,{className:`${n} text-gray-300 transition-colors duration-150`}),s.jsx("div",{className:"absolute top-0 left-0 overflow-hidden transition-all duration-150",style:{width:v==="half"?"50%":v==="full"?"100%":"0%"},children:s.jsx(ea,{className:`${n} transition-colors duration-150 ${x?"text-yellow-400":"text-yellow-500"}`})})]},f)};return s.jsxs("div",{className:`flex items-center space-x-1 ${d}`,onMouseLeave:m,children:[Array.from({length:i},(f,v)=>p(v)),(t>0||l>0)&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600 font-medium",children:[(l||t).toFixed(a?1:0)," / ",i]})]})},ku=({variables:t})=>!t||Object.keys(t).length===0?null:s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-700 message-variables-container",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 message-variables",children:Object.entries(t).map(([e,r])=>s.jsxs("div",{className:"inline-block mr-3 message-variable",children:[s.jsxs("span",{className:"font-medium",children:[e,":"]})," ",r]},e))})}),jn=({content:t})=>{const e=o.useRef(null),[r,n]=o.useState(""),[a,i]=o.useState(0),c=o.useRef(0);return o.useLayoutEffect(()=>{if(!t){n("");return}if(t.length!==c.current)try{gr();const d=qe(t);n(d),c.current=t.length,i(l=>l+1)}catch(d){console.error("Error parsing markdown:",d)}},[t]),s.jsx("div",{ref:e,className:"markdown-content break-words whitespace-normal streaming-markdown",dangerouslySetInnerHTML:{__html:r}},a)};qe.setOptions({breaks:!0,gfm:!0,sanitize:!1});const Su=new In,kt=t=>{if(!t||typeof t!="string")return"";try{return qe(t)}catch(e){return console.error("Error converting markdown to HTML:",e),t}},ba=t=>!t||typeof t!="string"?"":Su.turndown(t),tt=t=>!t||typeof t!="string"?!1:[/^#{1,6}\s+/,/\*\*.*?\*\*/,/\*.*?\*/,/`.*?`/,/```[\s\S]*?```/,/^\s*[-*+]\s+/,/^\s*\d+\.\s+/,/^\s*>\s+/,/\[.*?\]\(.*?\)/].some(r=>r.test(t)),Eu=o.createContext(null),jr={didCatch:!1,error:null};class Cu extends o.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=jr}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(...e){var n,a;const{error:r}=this.state;r!==null&&((a=(n=this.props).onReset)==null||a.call(n,{args:e,reason:"imperative-api"}),this.setState(jr))}componentDidCatch(e,r){var n,a;(a=(n=this.props).onError)==null||a.call(n,e,r)}componentDidUpdate(e,r){var i,c;const{didCatch:n}=this.state,{resetKeys:a}=this.props;n&&r.error!==null&&Nu(e.resetKeys,a)&&((c=(i=this.props).onReset)==null||c.call(i,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(jr))}render(){const{children:e,fallbackRender:r,FallbackComponent:n,fallback:a}=this.props,{didCatch:i,error:c}=this.state;let d=e;if(i){const l={error:c,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")d=r(l);else if(n)d=o.createElement(n,l);else if(a!==void 0)d=a;else throw c}return o.createElement(Eu.Provider,{value:{didCatch:i,error:c,resetErrorBoundary:this.resetErrorBoundary}},d)}}function Nu(t=[],e=[]){return t.length!==e.length||t.some((r,n)=>!Object.is(r,e[n]))}const Lu=({error:t,resetErrorBoundary:e,t:r})=>s.jsxs("div",{className:"border-2 border-red-200 rounded-lg p-6 bg-red-50",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-red-800 font-semibold",children:r?r("errors.componentError","Component Error"):"Component Error"})]}),s.jsx("pre",{className:"text-sm text-red-700 bg-red-100 p-3 rounded mb-4 overflow-auto",children:t.message}),s.jsx("button",{onClick:e,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Try Again"})]}),Mu=({t})=>s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:t?t("common.compiling","Compiling component..."):"Compiling component..."})]}),wa=({jsxCode:t,componentProps:e={},className:r=""})=>{const[n,a]=o.useState(null),[i,c]=o.useState(null),[d,l]=o.useState(!0),{t:u}=e,b=o.useMemo(()=>t,[t]);return o.useEffect(()=>{let g=!0;return(async()=>{if(!(b!=null&&b.trim())){a(null),c(null),l(!1);return}try{l(!0),c(null),(!window.Babel||!window.Babel.transform&&!window.Babel.transformSync)&&await new Promise((y,C)=>{const k=document.querySelector('script[src*="babel"]');if(k&&window.Babel&&(window.Babel.transform||window.Babel.transformSync)){y();return}k&&k.remove();const I=["https://unpkg.com/@babel/standalone/babel.min.js","https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"];let E=0;const O=()=>{if(E>=I.length){C(new Error("Failed to load Babel from all CDN sources"));return}const N=document.createElement("script");N.src=I[E],N.onload=()=>{setTimeout(()=>{window.Babel&&(window.Babel.transform||window.Babel.transformSync)?(console.log("✅ Babel loaded successfully:",{hasTransform:!!window.Babel.transform,hasTransformSync:!!window.Babel.transformSync,availableMethods:Object.keys(window.Babel)}),y()):(console.error("❌ Babel object:",window.Babel),C(new Error("Babel failed to initialize properly")))},150)},N.onerror=()=>{N.remove(),E++,O()},document.head.appendChild(N)};O()});let w=b.trim();/^(import\s|const\s|function\s|class\s|export\s)/m.test(w)?w.includes("export default")||(w+=`

export default UserComponent;`):w=`
function UserComponent(props) {
  const { React, useState, useEffect, useMemo, useCallback, useRef, useId } = props;
  
  return (
    ${w}
  );
}

UserComponent;
          `;let p;try{const y=window.Babel.transformSync||window.Babel.transform;if(!y)throw new Error("No Babel transform method available");p=y(w,{presets:["react"],plugins:[]})}catch(y){throw console.error("Babel transform error:",y),new Error(`Babel transformation failed: ${y.message}`)}if(!p||!p.code)throw new Error("Babel transformation returned no code");let f=p.code;f=f.replace(/(?:^|\n)\s*(?:var|const|let)\s+\w+\s*=\s*require\([^)]+\);?\s*/gm,""),f=f.replace(/(?:^|\n)\s*import\s+.*?from\s+['"][^'"]+['"];?\s*/gm,""),f=f.replace(/export\s+default\s+\w+;?\s*$/,""),f=f.replace(/export\s*\{[^}]*\}.*;?\s*$/,"");const x=new Function("React","useState","useEffect","useMemo","useCallback","useRef","useId","props",`
          try {
            ${f}
            return typeof UserComponent !== 'undefined' ? UserComponent : 
                   typeof module !== 'undefined' && module.exports ? module.exports.default || module.exports :
                   null;
          } catch (error) {
            console.error('Runtime error in user component:', error);
            throw error;
          }
          `)(ee,ee.useState,ee.useEffect,ee.useMemo,ee.useCallback,ee.useRef,ee.useId,e);if(!x)throw new Error("No component was exported from the provided code");const j=y=>{const C={...e,...y,React:ee,useState:ee.useState,useEffect:ee.useEffect,useMemo:ee.useMemo,useCallback:ee.useCallback,useRef:ee.useRef,useId:ee.useId};return ee.createElement(x,C)};g&&(a(()=>j),c(null))}catch(w){console.error("JSX compilation error:",w),g&&(c(w.message||"Failed to compile JSX"),a(null))}finally{g&&l(!1)}})(),()=>{g=!1}},[b,e]),d?s.jsx(Mu,{t:u}):i?s.jsxs("div",{className:"border-2 border-yellow-200 rounded-lg p-6 bg-yellow-50",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("svg",{className:"w-6 h-6 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),s.jsx("h3",{className:"text-yellow-800 font-semibold",children:u("errors.compilationError","Compilation Error")})]}),s.jsx("pre",{className:"text-sm text-yellow-700 bg-yellow-100 p-3 rounded overflow-auto",children:i})]}):n?s.jsx("div",{className:`react-component-container ${r}`,children:s.jsx(Cu,{FallbackComponent:g=>s.jsx(Lu,{...g,t:u}),onReset:()=>{a(null),l(!0)},children:s.jsx(n,{})})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:u("errors.noComponentToRender","No component to render")})},Ru=({componentName:t,data:e,className:r=""})=>{const[n,a]=o.useState(null),[i,c]=o.useState(!0),[d,l]=o.useState(null),{t:u}=Q();o.useEffect(()=>{t&&(async()=>{try{c(!0),l(null);const m=await fetch(`/api/renderers/${t}`);if(!m.ok)throw m.status===404?new Error(`Renderer "${t}" not found`):m.status===403?new Error(`Renderer "${t}" is disabled`):new Error(`Failed to load renderer: ${m.statusText}`);const w=await m.json();if(!w.code)throw new Error(`Renderer "${t}" has no code`);a(w.code)}catch(m){console.error("Error loading custom response renderer:",m),l(m.message)}finally{c(!1)}})()},[t]);const b=o.useMemo(()=>({data:e,t:u,React:ee,useState:o.useState,useEffect:o.useEffect,useMemo:o.useMemo,useCallback:o.useCallback,useRef:o.useRef}),[e,u]);return i?s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:u("common.loading","Loading...")})]}):d?s.jsxs("div",{className:"border-2 border-red-200 rounded-lg p-6 bg-red-50",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("h3",{className:"text-red-800 font-semibold",children:u("errors.rendererError","Renderer Error")})]}),s.jsx("p",{className:"text-sm text-red-700",children:d}),s.jsxs("details",{className:"mt-4",children:[s.jsx("summary",{className:"cursor-pointer text-sm text-red-600 hover:text-red-800",children:u("common.details","Details")}),s.jsxs("pre",{className:"text-xs text-red-700 bg-red-100 p-3 rounded mt-2 overflow-auto",children:["Renderer: ",t,`
`,"Error: ",d,`
`,"Data: ",JSON.stringify(e,null,2)]})]})]}):n?s.jsx("div",{className:r,children:s.jsx(o.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:s.jsx(wa,{jsxCode:n,componentProps:b})})}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:u("errors.noComponentFound","No renderer found")})},Au=({message:t,outputFormat:e="markdown",onDelete:r,onEdit:n,onResend:a,editable:i=!0,appId:c,chatId:d,modelId:l,compact:u=!1,onOpenInCanvas:b,onInsert:g,canvasEnabled:m=!1,app:w=null})=>{const{t:h}=Q(),p=t.role==="user",f=t.error===!0,v=t.variables&&Object.keys(t.variables).length>0,[x,j]=o.useState(!1),[y,C]=o.useState(typeof t.content=="string"?t.content:t.content||""),[k,I]=o.useState(!1),[E,O]=o.useState(!1),[N,M]=o.useState(!1),[_,$]=o.useState(""),[L,S]=o.useState(0),[P,A]=o.useState(!1),[B,D]=o.useState(!1),[z,Z]=o.useState(0),[se,ce]=o.useState(!1),T=o.useRef(null),[H,J]=o.useState(!1),ne=o.useRef(null),Y=t.customResponseRenderer,xe=t.outputFormat;o.useEffect(()=>{gr()},[]),o.useEffect(()=>{const X=ae=>{ne.current&&!ne.current.contains(ae.target)&&J(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]),o.useEffect(()=>{if(e==="markdown"&&!p&&!x&&T.current){const X=T.current.querySelectorAll("a"),ae=window.location.hostname;X.forEach(fe=>{const Re=fe.getAttribute("href");if(Re&&(Re.startsWith("http://")||Re.startsWith("https://")))try{new URL(Re).hostname!==ae&&(fe.setAttribute("target","_blank"),fe.setAttribute("rel","noopener noreferrer"))}catch(ge){console.error("Error parsing URL:",Re,ge)}})}},[e,p,x,t.content]);const F=(X="text")=>{const ae=typeof t.content=="string"?t.content:t.content||"";let fe;switch(X){case"html":fe=tt(ae)?kt(ae):ae;break;case"markdown":fe=tt(ae)?ae:ba(ae);break;default:fe=ae}const Re=navigator.clipboard&&navigator.clipboard.write;let ge;if(X==="html"&&Re){const ke=new ClipboardItem({"text/html":new Blob([fe],{type:"text/html"}),"text/plain":new Blob([ae],{type:"text/plain"})});ge=navigator.clipboard.write([ke])}else ge=navigator.clipboard.writeText(fe);ge.then(()=>{O(!0),setTimeout(()=>O(!1),2e3),J(!1)}).catch(ke=>{console.error("Failed to copy content: ",ke)})},G=()=>{r&&r(t.id)},W=()=>{j(!0),C(typeof t.content=="string"?t.content:t.content||"")},V=(X=!1)=>{a&&a(t.id,void 0,X)},K=()=>{n&&n(t.id,y),j(!1),a&&p&&setTimeout(()=>{console.log("Resending edited message with content:",y),a(t.id,y)},250)},ue=()=>{j(!1),C(typeof t.content=="string"?t.content:t.content||"")},Ee=async X=>{if(X.preventDefault(),!(!L||L<=0)){D(!0);try{const ae=t.messageId||t.id;console.log(`Submitting feedback with exact messageId: ${ae}`),await mo({messageId:ae,appId:c,chatId:d,modelId:l,rating:L,feedback:_,messageContent:t.content.substring(0,300)}),Z(L),A(!0),setTimeout(()=>{M(!1),setTimeout(()=>{A(!1),$("")},300)},1500)}catch(ae){console.error("Error submitting feedback:",ae),alert(h("error.feedbackSubmission","Error submitting feedback. Please try again."))}finally{D(!1)}}},Ie=X=>{S(X),M(!0)},je=()=>{P||S(0),M(!1)},Le=()=>{const X=typeof t.content=="string"?t.content:t.content||"",ae=!!t.imageData||X&&typeof X=="string"&&(X.includes("<img")||X.includes("data:image")),fe=!!t.fileData,Re=ae||fe;if(x)return s.jsxs("div",{className:"w-full",children:[s.jsx("textarea",{value:y,onChange:ge=>C(ge.target.value),className:"w-full p-2 border rounded mb-2 text-gray-800 bg-white",rows:Math.max(3,y.split(`
`).length)}),s.jsxs("div",{className:"flex space-x-2 justify-end",children:[s.jsx("button",{onClick:ue,className:"px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:h("common.cancel")}),s.jsx("button",{onClick:K,className:"px-2 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700",children:h("common.save")})]})]});if(t.loading){const ge=Y||(w==null?void 0:w.customResponseRenderer),ke=xe||e;if(!p&&ke==="json"&&(ge||!X))return s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-sm",children:h("chatMessage.generatingResponse","Generating response...")})]});if(!p&&(ke==="markdown"||ke==="json")){const Te=ke==="json"?`\`\`\`json
${X}
\`\`\``:X;return s.jsxs("div",{className:"flex flex-col",children:[s.jsx(jn,{content:Te}),s.jsxs("div",{className:"flex mt-2",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),s.jsx("span",{className:"ml-1 inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),s.jsx("span",{className:"ml-1 inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})}return s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{children:X}),s.jsx("span",{className:"ml-2 inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),s.jsx("span",{className:"ml-1 inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),s.jsx("span",{className:"ml-1 inline-block w-2 h-2 bg-gray-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})}if(f)return s.jsxs("div",{className:"flex items-center",children:[s.jsx(R,{name:"exclamation-circle",className:"mr-1.5 text-red-500 flex-shrink-0"}),s.jsx("span",{className:"break-all",children:X})]});if(Re&&p)return s.jsx("div",{className:"break-words whitespace-normal",dangerouslySetInnerHTML:{__html:X}});if(!p&&(e==="markdown"||e==="json")){let ge=X;const ke=Y||(w==null?void 0:w.customResponseRenderer),Te=xe||e;if(Te==="json"&&ke){if(t.loading)return s.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),s.jsx("span",{className:"text-sm",children:h("chatMessage.generatingResponse","Generating response...")})]});try{const De=typeof t.content=="string"?JSON.parse(t.content):t.content;return s.jsx(Ru,{componentName:ke,data:De})}catch(De){console.error("Error parsing JSON for custom renderer:",De)}}if(Te==="json"){let De="";try{De=typeof t.content=="string"?JSON.stringify(JSON.parse(t.content),null,2):JSON.stringify(t.content,null,2)}catch{De=typeof t.content=="string"?t.content:JSON.stringify(t.content)}ge=`\`\`\`json
${De}
\`\`\``}return s.jsx(jn,{content:ge})}return s.jsx("div",{className:"break-words whitespace-normal",style:{boxSizing:"content-box",display:"inline-block"},children:X})};return s.jsxs("div",{ref:T,className:`flex flex-col ${p?"items-end":"items-start"} chat-widget-message ${p?"user":"assistant"}`,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[s.jsxs("div",{className:`chat-widget-message-content whitespace-normal ${f?"error":""}`,children:[Le(),p&&v&&s.jsx(ku,{variables:t.variables}),t.images&&t.images.length>0&&s.jsx("div",{className:"mt-3 space-y-2",children:t.images.map((X,ae)=>s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:`data:${X.mimeType||"image/png"};base64,${X.data}`,alt:h("chatMessage.generatedImage",`Generated image ${ae+1}`),className:"max-w-full rounded-lg shadow-md",style:{maxHeight:"512px"}}),s.jsx("button",{onClick:()=>{const fe=document.createElement("a");fe.href=`data:${X.mimeType||"image/png"};base64,${X.data}`,fe.download=`generated-image-${Date.now()}.png`,fe.click()},className:"absolute top-2 right-2 bg-white/90 hover:bg-white p-2 rounded-full shadow-lg transition-colors",title:h("chatMessage.downloadImage","Download image"),children:s.jsx(R,{name:"download",size:"sm"})})]},ae))}),!p&&t.thoughts&&t.thoughts.length>0&&s.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[s.jsx("button",{onClick:()=>ce(!se),className:"underline",children:h(se?"pages.appChat.hideThoughts":"pages.appChat.showThoughts")}),se&&s.jsx("ul",{className:"list-disc pl-4 mt-1 space-y-1",children:t.thoughts.map((X,ae)=>s.jsx("li",{children:typeof X=="string"?X:JSON.stringify(X)},ae))})]})]}),!p&&!f&&!t.loading&&t.finishReason&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[t.finishReason==="length"&&s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"information-circle",size:"sm",className:"text-blue-500"}),s.jsx("button",{onClick:()=>V(!0),className:"underline",children:h("chatMessage.retryMoreTokens","Retry with more tokens")})]}),(t.finishReason==="connection_closed"||t.finishReason==="error")&&s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"exclamation-circle",size:"sm",className:"text-red-500"}),s.jsx("button",{onClick:()=>V(),className:"underline text-red-600",children:h("common.retry","Retry")})]})]}),s.jsx("div",{className:"mt-1 px-1",children:s.jsxs("div",{className:`flex items-center gap-${u?"1":"3"} text-xs transition-opacity duration-200 ${k?"opacity-100":"opacity-0"} text-gray-500`,children:[s.jsxs("div",{className:"relative inline-flex items-center",ref:ne,children:[s.jsx("button",{onClick:()=>F("text"),className:"flex items-center gap-1 hover:text-gray-700 transition-colors duration-150",title:h("pages.appChat.copyToClipboard"),children:E?s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"check",size:"sm"}),!u&&s.jsx("span",{children:h("chatMessage.copied")})]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"copy",size:"sm"}),!u&&s.jsx("span",{children:h("chatMessage.copy")})]})}),s.jsx("button",{onClick:()=>J(!H),className:"ml-1 hover:text-gray-700",title:h("canvas.export.copyOptions","Copy Options"),children:s.jsx(R,{name:"chevron-down",size:"sm"})}),H&&s.jsxs("div",{className:"absolute right-0 mt-1 bg-white border border-gray-200 rounded shadow z-10 text-gray-700",children:[s.jsx("button",{onClick:()=>F("text"),className:"block px-3 py-1 text-sm hover:bg-gray-100 w-full text-left whitespace-nowrap",children:h("canvas.export.copyText","as Text")}),s.jsx("button",{onClick:()=>F("markdown"),className:"block px-3 py-1 text-sm hover:bg-gray-100 w-full text-left whitespace-nowrap",children:h("canvas.export.copyMarkdown","as Markdown")}),s.jsx("button",{onClick:()=>F("html"),className:"block px-3 py-1 text-sm hover:bg-gray-100 w-full text-left whitespace-nowrap",children:h("canvas.export.copyHTML","as HTML")})]})]}),!p&&!f&&m&&b&&s.jsxs("button",{onClick:()=>b(t.content),className:"flex items-center gap-1 hover:text-blue-600 transition-colors duration-150",title:h("chatMessage.openInCanvas","Open in Canvas"),children:[s.jsx(R,{name:"document-text",size:"sm"}),!u&&s.jsx("span",{children:h("chatMessage.openInCanvas","Canvas")})]}),!p&&!f&&m&&g&&s.jsxs("button",{onClick:()=>g(t.content),className:"flex items-center gap-1 hover:text-blue-600 transition-colors duration-150",title:h("canvas.insertIntoDocument","Insert into document"),children:[s.jsx(R,{name:"arrow-right",size:"sm"}),!u&&s.jsx("span",{children:h("canvas.insert","Insert")})]}),p&&i&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:W,className:"flex items-center gap-1 hover:text-gray-700 transition-colors duration-150",title:h("chatMessage.editMessage","Edit message"),children:[s.jsx(R,{name:"edit",size:"sm"}),!u&&s.jsx("span",{children:h("common.edit")})]}),s.jsxs("button",{onClick:V,className:"flex items-center gap-1 hover:text-gray-700 transition-colors duration-150",title:h("chatMessage.resendMessage","Resend message"),children:[s.jsx(R,{name:"refresh",size:"sm"}),!u&&s.jsx("span",{children:h("chatMessage.resend","Resend")})]})]}),s.jsxs("button",{onClick:G,className:"flex items-center gap-1 hover:text-red-500 transition-colors duration-150",title:h("chatMessage.deleteMessage","Delete message"),children:[s.jsx(R,{name:"trash",size:"sm"}),!u&&s.jsx("span",{children:h("common.delete")})]}),!p&&!f&&!t.loading&&s.jsxs(s.Fragment,{children:[!u&&s.jsx("div",{className:"mx-2 h-4 border-l border-gray-300"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yn,{rating:z,onRatingChange:Ie,allowHalfStars:!0,size:"w-4 h-4",showTooltip:!0,className:"flex-shrink-0"}),!u&&s.jsx("span",{className:"text-sm text-gray-600",style:{visibility:z>0?"visible":"hidden"},children:h("feedback.rated","Rated")})]})]})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-6 animate-fade-in mx-4",children:[s.jsx("h3",{className:"text-lg font-medium mb-4",children:h("feedback.ratingHeading","Rate this response")}),s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx(yn,{rating:L,onRatingChange:S,allowHalfStars:!0,size:"w-8 h-8",showTooltip:!0,readonly:P})}),P?s.jsxs("div",{className:"text-center py-4",children:[s.jsx(R,{name:"check-circle",size:"2xl",className:"text-green-500 mx-auto mb-2"}),s.jsx("p",{children:h("feedback.thankYou","Thank you for your feedback!")})]}):s.jsxs("form",{onSubmit:Ee,children:[s.jsx("textarea",{value:_,onChange:X=>$(X.target.value),className:"w-full p-3 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500 mb-4",rows:4,placeholder:h("feedback.commentPlaceholder","Tell us more about your rating (optional)")}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:je,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg transition-colors",disabled:B,children:h("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors flex items-center",disabled:B,children:B?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin h-5 w-5 mr-2 flex items-center justify-center",children:s.jsx(R,{name:"refresh",className:"text-white"})}),h("feedback.sending","Sending...")]}):h("feedback.sendFeedback","Send Feedback")})]})]})]})})]})},Iu=({integration:t,config:e,state:r={},onConnect:n,className:a=""})=>{var w,h,p,f,v;const{t:i,i18n:c}=Q(),[d,l]=o.useState(!1),u=((w=c.language)==null?void 0:w.split("-")[0])||"en";if(!t||!e)return null;const b=()=>{n?n(t):window.location.href=e.authUrl},g=((h=e.description)==null?void 0:h[u])||((p=e.description)==null?void 0:p.en)||"",m=((f=e.features)==null?void 0:f[u])||((v=e.features)==null?void 0:v.en)||[];return s.jsxs("div",{className:`bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-4 shadow-sm ${a}`,children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(R,{name:e.icon||"link",className:"w-6 h-6 text-white"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i(`integrations.${t}.connectionRequired`,`Connect to ${e.name}`)}),m.length>0&&s.jsx("button",{onClick:()=>l(!d),className:"text-blue-600 hover:text-blue-700 p-1",title:d?"Collapse":"Learn more",children:s.jsx(R,{name:d?"chevron-up":"chevron-down",className:"w-5 h-5"})})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g||i(`integrations.${t}.connectionDescription`,`Link your ${e.name} account to access additional features.`)}),d&&m.length>0&&s.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:i(`integrations.${t}.whatCanYouDo`,`What you can do with ${e.name} integration:`)}),s.jsx("ul",{className:"text-sm text-gray-700 space-y-1",children:m.map((x,j)=>s.jsxs("li",{className:"flex items-center",children:[s.jsx(R,{name:"check",className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),x]},j))}),s.jsx("div",{className:"mt-3 p-2 bg-yellow-50 rounded border-l-4 border-yellow-400",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx(R,{name:"lock",className:"w-4 h-4 inline mr-1"}),i(`integrations.${t}.securityNote`,"Secure OAuth connection - you control your permissions and can disconnect anytime.")]})})]}),r.error&&s.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:[s.jsx(R,{name:"warning",className:"w-4 h-4 inline mr-1"}),r.error]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(R,{name:"info",className:"w-4 h-4 mr-1"}),i(`integrations.${t}.redirectNote`,`You'll be redirected to ${e.name} to authorize access`)]}),s.jsx("button",{onClick:b,disabled:r.connecting,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-md font-medium transition-colors flex items-center",children:r.connecting?s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"spinner",className:"w-4 h-4 mr-2 animate-spin"}),i(`integrations.${t}.connecting`,"Connecting...")]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"link",className:"w-4 h-4 mr-2"}),i(`integrations.${t}.connect`,`Connect ${e.name} Account`)]})})]})]})},Tu=({requiredIntegrations:t=[],onConnect:e,className:r=""})=>t.length?s.jsx("div",{className:`integration-auth-prompts ${r}`,children:t.map(({id:n,config:a,state:i})=>s.jsx(Iu,{integration:n,config:a,state:i,onConnect:e},n))}):null,At=({messages:t,outputFormat:e="markdown",onDelete:r,onEdit:n,onResend:a,appId:i,chatId:c,modelId:d,editable:l=!1,compact:u=!1,onOpenInCanvas:b,onInsert:g,canvasEnabled:m=!1,requiredIntegrations:w=[],onConnectIntegration:h,app:p=null})=>{var C,k,I;const f=o.useRef(null),{uiConfig:v}=Ue(),x=((C=v==null?void 0:v.icons)==null?void 0:C.assistantMessage)||"apps-svg-logo",j=((k=v==null?void 0:v.icons)==null?void 0:k.userMessage)||"user",y=((I=v==null?void 0:v.icons)==null?void 0:I.errorMessage)||"exclamation-circle";return o.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t]),t.length===0?null:s.jsx("div",{ref:f,className:"flex-1 mb-4 p-4 overflow-y-auto space-y-4 rounded-lg",children:t.map((E,O)=>s.jsxs("div",{children:[s.jsxs("div",{className:`flex gap-3 ${E.role==="user"?"flex-row-reverse":"flex-row"}`,children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:E.role==="assistant"?s.jsx(R,{name:x,size:"2xl",className:"text-blue-500"}):E.role==="user"?s.jsx(R,{name:j,size:"xl",className:"text-gray-500"}):s.jsx(R,{name:y,size:"2xl",className:"text-yellow-500"})}),s.jsx("div",{className:`max-w-[80%] ${E.role==="user",""}`,children:s.jsx(Au,{message:E,outputFormat:e,onDelete:r,onEdit:n,onResend:a,editable:l,appId:i,chatId:c,modelId:d,compact:u,onOpenInCanvas:b,onInsert:g,canvasEnabled:m,app:p})})]}),O===t.length-1&&E.role==="assistant"&&w.length>0&&s.jsx("div",{className:"mt-4 ml-12",children:s.jsx(Tu,{requiredIntegrations:w,onConnect:h})})]},E.id))})},$u=({starterPrompts:t=[],onSelectPrompt:e})=>{const{t:r,i18n:n}=Q();return s.jsxs("div",{className:"text-center text-gray-500 space-y-6 w-full",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(R,{name:"light-bulb",size:"2xl",className:"mx-auto mb-3 text-indigo-400"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-1",children:r("pages.appChat.starterPromptsTitle","Starter Prompts")}),s.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto md:px-4",children:r("pages.appChat.starterPromptsSubtitle","Choose a prompt below to get started quickly")})]}),s.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3 w-full max-w-4xl mx-auto px-4 pb-4",children:t.map((a,i)=>s.jsxs("button",{type:"button",className:"group relative p-4 text-left bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md hover:border-indigo-300 transition-all duration-200 transform hover:-translate-y-0.5 h-full min-h-[100px] flex flex-col",onClick:()=>e&&e({...a,message:q(a.message,n.language)}),children:[s.jsxs("div",{className:"flex items-start space-x-3 h-full",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center group-hover:bg-indigo-200 transition-colors mt-0.5",children:s.jsx(R,{name:"sparkles",size:"sm",className:"text-indigo-600"})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-start",children:[s.jsx("p",{className:"font-semibold text-gray-900 text-sm leading-5 mb-1",children:q(a.title,n.language)}),s.jsx("p",{className:"text-xs text-gray-500 leading-4 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:q(a.description||a.message,n.language)})]})]}),s.jsx("div",{className:"absolute inset-0 rounded-xl border border-transparent group-hover:border-indigo-200 transition-colors pointer-events-none"})]},i))})]})},Fu=({welcomeMessage:t})=>{const{t:e}=Q();let r,n;typeof t=="object"&&t!==null?(r=t.title||"",n=t.subtitle||""):typeof t=="string"?(r=t,n=e("pages.appChat.noMessagesSubtitle","Start a conversation by sending a message!")):(r=e("pages.appChat.noMessagesTitle","Welcome!"),n=e("pages.appChat.noMessagesSubtitle","Start a conversation by sending a message!"));const a=n?qe.parseInline(n):"";return s.jsx("div",{className:"text-center text-gray-500 space-y-6 w-full",children:s.jsxs("div",{className:"px-4",children:[s.jsx(R,{name:"chat-bubble",size:"3xl",className:"mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:r}),s.jsx("p",{className:"text-sm max-w-md mx-auto",dangerouslySetInnerHTML:{__html:a}})]})})},Pu=()=>{const{t}=Q();return s.jsx("div",{className:"text-center text-gray-500 space-y-6 w-full",children:s.jsxs("div",{className:"px-4",children:[s.jsx(R,{name:"chat-bubble",size:"3xl",className:"mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("pages.appChat.noMessagesTitle","No Messages Yet")}),s.jsx("p",{className:"text-sm max-w-md mx-auto",children:t("pages.appChat.noMessagesSubtitle","Start a conversation by sending a message!")})]})})},kn=({variables:t,setVariables:e,localizedVariables:r,className:n=""})=>{const{t:a}=Q();return!r||r.length===0?null:s.jsx("div",{className:`space-y-3 ${n}`,children:r.map(i=>s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("label",{className:"mb-1 text-sm font-medium text-gray-700",children:[i.localizedLabel,i.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),i.predefinedValues?s.jsxs("select",{value:t[i.name]||"",onChange:c=>e({...t,[i.name]:c.target.value}),className:"p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",required:i.required,children:[s.jsx("option",{value:"",children:a("variables.selectLabel",{label:i.localizedLabel})}),i.predefinedValues.map(c=>s.jsx("option",{value:c.value,children:c.localizedLabel},c.value))]}):i.type==="text"?s.jsx("textarea",{autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true",value:t[i.name]||"",onChange:c=>e({...t,[i.name]:c.target.value}),rows:4,className:"p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",placeholder:i.localizedPlaceholder||a("variables.enterLabel",{label:i.localizedLabel}),required:i.required}):s.jsx("input",{autoComplete:"off","data-lpignore":"true","data-1p-ignore":"true",type:"text",value:t[i.name]||"",onChange:c=>e({...t,[i.name]:c.target.value}),className:"p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",placeholder:i.localizedPlaceholder||a("variables.enterLabel",{label:i.localizedLabel}),required:i.required}),i.localizedDescription&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:i.localizedDescription})]},i.name))})},Ou=({messages:t=[],settings:e={},onClose:r,appId:n,chatId:a})=>{const{t:i,i18n:c}=Q(),{uiConfig:d}=Ue(),l=c.language||"en",[u,b]=o.useState(!1),[g,m]=o.useState({template:"default",watermark:{text:"iHub Apps",position:"bottom-right",opacity:.5}}),[w,h]=o.useState(!1),p=()=>({model:e.model,style:e.style,outputFormat:e.outputFormat,temperature:e.temperature,variables:e.variables}),f=async v=>{v==="pdf"&&h(!0);try{const x=t.filter(k=>!k.isGreeting),j=p(),y=d!=null&&d.title?q(d.title,l):"iHub Apps",C={appId:n,chatId:a,appName:y};v==="pdf"&&(C.template=g.template,C.watermark=g.watermark),await io(x,j,v,C),r==null||r()}catch(x){console.error(`${v.toUpperCase()} export failed:`,x)}finally{v==="pdf"&&h(!1)}};return s.jsxs("div",{className:"absolute right-full top-0 mr-2 bg-white border border-gray-200 rounded shadow-lg z-20",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>b(!u),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between gap-2 whitespace-nowrap",disabled:w,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(R,{name:"file-text",size:"sm"}),w?i("pages.appChat.export.exportingPDF","Exporting PDF..."):i("pages.appChat.export.toPDF","as PDF")]}),s.jsx(R,{name:"chevron-right",size:"sm",className:`transition-transform ${u?"rotate-90":""}`})]}),u&&s.jsx("div",{className:"absolute left-full top-0 ml-2 bg-white border border-gray-200 rounded shadow-lg min-w-[300px] p-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:i("pages.appChat.export.template","Template")}),s.jsxs("select",{value:g.template,onChange:v=>m(x=>({...x,template:v.target.value})),className:"w-full text-sm border border-gray-300 rounded px-2 py-1",children:[s.jsx("option",{value:"default",children:i("pages.appChat.export.templateDefault","Default")}),s.jsx("option",{value:"professional",children:i("pages.appChat.export.templateProfessional","Professional")}),s.jsx("option",{value:"minimal",children:i("pages.appChat.export.templateMinimal","Minimal")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:i("pages.appChat.export.watermarkText","Watermark Text")}),s.jsx("input",{type:"text",value:g.watermark.text,onChange:v=>m(x=>({...x,watermark:{...x.watermark,text:v.target.value}})),className:"w-full text-sm border border-gray-300 rounded px-2 py-1",placeholder:"Enter watermark text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:i("pages.appChat.export.watermarkPosition","Position")}),s.jsxs("select",{value:g.watermark.position,onChange:v=>m(x=>({...x,watermark:{...x.watermark,position:v.target.value}})),className:"w-full text-sm border border-gray-300 rounded px-2 py-1",children:[s.jsx("option",{value:"bottom-right",children:i("pages.appChat.export.bottomRight","Bottom Right")}),s.jsx("option",{value:"bottom-left",children:i("pages.appChat.export.bottomLeft","Bottom Left")}),s.jsx("option",{value:"bottom-center",children:i("pages.appChat.export.bottomCenter","Bottom Center")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:[i("pages.appChat.export.watermarkOpacity","Opacity")," (",Math.round(g.watermark.opacity*100),"%)"]}),s.jsx("input",{type:"range",min:"0.1",max:"1.0",step:"0.1",value:g.watermark.opacity,onChange:v=>m(x=>({...x,watermark:{...x.watermark,opacity:parseFloat(v.target.value)}})),className:"w-full"})]}),s.jsx("div",{className:"pt-2 border-t border-gray-200",children:s.jsx("button",{onClick:()=>f("pdf"),disabled:w,className:"w-full bg-blue-600 text-white text-sm px-3 py-2 rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:w?i("pages.appChat.export.generating","Generating..."):i("pages.appChat.export.generatePDF","Generate PDF")})})]})})]}),s.jsx("div",{className:"border-t border-gray-200"}),s.jsxs("button",{onClick:()=>f("json"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"})," ",i("pages.appChat.export.toJSON","as JSON")]}),s.jsxs("button",{onClick:()=>f("jsonl"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"})," ",i("pages.appChat.export.toJSONL","as JSONL")]}),s.jsxs("button",{onClick:()=>f("markdown"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"})," ",i("pages.appChat.export.toMarkdown","as Markdown")]}),s.jsxs("button",{onClick:()=>f("html"),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"})," ",i("pages.appChat.export.toHTML","as HTML")]})]})},Du=({onClearChat:t,onToggleConfig:e,onShare:r,showShareButton:n=!1,showConfigButton:a=!0,showClearButton:i=!0,showParametersButton:c=!1,parametersVisible:d=!1,messages:l=[],exportSettings:u={},onToggleCanvas:b,onToggleParameters:g,showCanvasButton:m=!1,appId:w,chatId:h})=>{const{t:p}=Q(),f=rt(),{user:v}=St(),[x,j]=o.useState(!1),[y,C]=o.useState(!1),k=o.useRef(null);return o.useEffect(()=>{const I=E=>{k.current&&!k.current.contains(E.target)&&(j(!1),C(!1))};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),s.jsxs("div",{className:"relative",ref:k,children:[s.jsx("button",{onClick:()=>j(I=>!I),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded-full flex items-center justify-center h-10 w-10",title:p("common.menu","Menu"),"aria-label":p("common.menu","Menu"),children:s.jsx(R,{name:"menu",size:"sm"})}),x&&s.jsxs("div",{className:"absolute right-0 mt-2 bg-white border border-gray-200 rounded shadow-lg z-20 min-w-40",children:[(v==null?void 0:v.isAdmin)&&w&&s.jsxs("button",{onClick:()=>{f(`/admin/apps/${w}`),j(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"edit",size:"sm"})," ",p("pages.appChat.editApp","Edit App")]}),a&&s.jsxs("button",{onClick:()=>{e==null||e(),j(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"settings",size:"sm"})," ",p("settings.title")]}),m&&s.jsxs("button",{onClick:()=>{b==null||b(),j(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"document-text",size:"sm"})," ",p("pages.appChat.canvas","Canvas")]}),i&&s.jsxs("button",{onClick:()=>{t==null||t(),j(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"trash",size:"sm"})," ",p("pages.appChat.clear")]}),c&&s.jsxs("button",{onClick:()=>{g==null||g(),j(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap ${d?"bg-gray-100":""}`,"aria-pressed":d,children:[s.jsx(R,{name:"sliders",size:"sm"})," ",p("pages.appChat.parameters")]}),n&&s.jsxs("button",{onClick:()=>{r==null||r(),j(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"share",size:"sm"})," ",p("pages.appChat.share","Share")]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>C(I=>!I),className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center gap-2 whitespace-nowrap",children:[s.jsx(R,{name:"download",size:"sm"}),p("pages.appChat.export.conversation","Export")]}),y&&s.jsx(Ou,{messages:l,settings:u,onClose:()=>C(!1),appId:w,chatId:h})]})]})]})},_u=({title:t,description:e,color:r,icon:n,showClearButton:a=!1,showConfigButton:i=!0,showParametersButton:c=!1,showShareButton:d=!1,showCanvasButton:l=!1,showBackToChatButton:u=!1,parametersVisible:b=!1,onClearChat:g,onToggleConfig:m,onToggleParameters:w,onToggleCanvas:h,onShare:p,currentLanguage:f,isMobile:v=!1,messages:x=[],exportSettings:j={},appId:y,chatId:C})=>{const{t:k}=Q(),I=rt(),E=s.jsx(R,{name:"chat",className:"text-white"}),[O,N]=o.useState(!1);o.useEffect(()=>{if(v&&O){const _=setTimeout(()=>N(!1),3e3);return()=>clearTimeout(_)}},[v,O]);const M=()=>{I("/")};return s.jsx("div",{className:"flex flex-col mb-4 pb-4 border-b",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:M,className:"mr-3 bg-gray-200 hover:bg-gray-300 text-gray-800 p-2 rounded-full flex items-center justify-center h-10 w-10",title:k("pages.appChat.backToApps"),"aria-label":k("common.backToAppsList","Back to apps list"),children:s.jsx(R,{name:"arrowLeft",size:"sm"})}),s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:r},children:n||E}),s.jsxs("div",{className:"relative",children:[s.jsxs("h1",{className:"text-2xl font-bold leading-tight flex items-center",children:[typeof t=="object"?q(t,f):t,v&&e&&s.jsx("button",{className:"ml-1 text-gray-500",onClick:()=>N(_=>!_),onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),"aria-label":k("common.appInfo","App info"),title:typeof e=="object"?q(e,f):e,children:s.jsx(R,{name:"information-circle",size:"sm"})})]}),!v&&s.jsx("p",{className:"text-gray-600 text-sm",children:typeof e=="object"?q(e,f):e}),v&&O&&s.jsx("div",{className:"absolute z-10 mt-2 p-2 bg-white border rounded shadow text-xs max-w-xs",children:typeof e=="object"?q(e,f):e})]})]}),s.jsxs("div",{className:"flex flex-col items-start space-y-2 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-2",children:[u&&s.jsxs("button",{onClick:h,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded flex items-center",title:k("pages.appCanvas.backToChat","Back to Chat"),children:[s.jsx(R,{name:"chat",size:"sm",className:"sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:k("pages.appCanvas.backToChat","Back to Chat")})]}),l&&s.jsxs("button",{onClick:h,className:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700 px-3 py-1 rounded flex items-center",title:k("pages.appChat.canvasMode","Canvas Mode"),children:[s.jsx(R,{name:"document-text",size:"sm",className:"sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:k("pages.appChat.canvas","Canvas")})]}),s.jsx(Du,{onClearChat:g,onToggleConfig:m,onShare:p,showShareButton:d,showConfigButton:i,showClearButton:a,messages:x,exportSettings:j,onToggleCanvas:h,showCanvasButton:l,onToggleParameters:w,showParametersButton:c,parametersVisible:b,appId:y,chatId:C})]})]})})},Uu=({app:t,models:e,styles:r,selectedModel:n,selectedStyle:a,selectedOutputFormat:i,sendChatHistory:c,temperature:d,thinkingEnabled:l,thinkingBudget:u,thinkingThoughts:b,onModelChange:g,onStyleChange:m,onOutputFormatChange:w,onSendChatHistoryChange:h,onTemperatureChange:p,onThinkingEnabledChange:f,onThinkingBudgetChange:v,onThinkingThoughtsChange:x,currentLanguage:j})=>{var N,M,_,$,L,S,P,A,B,D,z,Z,se,ce,T,H,J,ne,Y,xe,F,G;const{t:y}=Q();let k=t!=null&&t.allowedModels&&t.allowedModels.length>0?e.filter(W=>t.allowedModels.includes(W.id)):e;if(t!=null&&t.tools&&t.tools.length>0&&(k=k.filter(W=>W.supportsTools)),(M=(N=t==null?void 0:t.settings)==null?void 0:N.model)!=null&&M.filter){const W=t.settings.model.filter;k=k.filter(V=>{for(const[K,ue]of Object.entries(W))if(V[K]!==ue)return!1;return!0})}const I=e.find(W=>W.id===n),E=((_=I==null?void 0:I.thinking)==null?void 0:_.enabled)===!0,O=[{id:"markdown",name:y("appConfig.markdown","Markdown")},{id:"text",name:y("appConfig.plainText","Plain Text")}];return t!=null&&t.outputSchema&&O.push({id:"json",name:y("appConfig.json","JSON")}),(($=t==null?void 0:t.settings)==null?void 0:$.enabled)===!1?s.jsx("div",{className:"text-center text-gray-500 italic p-4",children:y("appConfig.settingsDisabled","Settings have been disabled for this application.")}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[((S=(L=t==null?void 0:t.settings)==null?void 0:L.model)==null?void 0:S.enabled)!==!1&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:y("appConfig.model","Model")}),s.jsx("select",{value:n,onChange:W=>g(W.target.value),className:"w-full p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",children:k.map(W=>{const V=q(W.name,j),K=q(W.description,j);return s.jsxs("option",{value:W.id,children:[V,K?` - ${K}`:""]},W.id)})})]}),((A=(P=t==null?void 0:t.settings)==null?void 0:P.style)==null?void 0:A.enabled)!==!1&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:y("responseStyles.title","Response Style")}),s.jsx("select",{value:a,onChange:W=>m(W.target.value),className:"w-full p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(r).map(([W])=>s.jsx("option",{value:W,children:y(`responseStyles.${W}`,W.charAt(0).toUpperCase()+W.slice(1))},W))})]}),((D=(B=t==null?void 0:t.settings)==null?void 0:B.temperature)==null?void 0:D.enabled)!==!1&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[y("models.temperature"),": ",d]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:W=>p(parseFloat(W.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:y("common.precise")}),s.jsx("span",{children:y("common.creative")})]})]}),((Z=(z=t==null?void 0:t.settings)==null?void 0:z.outputFormat)==null?void 0:Z.enabled)!==!1&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:y("models.outputFormat","Output Format")}),s.jsx("select",{value:i,onChange:W=>w(W.target.value),className:"w-full p-2 border rounded focus:ring-indigo-500 focus:border-indigo-500",children:O.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))})]}),((ce=(se=t==null?void 0:t.settings)==null?void 0:se.chatHistory)==null?void 0:ce.enabled)!==!1&&s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:W=>h(W.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4 mr-2"}),y("appConfig.includeChatHistory","Include chat history in requests")]})}),E&&((H=(T=t==null?void 0:t.settings)==null?void 0:T.thinking)==null?void 0:H.enabled)!==!1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-1 md:col-span-3 mt-4 mb-2",children:s.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:y("appConfig.thinkingSettings","Thinking Settings")})}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:l??((J=t==null?void 0:t.thinking)==null?void 0:J.enabled)??!0,onChange:W=>f==null?void 0:f(W.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4 mr-2"}),y("appConfig.enableThinking","Enable thinking mode")]})}),(l??((ne=t==null?void 0:t.thinking)==null?void 0:ne.enabled)??!0)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:y("appConfig.thinkingBudget","Thinking Budget")}),s.jsx("input",{type:"number",min:"0",max:"32768",step:"1024",value:u??((Y=t==null?void 0:t.thinking)==null?void 0:Y.budget)??((xe=I==null?void 0:I.thinking)==null?void 0:xe.budget)??8192,onChange:W=>v==null?void 0:v(parseInt(W.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y("appConfig.thinkingBudgetHelp","Maximum tokens for thinking (0 = unlimited)")})]}),s.jsx("div",{className:"flex items-center",children:s.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b??((F=t==null?void 0:t.thinking)==null?void 0:F.thoughts)??((G=I==null?void 0:I.thinking)==null?void 0:G.thoughts)??!0,onChange:W=>x==null?void 0:x(W.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 h-4 w-4 mr-2"}),y("appConfig.showThoughts","Show thinking process")]})})]})]})]})},va=({app:t,appId:e,chatId:r,mode:n="chat",messages:a=[],editorContent:i="",variables:c={},onClearChat:d,onClearCanvas:l,currentLanguage:u,models:b,styles:g,selectedModel:m,selectedStyle:w,selectedOutputFormat:h,sendChatHistory:p,temperature:f,thinkingEnabled:v,thinkingBudget:x,thinkingThoughts:j,onModelChange:y,onStyleChange:C,onOutputFormatChange:k,onSendChatHistoryChange:I,onTemperatureChange:E,onThinkingEnabledChange:O,onThinkingBudgetChange:N,onThinkingThoughtsChange:M,showConfig:_,onToggleConfig:$,onToggleParameters:L,showParameters:S,onShare:P,showShareButton:A=!1})=>{var H;const B=rt(),{t:D}=Q(),z=()=>{B(n==="chat"?`/apps/${e}/canvas`:`/apps/${e}`)},Z=()=>{n==="canvas"?l==null||l():d==null||d()};o.useEffect(()=>{if(!_)return;const J=ne=>{ne.key==="Escape"&&$()};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[_,$]);const se=n==="canvas"?a.length>0||i.trim():a.length>0,ce=s.jsx(R,{name:n==="canvas"?"edit":"chat",size:"lg",className:"text-white"}),T={model:m,style:w,outputFormat:h,temperature:f,variables:c};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(_u,{title:t==null?void 0:t.name,description:t==null?void 0:t.description,color:t==null?void 0:t.color,icon:ce,showClearButton:se,showConfigButton:!0,showParametersButton:n==="chat"&&(t==null?void 0:t.variables)&&t.variables.length>0,showCanvasButton:n==="chat"&&((H=t==null?void 0:t.features)==null?void 0:H.canvas)===!0,showBackToChatButton:n==="canvas",onClearChat:Z,onToggleConfig:$,onToggleCanvas:z,onToggleParameters:L,currentLanguage:u,isMobile:n==="chat"?window.innerWidth<768:void 0,parametersVisible:S,onShare:P,showShareButton:A,messages:a,exportSettings:T,appId:e,chatId:r})}),_&&s.jsxs("div",{className:`relative flex-shrink-0 bg-white p-4 rounded-lg mb-4 shadow-sm border border-gray-200 ${n==="canvas"?"canvas-config-panel":"bg-gray-100"}`,children:[s.jsx("button",{onClick:$,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 p-1","aria-label":D("common.close","Close"),children:s.jsx(R,{name:"close",size:"lg",className:"text-current"})}),s.jsx(Uu,{app:t,models:b,styles:g,selectedModel:m,selectedStyle:w,selectedOutputFormat:h,sendChatHistory:p,temperature:f,thinkingEnabled:v,thinkingBudget:x,thinkingThoughts:j,onModelChange:y,onStyleChange:C,onOutputFormatChange:k,onSendChatHistoryChange:I,onTemperatureChange:E,onThinkingEnabledChange:O,onThinkingBudgetChange:N,onThinkingThoughtsChange:M,currentLanguage:u})]})]})},Xt=(t,e)=>{const r={};return t&&t.variables&&Array.isArray(t.variables)&&t.variables.forEach(n=>{if(n.predefinedValues&&n.defaultValue)if(typeof n.defaultValue=="object"){const a=q(n.defaultValue,e),i=n.predefinedValues.find(c=>q(c.label,e)===a);r[n.name]=i?i.value:a}else r[n.name]=n.defaultValue;else if(n.type==="select"&&n.options){let a=null;n.defaultValue&&(a=n.options.find(c=>c.value===n.defaultValue));const i=typeof n.label=="object"?q(n.label,e):n.label||n.name;r[n.name]=a?a.value:i}else{const a=typeof n.defaultValue=="object"?q(n.defaultValue,e):n.defaultValue||"";r[n.name]=a}}),r},Sn=(t,e,r)=>{const n=(t==null?void 0:t.starterPrompts)||[];return n.length>0?s.jsx($u,{starterPrompts:n,onSelectPrompt:r}):e?s.jsx(Fu,{welcomeMessage:e}):s.jsx(Pu,{})},zu=({preloadedApp:t=null})=>{var Dr,_r,Ur,zr,Br,Vr,Hr,Wr,Zr,qr,Gr,Jr,Kr,Xr,Yr,Qr,es,ts,rs,ss,ns,as,os,is,ls,cs,ds,us,ms,hs,gs,fs,ps,xs,bs,ws,vs;const{t:e,i18n:r}=Q(),n=r.language,{appId:a}=ir(),i=rt(),[c]=or(),d=c.get("prefill")||"",[l,u]=o.useState(t),[b,g]=o.useState(d),[m,w]=o.useState(!t),[h,p]=o.useState(null),[f,v]=o.useState(!1),[x,j]=o.useState({}),[y,C]=o.useState(!1),[k,I]=o.useState(!1),[,E]=o.useState(4096),O=((Dr=l==null?void 0:l.features)==null?void 0:Dr.shortLinks)!==!1,{selectedModel:N,selectedStyle:M,selectedOutputFormat:_,temperature:$,sendChatHistory:L,thinkingEnabled:S,thinkingBudget:P,thinkingThoughts:A,models:B,styles:D,setSelectedModel:z,setSelectedStyle:Z,setSelectedOutputFormat:se,setTemperature:ce,setSendChatHistory:T,setThinkingEnabled:H,setThinkingBudget:J,setThinkingThoughts:ne,modelsLoading:Y}=ua(a,l);o.useEffect(()=>{if(!l||Y)return;const U={};let te=!1;const we=c.get("model");we&&(z(we),te=!0);const Ae=c.get("style");Ae&&(Z(Ae),te=!0);const Be=c.get("outfmt");Be&&(se(Be),te=!0);const Fe=c.get("temp");Fe&&(ce(parseFloat(Fe)),te=!0);const de=c.get("history");if(de&&(T(de==="true"),te=!0),c.forEach((he,pe)=>{pe.startsWith("var_")&&(U[pe.slice(4)]=he,te=!0)}),Object.keys(U).length&&j(he=>({...he,...U})),te){const he=new URLSearchParams(c);["model","style","outfmt","temp","history","prefill",...Object.keys(U).map(pe=>`var_${pe}`)].forEach(pe=>he.delete(pe)),i(`${window.location.pathname}?${he.toString()}`,{replace:!0})}},[l,Y,i,c,z,se,Z,T,ce]);const[xe,F]=o.useState(!1),[G,W]=o.useState({});o.useEffect(()=>{vd(a)},[a]);const V=Fd(),K=Pd(),{monitorChatMessages:ue,connectIntegration:Ee,getRequiredIntegrations:Ie}=Od(),je=o.useRef(null),Le=o.useRef(null),X=o.useRef(nr(a));o.useEffect(()=>{X.current=nr(a)},[a]);const ae=o.useCallback((U,te)=>{var Ae,Be,Fe;if(console.log("🔍 shouldAutoRedirectToCanvas check:",{hasResponse:!!U,responseLength:(U==null?void 0:U.length)||0,hasUserInput:!!te,hasApp:!!l,canvasEnabled:(Ae=l==null?void 0:l.features)==null?void 0:Ae.canvas}),!U||!te||!l)return!1;const we=U.length>200&&((Be=l==null?void 0:l.features)==null?void 0:Be.canvas)===!0;return console.log("📋 Auto-redirect decision:",{shouldRedirect:we,responseLength:U.length,canvasEnabled:(Fe=l==null?void 0:l.features)==null?void 0:Fe.canvas}),we},[l]),fe=o.useCallback(U=>{if(!U||!l)return;const te=encodeURIComponent(U);i(`/apps/${a}/canvas?content=${te}`)},[i,a,l]),Re=o.useCallback((U,te)=>{var we;console.log("🎯 handleMessageComplete called:",{responseLength:(U==null?void 0:U.length)||0,userInput:te,canvasEnabled:(we=l==null?void 0:l.features)==null?void 0:we.canvas,shouldRedirect:ae(U,te)}),ae(U,te)&&(console.log("🎨 Auto-redirecting to canvas mode with response:",{responseLength:U==null?void 0:U.length,userInput:te}),fe(U))},[ae,fe,l]),{messages:ge,processing:ke,sendMessage:Te,resendMessage:De,deleteMessage:nt,editMessage:at,clearMessages:_t,cancelGeneration:Ge,addSystemMessage:fr}=la({appId:a,chatId:X.current,onMessageComplete:Re}),ot=o.useMemo(()=>{if(!(l!=null&&l.tools))return[];const U=[];return l.tools.some(te=>te==="jira")&&U.push("jira"),U},[l==null?void 0:l.tools]);o.useEffect(()=>{ue(ge,ot)},[ge,ot,ue]);const Je=Ie(),{handleVoiceInput:it,handleVoiceCommand:lt}=ca({messages:ge,clearChat:()=>{if(Ge(),_t(),X.current=ar(a),g(""),setSelectedImage(null),showImageUploader&&setShowImageUploader(!1),V.clearSelectedFile(),showFileUploader&&setShowFileUploader(!1),l&&l.variables){const U=Xt(l,n);j(U),Qt(a,{selectedModel:N,selectedStyle:M,selectedOutputFormat:_,sendChatHistory:L,temperature:$,variables:U})}},sendMessage:U=>{g(U),setTimeout(()=>{const te=document.querySelector("form");if(te){const we=new Event("submit",{cancelable:!0,bubbles:!0});te.dispatchEvent(we)}},0)},isProcessing:ke,currentText:b,setInput:g,onConfirmClear:()=>window.confirm(e("pages.appChat.confirmClear","Are you sure you want to clear the entire chat history?"))});o.useEffect(()=>{let U=!0;return(async()=>{if(t){if(t.variables&&U){const we=Xt(t,n);U&&j(we)}return}try{if(w(!0),await new Promise(Ae=>setTimeout(Ae,100)),!U)return;console.log("Fetching app data for:",a);const we=await cr(a);if(U&&E(we.tokenLimit||4096),!U)return;if(U&&u(we),we.variables&&U){const Ae=Xt(we,n);U&&j(Ae)}U&&p(null)}catch(we){console.error("Error loading app data:",we),U&&p(e("error.failedToLoadApp","Failed to load application data. Please try again later."))}finally{U&&w(!1)}})(),()=>{U=!1}},[a,n,e,t]),o.useEffect(()=>{if(l&&!m){const U=da(a);U&&U.variables&&(j(U.variables),console.log("Restored app variables from sessionStorage:",U.variables))}},[l,m,a]),o.useEffect(()=>{l&&!m&&Qt(a,{variables:x})},[l,m,a,x]);const ct=o.useMemo(()=>{if(!l||m||ge.length>0||l.starterPrompts&&l.starterPrompts.length>0)return null;const U=n.split("-")[0].toLowerCase();let te=null;return l.greeting&&(te=typeof l.greeting=="object"?l.greeting[U]||l.greeting.en:l.greeting),te},[l,m,n,ge.length]),Et=o.useMemo(()=>!(!l||m||ge.length>0),[l,m,ge.length]),dt=async()=>{const U=await K.handleMagicPrompt(b,l,a);U&&g(U)},ut=()=>{const U=K.handleUndoMagicPrompt();U!==null&&g(U)},mt=U=>{g(U.target.value)},ht=U=>{U&&typeof U=="object"?(U.message&&g(U.message),U.variables&&j(te=>({...te,...U.variables})),U.autoSend?setTimeout(()=>{Le.current&&Le.current.requestSubmit()},0):je.current&&je.current.focus()):(g(U),je.current&&je.current.focus())},gt=U=>{nt(U)},ft=(U,te)=>{at(U,te)},Ye=(U,te,we=!1)=>{console.log("🔄 handleResendMessage called with useMaxTokens:",we);const Ae=De(U,te),{content:Be,variables:Fe,imageData:de,fileData:he}=Ae;if(!(!Be&&!de&&!he&&!(l!=null&&l.allowEmptyContent))){if(g(Be||""),Fe&&j(Fe),V.clearSelectedFile(),de||he){let pe=[];de&&(Array.isArray(de)?pe=[...pe,...de]:pe.push(de)),he&&(Array.isArray(he)?pe=[...pe,...he]:pe.push(he)),pe.length===1?V.setSelectedFile(pe[0]):pe.length>1&&V.setSelectedFile(pe)}console.log(`Setting useMaxTokens to: ${we}`),F(we),setTimeout(()=>{const pe=document.querySelector("form");if(pe){const Ve=new Event("submit",{cancelable:!0,bubbles:!0});pe.dispatchEvent(Ve)}},0)}},ie=()=>{if(window.confirm(e("pages.appChat.confirmClear","Are you sure you want to clear the entire chat history?"))&&(Ge(),_t(),X.current=ar(a),g(""),setSelectedImage(null),showImageUploader&&setShowImageUploader(!1),V.clearSelectedFile(),showFileUploader&&setShowFileUploader(!1),l&&l.variables)){const U=Xt(l,n);j(U),Qt(a,{selectedModel:N,selectedStyle:M,selectedOutputFormat:_,sendChatHistory:L,temperature:$,variables:U})}},me=async U=>{if(U.preventDefault(),!b.trim()&&!V.selectedFile&&!(l!=null&&l.allowEmptyContent))return;if(l!=null&&l.variables){const de=l.variables.filter(he=>he.required).filter(he=>!x[he.name]||x[he.name].trim()==="");if(de.length>0){const he=e("error.missingRequiredFields","Please fill in all required fields:")+" "+de.map(pe=>q(pe.label,n)).join(", ");fr(he,!0),window.innerWidth<768&&!y&&ze();return}}if(ke)return;let te=b.trim(),we=te,Ae={};if(V.selectedFile)if(Array.isArray(V.selectedFile)){const de=V.selectedFile.filter(Ve=>Ve.type==="image"),he=V.selectedFile.filter(Ve=>Ve.type==="document");let pe=[te];if(de.length>0){const Ve=de.map(pr=>`<img src="${pr.base64}" alt="${e("common.uploadedImage","Uploaded image")}" style="max-width: 100%; max-height: 300px; margin-top: 8px;" />`).join(`
`);pe.push(Ve)}if(he.length>0){const Ve=he.map(pr=>`<div style="display: inline-flex; align-items: center; background-color: #4b5563; border: 1px solid #d1d5db; border-radius: 6px; padding: 4px 8px; margin: 4px; font-size: 0.875em; color: #ffffff;">
        <span style="margin-right: 4px;">📎</span>
        <span>${pr.fileName}</span>
      </div>`).join("");pe.push(Ve)}we=pe.filter(Boolean).join(`

`),Ae={imageData:de.length>0?de:void 0,fileData:he.length>0?he:void 0}}else if(V.selectedFile.type==="image"){const de=`<img src="${V.selectedFile.base64}" alt="${e("common.uploadedImage","Uploaded image")}" style="max-width: 100%; max-height: 300px; margin-top: 8px;" />`;we=te?`${te}

${de}`:de,Ae={imageData:V.selectedFile}}else{const de=`<div style="display: inline-flex; align-items: center; background-color: #4b5563; border: 1px solid #d1d5db; border-radius: 6px; padding: 4px 8px; margin-left: 8px; font-size: 0.875em; color: #ffffff;">
        <span style="margin-right: 4px;">📎</span>
        <span>${V.selectedFile.fileName}</span>
      </div>`;we=te?`${te} ${de}`:de,Ae={fileData:V.selectedFile}}const Be={modelId:N,style:M,temperature:$,outputFormat:_,language:n,...xe?{useMaxTokens:!0}:{},...S!==null?{thinkingEnabled:S}:{},...P!==null?{thinkingBudget:P}:{},...A!==null?{thinkingThoughts:A}:{}};console.log("📤 Sending message with params:",Be),console.log("🔢 useMaxTokens state:",xe);const Fe={};l!=null&&l.variables&&l.variables.length>0&&l.variables.forEach(de=>{const he=x[de.name];if(he==null||typeof he=="string"&&he.trim()===""){const Ve=typeof de.defaultValue=="object"?q(de.defaultValue,n):de.defaultValue||"";Fe[de.name]=Ve}else Fe[de.name]=he}),Te({displayMessage:{content:we,meta:{rawContent:b,variables:l!=null&&l.variables&&l.variables.length>0?{...Fe}:void 0,...Ae}},apiMessage:{content:b,promptTemplate:(l==null?void 0:l.prompt)||null,variables:{...Fe},imageData:(()=>{var he;const de=Array.isArray(V.selectedFile)?V.selectedFile.filter(pe=>pe.type==="image"):((he=V.selectedFile)==null?void 0:he.type)==="image"?[V.selectedFile]:[];return de.length===1?de[0]:de.length>1?de:null})(),fileData:(()=>{var he;const de=Array.isArray(V.selectedFile)?V.selectedFile.filter(pe=>pe.type==="document"):((he=V.selectedFile)==null?void 0:he.type)==="document"?[V.selectedFile]:[];return de.length===1?de[0]:de.length>1?de:null})()},params:Be,sendChatHistory:L,messageMetadata:{customResponseRenderer:l==null?void 0:l.customResponseRenderer,outputFormat:_}}),g(""),F(!1),K.resetMagicPrompt(),V.clearSelectedFile(),V.hideUploader()},Ce=o.useCallback(()=>{window.location.reload()},[]),Ne=()=>{v(!f)},ze=()=>{window.innerWidth<768&&(y||W({...x})),C(!y)},Qe=()=>{j({...G}),C(!1)},pt=()=>{W({}),C(!1)},xt=U=>{W(U)},Ze=o.useMemo(()=>!(l!=null&&l.variables)||!Array.isArray(l.variables)?[]:l.variables.map(U=>({...U,localizedLabel:q(U.label,n)||U.name,localizedDescription:q(U.description,n),localizedDefaultValue:q(U.defaultValue,n),localizedPlaceholder:q(U.placeholder,n),predefinedValues:U.predefinedValues?U.predefinedValues.map(te=>({...te,localizedLabel:q(te.label,n)||te.value})):void 0})),[l==null?void 0:l.variables,n]);return o.useEffect(()=>{y||W({...x})},[x,y]),m?s.jsx(st,{message:e("app.loading")}):h?s.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md",children:[s.jsx("p",{className:"font-bold",children:e("pages.appChat.errorTitle","Error")}),s.jsx("p",{children:h}),s.jsx("button",{onClick:Ce,className:"mt-3 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:e("pages.appChat.clearCache","Clear Cache & Reload")})]})}):s.jsxs("div",{className:"flex flex-col h-[calc(100vh-10rem)] max-h-[calc(100vh-10rem)] min-h-0 overflow-hidden pt-4 pb-2",children:[s.jsx(va,{app:l,appId:a,chatId:X.current,mode:"chat",messages:ge,variables:x,onClearChat:ie,currentLanguage:n,models:B,styles:D,selectedModel:N,selectedStyle:M,selectedOutputFormat:_,sendChatHistory:L,temperature:$,thinkingEnabled:S,thinkingBudget:P,thinkingThoughts:A,onModelChange:z,onStyleChange:Z,onOutputFormatChange:se,onSendChatHistoryChange:T,onTemperatureChange:ce,onThinkingEnabledChange:H,onThinkingBudgetChange:J,onThinkingThoughtsChange:ne,showConfig:f,onToggleConfig:Ne,onToggleParameters:ze,showParameters:y,onShare:()=>I(!0),showShareButton:O}),(l==null?void 0:l.variables)&&l.variables.length>0&&y&&s.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:U=>{U.target===U.currentTarget&&pt()},children:s.jsxs("div",{className:"w-full bg-white rounded-lg max-h-[90vh] overflow-hidden flex flex-col shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b flex-shrink-0",children:[s.jsx("h3",{className:"font-medium",children:e("pages.appChat.inputParameters")}),s.jsx("button",{onClick:pt,className:"text-gray-500 hover:text-gray-700 p-1",children:s.jsx(R,{name:"close",size:"lg",className:"text-current"})})]}),s.jsx("div",{className:"p-4 overflow-y-auto flex-1",children:s.jsx(kn,{variables:G,setVariables:xt,localizedVariables:Ze})}),s.jsxs("div",{className:"flex gap-3 p-4 border-t bg-gray-50 flex-shrink-0",children:[s.jsx("button",{onClick:pt,className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:e("common.cancel","Cancel")}),s.jsx("button",{onClick:Qe,className:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 font-medium",children:e("common.ok","OK")})]})]})}),s.jsxs("div",{className:"flex flex-col md:flex-row flex-1 gap-4 overflow-hidden mx-auto w-full",children:[s.jsx("div",{className:"flex flex-col max-w-6xl mx-auto w-full h-full",children:Et?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full md:hidden",children:[s.jsx("div",{className:"flex-1 overflow-hidden",children:ge.length>0?s.jsx("div",{className:"w-full h-full overflow-y-auto bg-gray-50 rounded-lg",children:s.jsx(At,{messages:ge,outputFormat:_,onDelete:gt,onEdit:ft,onResend:Ye,editable:!0,appId:a,chatId:X.current,modelId:N,onOpenInCanvas:fe,canvasEnabled:((_r=l==null?void 0:l.features)==null?void 0:_r.canvas)===!0,requiredIntegrations:Je,onConnectIntegration:Ee,app:l})}):s.jsx("div",{className:"w-full h-full overflow-y-auto",children:s.jsx("div",{className:"min-h-full flex items-center justify-center p-4",children:s.jsx("div",{className:"w-full max-w-4xl",children:Sn(l,ct,ht)})})})}),s.jsx("div",{className:"flex-shrink-0 px-4 pt-2",children:s.jsx("div",{className:"w-full max-w-4xl mx-auto",children:s.jsx(Rt,{app:l,value:b,onChange:mt,onSubmit:me,isProcessing:ke,onCancel:Ge,onVoiceInput:(((zr=(Ur=l==null?void 0:l.inputMode)==null?void 0:Ur.microphone)==null?void 0:zr.enabled)??((Br=l==null?void 0:l.microphone)==null?void 0:Br.enabled))!==!1?it:void 0,onVoiceCommand:(((Hr=(Vr=l==null?void 0:l.inputMode)==null?void 0:Vr.microphone)==null?void 0:Hr.enabled)??((Wr=l==null?void 0:l.microphone)==null?void 0:Wr.enabled))!==!1?lt:void 0,onFileSelect:V.handleFileSelect,uploadConfig:V.createUploadConfig(l,N),allowEmptySubmit:(l==null?void 0:l.allowEmptyContent)||V.selectedFile!==null,inputRef:je,formRef:Le,selectedFile:V.selectedFile,showUploader:V.showUploader,onToggleUploader:V.toggleUploader,magicPromptEnabled:((qr=(Zr=l==null?void 0:l.features)==null?void 0:Zr.magicPrompt)==null?void 0:qr.enabled)===!0,onMagicPrompt:dt,showUndoMagicPrompt:K.showUndoMagicPrompt,onUndoMagicPrompt:ut,magicPromptLoading:K.magicLoading})})})]}),s.jsx("div",{className:"hidden md:flex md:flex-col md:h-full md:items-center md:justify-center",children:s.jsxs("div",{className:"w-full max-w-4xl",children:[ge.length>0?s.jsx("div",{className:"mb-8",children:s.jsx(At,{messages:ge,outputFormat:_,onDelete:gt,onEdit:ft,onResend:Ye,editable:!0,appId:a,chatId:X.current,modelId:N,onOpenInCanvas:fe,canvasEnabled:((Gr=l==null?void 0:l.features)==null?void 0:Gr.canvas)===!0,requiredIntegrations:Je,onConnectIntegration:Ee,app:l})}):s.jsx("div",{className:"mb-8",children:Sn(l,ct,ht)}),s.jsx("div",{children:s.jsx(Rt,{app:l,value:b,onChange:mt,onSubmit:me,isProcessing:ke,onCancel:Ge,onVoiceInput:(((Kr=(Jr=l==null?void 0:l.inputMode)==null?void 0:Jr.microphone)==null?void 0:Kr.enabled)??((Xr=l==null?void 0:l.microphone)==null?void 0:Xr.enabled))!==!1?it:void 0,onVoiceCommand:(((Qr=(Yr=l==null?void 0:l.inputMode)==null?void 0:Yr.microphone)==null?void 0:Qr.enabled)??((es=l==null?void 0:l.microphone)==null?void 0:es.enabled))!==!1?lt:void 0,onFileSelect:V.handleFileSelect,uploadConfig:V.createUploadConfig(l,N),allowEmptySubmit:(l==null?void 0:l.allowEmptyContent)||V.selectedFile!==null,inputRef:je,formRef:Le,selectedFile:V.selectedFile,showUploader:V.showUploader,onToggleUploader:V.toggleUploader,magicPromptEnabled:((rs=(ts=l==null?void 0:l.features)==null?void 0:ts.magicPrompt)==null?void 0:rs.enabled)===!0,onMagicPrompt:dt,showUndoMagicPrompt:K.showUndoMagicPrompt,onUndoMagicPrompt:ut,magicPromptLoading:K.magicLoading})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full md:hidden",children:[s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(At,{messages:ge,outputFormat:_,onDelete:gt,onEdit:ft,onResend:Ye,editable:!0,appId:a,chatId:X.current,modelId:N,starterPrompts:(l==null?void 0:l.starterPrompts)||[],onSelectPrompt:ht,welcomeMessage:ct,showCenteredInput:Et,onOpenInCanvas:fe,canvasEnabled:((ss=l==null?void 0:l.features)==null?void 0:ss.canvas)===!0,requiredIntegrations:Je,onConnectIntegration:Ee,app:l})}),s.jsx("div",{className:"flex-shrink-0 px-4 pt-2",children:s.jsx(Rt,{app:l,value:b,onChange:mt,onSubmit:me,isProcessing:ke,onCancel:Ge,onVoiceInput:(((as=(ns=l==null?void 0:l.inputMode)==null?void 0:ns.microphone)==null?void 0:as.enabled)??((os=l==null?void 0:l.microphone)==null?void 0:os.enabled))!==!1?it:void 0,onVoiceCommand:(((ls=(is=l==null?void 0:l.inputMode)==null?void 0:is.microphone)==null?void 0:ls.enabled)??((cs=l==null?void 0:l.microphone)==null?void 0:cs.enabled))!==!1?lt:void 0,onFileSelect:V.handleFileSelect,uploadConfig:V.createUploadConfig(l,N),allowEmptySubmit:(l==null?void 0:l.allowEmptyContent)||V.selectedFile!==null,inputRef:je,formRef:Le,selectedFile:V.selectedFile,showUploader:V.showUploader,onToggleUploader:V.toggleUploader,magicPromptEnabled:((us=(ds=l==null?void 0:l.features)==null?void 0:ds.magicPrompt)==null?void 0:us.enabled)===!0,onMagicPrompt:dt,showUndoMagicPrompt:K.showUndoMagicPrompt,onUndoMagicPrompt:ut,magicPromptLoading:K.magicLoading})})]}),s.jsxs("div",{className:"hidden md:flex md:flex-col md:h-full",children:[s.jsx(At,{messages:ge,outputFormat:_,onDelete:gt,onEdit:ft,onResend:Ye,editable:!0,appId:a,chatId:X.current,modelId:N,starterPrompts:(l==null?void 0:l.starterPrompts)||[],onSelectPrompt:ht,welcomeMessage:ct,showCenteredInput:Et,onOpenInCanvas:fe,canvasEnabled:((ms=l==null?void 0:l.features)==null?void 0:ms.canvas)===!0,requiredIntegrations:Je,onConnectIntegration:Ee}),s.jsx(Rt,{app:l,value:b,onChange:mt,onSubmit:me,isProcessing:ke,onCancel:Ge,onVoiceInput:(((gs=(hs=l==null?void 0:l.inputMode)==null?void 0:hs.microphone)==null?void 0:gs.enabled)??((fs=l==null?void 0:l.microphone)==null?void 0:fs.enabled))!==!1?it:void 0,onVoiceCommand:(((xs=(ps=l==null?void 0:l.inputMode)==null?void 0:ps.microphone)==null?void 0:xs.enabled)??((bs=l==null?void 0:l.microphone)==null?void 0:bs.enabled))!==!1?lt:void 0,onFileSelect:V.handleFileSelect,uploadConfig:V.createUploadConfig(l),allowEmptySubmit:(l==null?void 0:l.allowEmptyContent)||V.selectedFile!==null,inputRef:je,formRef:Le,selectedFile:V.selectedFile,showUploader:V.showUploader,onToggleUploader:V.toggleUploader,magicPromptEnabled:((vs=(ws=l==null?void 0:l.features)==null?void 0:ws.magicPrompt)==null?void 0:vs.enabled)===!0,onMagicPrompt:dt,showUndoMagicPrompt:K.showUndoMagicPrompt,onUndoMagicPrompt:ut,magicPromptLoading:K.magicLoading})]})]})}),(l==null?void 0:l.variables)&&l.variables.length>0&&s.jsxs("div",{className:"hidden md:block w-80 lg:w-96 overflow-y-auto p-4 bg-gray-50 rounded-lg flex-shrink-0",children:[s.jsx("h3",{className:"font-medium mb-3",children:e("pages.appChat.inputParameters")}),s.jsx(kn,{variables:x,setVariables:j,localizedVariables:Ze})]})]}),O&&k&&s.jsx(ia,{appId:a,path:window.location.pathname,params:{model:N,style:M,outfmt:_,temp:$,history:L,prefill:d,...Object.fromEntries(Object.entries(x).map(([U,te])=>[`var_${U}`,te]))},onClose:()=>I(!1)})]})},Bu=({app:t})=>{const{t:e,i18n:r}=Q(),n=r.language,{resetHeaderColor:a}=Ue(),[i,c]=o.useState(!1);o.useEffect(()=>{a()},[a]);const d=t.redirectConfig||{},l=d.url||"",u=d.openInNewTab!==!1,b=d.showWarning!==!1,g=q(t.name,n)||t.id,m=q(t.description,n)||"",w=()=>{if(!l){console.error("No redirect URL configured for app:",t.id);return}c(!0),u?(window.open(l,"_blank","noopener,noreferrer"),setTimeout(()=>c(!1),1e3)):window.location.href=l};return o.useEffect(()=>{!b&&l&&w()},[b,l]),s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:!b&&i?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mb-4"}),s.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:e(u?"pages.redirectApp.openingInNewTab":"pages.redirectApp.redirecting")})]})}):s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:t.color||"#4F46E5"},children:s.jsx(R,{name:t.icon||"external-link",size:"2xl",className:"text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:g}),m&&s.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center",children:m})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(R,{name:"exclamation-triangle",className:"h-5 w-5 text-yellow-400"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:e("pages.redirectApp.warning")})})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pages.redirectApp.externalSite")}),s.jsxs("div",{className:"flex items-center p-3 bg-gray-100 dark:bg-gray-700 rounded-md",children:[s.jsx(R,{name:"link",className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-900 dark:text-white break-all",children:l})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx("button",{onClick:w,disabled:i||!l,className:"flex-1 flex items-center justify-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),e(u?"pages.redirectApp.openingInNewTab":"pages.redirectApp.redirecting")]}):s.jsxs(s.Fragment,{children:[s.jsx(R,{name:"external-link",className:"h-5 w-5 mr-2"}),e("pages.redirectApp.continueButton",{appName:g})]})}),s.jsxs("button",{onClick:()=>window.history.back(),className:"flex-1 flex items-center justify-center px-6 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:[s.jsx(R,{name:"arrow-left",className:"h-5 w-5 mr-2"}),e("common.back")]})]}),u&&s.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[s.jsx(R,{name:"information-circle",className:"inline h-4 w-4 mr-1","aria-hidden":"true"}),e("pages.redirectApp.openingInNewTab")]})]})})},Vu=({app:t})=>{const{t:e,i18n:r}=Q(),n=r.language,{resetHeaderColor:a}=Ue(),[i,c]=o.useState(!0),[d,l]=o.useState(null),u=o.useRef(null);o.useEffect(()=>{a()},[a]);const b=t.iframeConfig||{},g=b.url||"",m=b.allowFullscreen!==!1,w=b.sandbox||["allow-scripts","allow-same-origin","allow-forms"],h=q(t.name,n)||t.id,p=()=>{c(!1),l(null)},f=()=>{c(!1),l(e("pages.iframeApp.loadError"))},v=()=>{u.current&&(c(!0),l(null),u.current.src=g)},x=()=>{g&&window.open(g,"_blank","noopener,noreferrer")};return g?s.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)]",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:t.color||"#4F46E5"},children:s.jsx(R,{name:t.icon||"window",className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-md",children:g})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:v,disabled:i,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",title:e("pages.iframeApp.reload"),children:s.jsx(R,{name:"arrow-path",className:`h-5 w-5 ${i?"animate-spin":""}`,"aria-label":e("pages.iframeApp.reload")})}),s.jsx("button",{onClick:x,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:e("pages.iframeApp.openInNewTab"),children:s.jsx(R,{name:"external-link",className:"h-5 w-5","aria-label":e("pages.iframeApp.openInNewTab")})}),s.jsx("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:e("common.back"),children:s.jsx(R,{name:"x",className:"h-5 w-5","aria-label":e("common.close")})})]})]})}),i&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75 z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e("pages.iframeApp.loading")})]})}),d&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 m-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(R,{name:"exclamation-circle",className:"h-5 w-5 text-red-500 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:d}),s.jsx("button",{onClick:v,className:"mt-2 text-sm text-red-700 dark:text-red-300 underline hover:no-underline",children:e("pages.iframeApp.reload")})]})]})}),s.jsx("div",{className:"flex-1 relative bg-gray-50 dark:bg-gray-900",children:s.jsx("iframe",{ref:u,src:g,className:"w-full h-full border-0",onLoad:p,onError:f,sandbox:w.join(" "),allow:m?"fullscreen":"",allowFullScreen:m,title:h})})]}):s.jsx("div",{className:"container mx-auto px-4 py-8 max-w-2xl",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(R,{name:"exclamation-circle",className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e("common.error")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No iframe URL configured for this app."}),s.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 px-6 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium rounded-md transition-colors",children:e("common.back")})]})})})},Hu=()=>{const{appId:t}=ir(),{t:e}=Q(),[r,n]=o.useState(null),[a,i]=o.useState(!0),[c,d]=o.useState(null);if(o.useEffect(()=>{t&&(async()=>{try{i(!0),d(null);const b=await cr(t);n(b)}catch(b){console.error("Error loading app:",b),d(b.message||e("app.error"))}finally{i(!1)}})()},[t,e]),a)return s.jsx("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:s.jsx(st,{message:e("app.loading")})});if(c)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 mb-4",children:c}),s.jsx("button",{className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",onClick:()=>window.location.reload(),children:e("app.retry")})]});if(!r)return s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"text-red-500 mb-4",children:e("pages.notFound.title")})});switch(r.type||"chat"){case"redirect":return s.jsx(Bu,{app:r});case"iframe":return s.jsx(Vu,{app:r});case"chat":default:return s.jsx(zu,{preloadedApp:r})}},Wu=({messages:t,inputValue:e,onInputChange:r,onSubmit:n,isProcessing:a,onCancel:i,onDelete:c,onEdit:d,onResend:l,app:u,appId:b,chatId:g,selectedText:m,onClearSelection:w,width:h,cleanupEventSource:p,inputRef:f,onInsertAnswer:v})=>{const{t:x}=Q();return s.jsxs("div",{className:"canvas-chat-panel bg-white border border-gray-300 flex flex-col h-full min-h-0 rounded-lg overflow-hidden",style:{width:`${h}%`},children:[s.jsx("div",{className:"canvas-chat-messages flex-1 min-h-0 overflow-y-auto bg-white",children:s.jsx("div",{className:"h-full",children:s.jsx(At,{messages:t,outputFormat:"markdown",onDelete:c,onEdit:d,onResend:l,editable:!1,appId:b,chatId:g,compact:!0,onInsert:v,canvasEnabled:!0})})}),s.jsxs("div",{className:"canvas-chat-input flex-shrink-0 p-4 border-t border-gray-200 bg-white",children:[m&&s.jsxs("div",{className:"mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200 relative",children:[s.jsx("button",{type:"button",className:"absolute right-2 top-2 text-gray-400 hover:text-gray-600",onClick:w,title:x("common.clear","Clear"),children:s.jsx(R,{name:"clearCircle",size:"sm"})}),s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(R,{name:"cursor-text",size:"sm",className:"text-blue-600"}),s.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Selected text:"})]}),s.jsxs("p",{className:"text-xs text-blue-700 line-clamp-2",children:['"',m,'"']})]}),s.jsx(Rt,{app:u,value:e,onChange:r,onSubmit:n,isProcessing:a,onCancel:i,onVoiceInput:()=>{},selectedImage:null,selectedFile:null,imageUploadConfig:{},showImageUploader:!1,showFileUploader:!1,inputRef:f,placeholder:m?x("canvas.promptWithSelection","What would you like to do with the selected text?"):x("canvas.promptPlaceholder","Ask the AI to help with your document..."),allowEmptySubmit:!1,appId:b,fileUploadConfig:{maxFileSize:10,allowedFileTypes:[]},cleanupEventSource:p})]})]})};var Zu=Ia();const En=Ln(Zu),qu=new In,Gu=()=>{const[t,e]=o.useState(!1),[r,n]=o.useState(null);return{copyText:async l=>{e(!0);try{const u=document.createElement("div");u.innerHTML=l;const b=u.textContent||u.innerText||"";return await navigator.clipboard.writeText(b),n("text"),console.log("✅ Text copied to clipboard"),{success:!0,type:"text"}}catch(u){return console.error("Failed to copy text:",u),{success:!1,error:u}}finally{e(!1)}},copyMarkdown:async l=>{e(!0);try{const u=qu.turndown(l);return await navigator.clipboard.writeText(u),n("markdown"),console.log("✅ Markdown copied to clipboard"),{success:!0,type:"markdown"}}catch(u){return console.error("Failed to copy markdown:",u),{success:!1,error:u}}finally{e(!1)}},copyHTML:async l=>{e(!0);try{const u=document.createElement("div");u.innerHTML=l;const b=u.textContent||u.innerText||"";if(navigator.clipboard&&navigator.clipboard.write){const m=new ClipboardItem({"text/html":new Blob([l],{type:"text/html"}),"text/plain":new Blob([b],{type:"text/plain"})});await navigator.clipboard.write([m])}else await navigator.clipboard.writeText(l);return n("html"),console.log("✅ HTML copied to clipboard"),{success:!0,type:"html"}}catch(u){return console.error("Failed to copy HTML:",u),{success:!1,error:u}}finally{e(!1)}},copyJSON:async l=>{e(!0);try{const u=typeof l=="string"?l:JSON.stringify(l,null,2);return await navigator.clipboard.writeText(u),n("json"),console.log("✅ JSON copied to clipboard"),{success:!0,type:"json"}}catch(u){return console.error("Failed to copy JSON:",u),{success:!1,error:u}}finally{e(!1)}},isLoading:t,lastCopied:r}},Ju=({content:t,onClose:e})=>{const{t:r}=Q(),{copyText:n,copyMarkdown:a,copyHTML:i}=Gu(),c=async()=>{await n(t),e()},d=async()=>{await a(t),e()},l=async()=>{await i(t),e()},u=()=>{const b=window.open("","_blank");b.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Document</title>
          <style>
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 40px 20px; }
            h1 { font-size: 2rem; margin-bottom: 1rem; border-bottom: 2px solid #e5e7eb; padding-bottom: 0.5rem; }
            h2 { font-size: 1.5rem; margin: 1.5rem 0 0.75rem; }
            h3 { font-size: 1.25rem; margin: 1rem 0 0.5rem; }
            p { margin-bottom: 1rem; }
            ul, ol { margin-bottom: 1rem; padding-left: 1.5rem; }
            blockquote { border-left: 4px solid #6366f1; margin: 1rem 0; padding: 0.5rem 0 0.5rem 1rem; background: #f8fafc; font-style: italic; }
            code { background: #f1f5f9; padding: 0.125rem 0.25rem; border-radius: 3px; font-family: Monaco, Menlo, monospace; }
          </style>
        </head>
        <body>${t}</body>
      </html>
    `),b.document.close(),b.print(),e()};return s.jsx("div",{className:"absolute top-full right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-56",children:s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:r("canvas.export.copyOptions","Copy Options")}),s.jsxs("button",{onClick:c,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center gap-2 transition-colors whitespace-nowrap",children:[s.jsx(R,{name:"document-text",size:"sm"}),r("canvas.export.copyText","as Text")]}),s.jsxs("button",{onClick:d,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center gap-2 transition-colors whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"}),r("canvas.export.copyMarkdown","as Markdown")]}),s.jsxs("button",{onClick:l,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center gap-2 transition-colors whitespace-nowrap",children:[s.jsx(R,{name:"code",size:"sm"}),r("canvas.export.copyHTML","as HTML")]}),s.jsx("hr",{className:"my-2"}),s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:r("canvas.export.downloadOptions","Download Options")}),s.jsxs("button",{onClick:u,className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded flex items-center gap-2 transition-colors",children:[s.jsx(R,{name:"printer",size:"sm"}),r("canvas.export.printPDF","Print as PDF")]})]})})},Ku=({app:t,onSpeechResult:e,disabled:r=!1,quillRef:n})=>{var m,w,h;const{t:a}=Q(),i=o.useRef(null),{isListening:c,transcript:d,toggleListening:l,stopListening:u,microphoneMode:b}=pa({app:t,inputRef:i,onSpeechResult:p=>{if(n!=null&&n.current&&p.trim()){const f=n.current.getEditor(),v=f.getSelection(!0);if(v)f.insertText(v.index,p+" ","user"),f.setSelection(v.index+p.length+1);else{const x=f.getLength();f.insertText(x-1,p+" ","user"),f.setSelection(x+p.length)}f.focus(),e&&e(p),i.current&&(i.current.value="")}},disabled:r}),g=o.useCallback(()=>{c||i.current&&(i.current.value=""),l()},[c,l]);return o.useEffect(()=>{const p=f=>{if((f.ctrlKey||f.metaKey)&&f.key==="m"){const v=document.activeElement;((v==null?void 0:v.closest(".canvas-editor-container"))||(v==null?void 0:v.classList.contains("ql-editor")))&&(f.preventDefault(),g())}};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[g]),s.jsxs(s.Fragment,{children:[s.jsx(ma,{isActive:c,setIsActive:()=>u(),transcript:(w=(m=t==null?void 0:t.inputMode)==null?void 0:m.microphone)!=null&&w.showTranscript||(h=t==null?void 0:t.microphone)!=null&&h.showTranscript?d:"",mode:b}),s.jsx("button",{className:`modern-btn voice-input-button ${c?"active":""}`,onClick:p=>{p.preventDefault(),g()},type:"button",disabled:r,title:b==="manual"?a("canvas.voiceInput.tooltipManual","Dictate to editor (Ctrl+M) - manual"):a("canvas.voiceInput.tooltipAutomatic","Dictate to editor (Ctrl+M) - automatic"),"aria-label":a("canvas.voiceInput.ariaLabel","Dictate text to editor"),children:s.jsx(R,{name:"microphone",size:"sm"})}),s.jsx("input",{ref:i,type:"text",style:{display:"none"},readOnly:!0})]})},Xu=({content:t,showExportMenu:e,onToggleExportMenu:r,quillRef:n,app:a,onVoiceInput:i})=>{const{t:c}=Q(),d=o.useRef(null),[l,u]=o.useState(!1),[b,g]=o.useState(!1),[m,w]=o.useState({}),h=t.replace(/<[^>]*>/g,"").length;o.useEffect(()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getModule("history");if(!j)return;const y=()=>{u(j.stack.undo.length>0),g(j.stack.redo.length>0)},C=()=>{const k=x.getSelection();if(k){const I=x.getFormat(k);w(I)}};return x.on("text-change",y),x.on("selection-change",C),y(),C(),()=>{x.off("text-change",y),x.off("selection-change",C)}},[n,t]);const p=()=>{if(!(n!=null&&n.current)||!l)return;const j=n.current.getEditor().getModule("history");j&&j.undo()},f=()=>{if(!(n!=null&&n.current)||!b)return;const j=n.current.getEditor().getModule("history");j&&j.redo()};o.useEffect(()=>{if(!e)return;const x=j=>{d.current&&!d.current.contains(j.target)&&r(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[e,r]);const v=(x,j)=>{if(!(n!=null&&n.current))return;const y=n.current.getEditor(),C=y.getSelection(!0);if(C){if(j!==void 0)y.format(x,j);else{const k=y.getFormat(C);y.format(x,!k[x])}y.setSelection(C),y.focus()}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{id:"quill-toolbar",style:{display:"none"},children:[s.jsxs("select",{className:"ql-header",defaultValue:"",children:[s.jsx("option",{value:"1"}),s.jsx("option",{value:"2"}),s.jsx("option",{value:"3"}),s.jsx("option",{value:""})]}),s.jsx("button",{className:"ql-bold"}),s.jsx("button",{className:"ql-italic"}),s.jsx("button",{className:"ql-underline"}),s.jsx("button",{className:"ql-list",value:"ordered"}),s.jsx("button",{className:"ql-list",value:"bullet"}),s.jsx("button",{className:"ql-blockquote"}),s.jsx("button",{className:"ql-code-block"}),s.jsx("button",{className:"ql-link"}),s.jsx("button",{className:"ql-undo",children:s.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414L2.586 8l3.707-3.707a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("button",{className:"ql-redo",children:s.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12.293 3.293a1 1 0 011.414 0L17.414 7l-3.707 3.707a1 1 0 01-1.414-1.414L14.586 7H9a5 5 0 00-5 5v2a1 1 0 11-2 0v-2a7 7 0 017-7h5.586L12.293 4.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsx("div",{className:"modern-toolbar bg-white border-b border-gray-300 px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"relative",children:s.jsxs("select",{className:"modern-select bg-white border border-gray-300 rounded px-3 h-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:x=>{const j=x.target.value;j===""?v("header",!1):v("header",parseInt(j))},value:m.header||"",children:[s.jsx("option",{value:"1",children:"Heading 1"}),s.jsx("option",{value:"2",children:"Heading 2"}),s.jsx("option",{value:"3",children:"Heading 3"}),s.jsx("option",{value:"",children:"Normal text"})]})}),s.jsx("div",{className:"border-l border-gray-300 h-6 mx-2"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{className:`modern-btn ${m.bold?"ql-active":""}`,title:c("toolbar.bold","Bold"),onClick:()=>v("bold"),children:s.jsx("strong",{children:"B"})}),s.jsx("button",{className:`modern-btn ${m.italic?"ql-active":""}`,title:c("toolbar.italic","Italic"),onClick:()=>v("italic"),children:s.jsx("em",{children:"I"})}),s.jsx("button",{className:`modern-btn ${m.underline?"ql-active":""}`,title:c("toolbar.underline","Underline"),onClick:()=>v("underline"),children:s.jsx("u",{children:"U"})})]}),s.jsx("div",{className:"border-l border-gray-300 h-6 mx-2"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{className:`modern-btn ${m.list==="bullet"?"ql-active":""}`,title:c("toolbar.bulletList","Bullet List"),onClick:()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getSelection();if(j){const y=x.getFormat(j);x.format("list",y.list==="bullet"?!1:"bullet")}},children:s.jsx(R,{name:"list",size:"sm"})}),s.jsx("button",{className:`modern-btn ${m.list==="ordered"?"ql-active":""}`,title:c("toolbar.numberedList","Numbered List"),onClick:()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getSelection();if(j){const y=x.getFormat(j);x.format("list",y.list==="ordered"?!1:"ordered")}},children:s.jsx("span",{className:"text-xs font-bold",children:"1."})})]}),s.jsx("div",{className:"border-l border-gray-300 h-6 mx-2"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{className:`modern-btn ${m.blockquote?"ql-active":""}`,title:c("toolbar.quote","Quote"),onClick:()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getSelection();if(j){const y=x.getFormat(j);x.format("blockquote",!y.blockquote)}},children:s.jsx("span",{children:'"'})}),s.jsx("button",{className:`modern-btn ${m["code-block"]?"ql-active":""}`,title:c("toolbar.code","Code"),onClick:()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getSelection();if(j){const y=x.getFormat(j);x.format("code-block",!y["code-block"])}},children:s.jsx(R,{name:"code",size:"sm"})}),s.jsx("button",{className:`modern-btn ${m.link?"ql-active":""}`,title:c("toolbar.link","Link"),onClick:()=>{if(!(n!=null&&n.current))return;const x=n.current.getEditor(),j=x.getSelection();if(j&&j.length>0)if(x.getFormat(j).link)x.format("link",!1);else{const C=prompt("Enter URL:");C&&x.format("link",C)}},children:s.jsx("span",{children:"🔗"})})]}),s.jsx("div",{className:"border-l border-gray-300 h-6 mx-2"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{className:`modern-btn ${l?"":"disabled"}`,title:c("common.undo","Undo"),onClick:p,disabled:!l,children:s.jsx(R,{name:"undo",size:"sm"})}),s.jsx("button",{className:`modern-btn ${b?"":"disabled"}`,title:c("toolbar.redo","Redo"),onClick:f,disabled:!b,children:s.jsx(R,{name:"redo",size:"sm"})})]}),s.jsx("div",{className:"border-l border-gray-300 h-6 mx-2"}),a&&s.jsx("div",{className:"flex items-center",children:s.jsx(Ku,{app:a,quillRef:n,onSpeechResult:i,disabled:!1})})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-sm text-gray-500 px-3 py-1 bg-gray-50 rounded border border-gray-200",children:[h," characters"]}),s.jsxs("div",{className:"relative",ref:d,children:[s.jsxs("button",{onClick:()=>r(!e),className:"flex items-center gap-2 px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:c("canvas.export.title","Export Document"),type:"button",children:[s.jsx(R,{name:"download",size:"sm"}),s.jsx("span",{children:c("canvas.export.export","Export")})]}),e&&s.jsx(Ju,{content:t,onClose:()=>r(!1)})]})]})]})})]})},Yu=({content:t,onContentChange:e,onSelectionChange:r,processing:n,showExportMenu:a,onToggleExportMenu:i,editorRef:c,width:d,app:l,onVoiceInput:u})=>{const{t:b}=Q(),g=o.useMemo(()=>({toolbar:{container:"#quill-toolbar"},history:{delay:2e3,maxStack:500,userOnly:!0},clipboard:{matchVisual:!1}}),[]),m=["header","bold","italic","underline","strike","list","bullet","blockquote","code-block","link"];return o.useEffect(()=>{if(!(c!=null&&c.current))return;const w=c.current.getEditor(),h=En.Quill,p=new h(document.createElement("div")),f=(C,k=!1)=>{const I=w.getSelection();if(!I||I.length===0)return;C.preventDefault();const E=w.getContents(I.index,I.length);p.setContents(E);const O=p.root.innerHTML,N=ba(O),M=p.root.textContent||p.root.innerText||"";C.clipboardData.setData("text/plain",M),C.clipboardData.setData("text/html",O),C.clipboardData.setData("text/markdown",N),k&&w.deleteText(I.index,I.length,"user")},v=C=>{C.preventDefault();const k=C.clipboardData.getData("text/html"),I=C.clipboardData.getData("text/markdown"),E=C.clipboardData.getData("text/plain");let O=k;O||(I?O=kt(I):tt(E)?O=kt(E):O=E);const N=w.getSelection(!0),M=N?N.index:w.getLength();w.clipboard.dangerouslyPasteHTML(M,O),w.setSelection(M+O.length,0)},x=w.root,j=C=>f(C,!1),y=C=>f(C,!0);return x.addEventListener("copy",j),x.addEventListener("cut",y),x.addEventListener("paste",v),()=>{x.removeEventListener("copy",j),x.removeEventListener("cut",y),x.removeEventListener("paste",v)}},[c]),s.jsxs("div",{className:"flex flex-col bg-white border border-gray-300 relative h-full min-h-0 rounded-lg overflow-hidden",style:{width:`${d}%`},children:[s.jsx(Xu,{content:t,showExportMenu:a,onToggleExportMenu:i,quillRef:c,app:l,onVoiceInput:u}),s.jsxs("div",{className:"canvas-editor-container flex-1 min-h-0 overflow-hidden relative bg-white",children:[n&&s.jsxs("div",{className:"processing-indicator absolute top-6 right-6 z-10 bg-white text-gray-700 px-4 py-2 rounded-full shadow-lg border border-gray-200 flex items-center gap-3 text-sm",children:[s.jsx("div",{className:"flex items-center justify-center w-4 h-4",children:s.jsx("div",{className:"w-3 h-3 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}),s.jsx("span",{className:"font-medium",children:b("canvas.aiProcessing","AI is working...")})]}),s.jsx("div",{className:"h-full",children:s.jsx(En,{ref:c,theme:"snow",value:t,onChange:e,onChangeSelection:r,modules:g,formats:m,placeholder:b("canvas.placeholder","Start typing or use the AI assistant to create your document..."),style:{height:"100%"},className:"modern-canvas-editor"})})]})]})},Qu=({onAction:t,isProcessing:e,hasSelection:r})=>{const{t:n}=Q(),a=["continue","summarize","outline"],[i,c]=o.useState(null),d=o.useRef(null),l=o.useRef(null),u=[{id:"ai-writing",icon:"sparkles",label:n("canvas.toolbox.aiWriting","AI Writing"),color:"text-purple-600",bgColor:"bg-purple-50 hover:bg-purple-100",tools:[{id:"continue",icon:"arrow-right",label:n("canvas.continue","Continue writing"),description:"Continue writing from where you left off"},{id:"summarize",icon:"document-text",label:n("canvas.summarize","Summarize"),description:"Summarize the current document"},{id:"outline",icon:"list",label:n("canvas.outline","Create outline"),description:"Create an outline of the content"}]},{id:"text-editing",icon:"pencil",label:n("canvas.toolbox.textEditing","Text Editing"),color:"text-blue-600",bgColor:"bg-blue-50 hover:bg-blue-100",tools:[{id:"expand",icon:"plus-circle",label:n("canvas.expand","Expand"),description:"Make text longer and more detailed"},{id:"condense",icon:"minus-circle",label:n("canvas.condense","Condense"),description:"Make text shorter and more concise"},{id:"paraphrase",icon:"refresh",label:n("canvas.paraphrase","Paraphrase"),description:"Rewrite with different words"},{id:"clarify",icon:"light-bulb",label:n("canvas.clarify","Clarify"),description:"Make text clearer and easier to understand"}]},{id:"tone-style",icon:"color-swatch",label:n("canvas.toolbox.toneStyle","Tone & Style"),color:"text-green-600",bgColor:"bg-green-50 hover:bg-green-100",tools:[{id:"formal",icon:"academic-cap",label:n("canvas.formal","Formal"),description:"Make text more formal and professional"},{id:"casual",icon:"chat",label:n("canvas.casual","Casual"),description:"Make text more casual and friendly"},{id:"professional",icon:"briefcase",label:n("canvas.professional","Professional"),description:"Make text more professional"},{id:"creative",icon:"paint-brush",label:n("canvas.creative","Creative"),description:"Make text more creative and engaging"}]},{id:"utilities",icon:"cog",label:n("canvas.toolbox.utilities","Utilities"),color:"text-gray-600",bgColor:"bg-gray-50 hover:bg-gray-100",tools:[{id:"translate",icon:"globe",label:n("canvas.translate","Translate"),description:"Translate text to another language"},{id:"grammar",icon:"check-circle",label:n("canvas.grammar","Grammar"),description:"Check and fix grammar"},{id:"format",icon:"format",label:n("canvas.format","Format"),description:"Format and structure text"}]}],b=m=>{c(i===m?null:m)},g=(m,w)=>{l.current&&clearTimeout(l.current),typeof t=="function"&&t(m,w),c(null)};return o.useEffect(()=>{const m=w=>{d.current&&!d.current.contains(w.target)&&c(null)};if(i)return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[i]),o.useEffect(()=>{if(i)return l.current=setTimeout(()=>{c(null)},1e4),()=>{l.current&&clearTimeout(l.current)}},[i]),o.useEffect(()=>()=>{l.current&&clearTimeout(l.current)},[]),s.jsx("div",{ref:d,className:"floating-toolbox fixed right-4 top-1/2 transform -translate-y-1/2 z-40 bg-white rounded-2xl shadow-lg border border-gray-200",children:s.jsx("div",{className:"p-2 space-y-1",children:u.map(m=>s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>b(m.id),disabled:e,className:`w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200 ${i===m.id?m.bgColor.replace("hover:",""):"bg-gray-50 hover:bg-gray-100"} ${e?"opacity-50 cursor-not-allowed":""}`,title:m.label,children:s.jsx(R,{name:m.icon,size:"sm",className:i===m.id?m.color:"text-gray-600"})}),i===m.id&&s.jsxs("div",{className:"absolute right-full top-0 mr-2 bg-white rounded-xl shadow-xl border border-gray-200 p-2 min-w-48 z-50",children:[s.jsx("div",{className:"mb-2 px-2 py-1 border-b border-gray-100",children:s.jsx("h4",{className:"text-sm font-medium text-gray-800",children:m.label})}),s.jsx("div",{className:"space-y-1",children:m.tools.map(w=>s.jsxs("button",{onClick:()=>g(w.id,w.description),disabled:e||!r&&!a.includes(w.id),className:"w-full flex items-center gap-2 px-2 py-2 text-sm rounded-lg bg-gray-50 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:w.description,children:[s.jsx(R,{name:w.icon,size:"sm",className:"text-gray-600"}),s.jsx("span",{className:"text-left text-gray-700",children:w.label})]},w.id))})]})]},m.id))})})},em=({isOpen:t,currentContent:e,newContent:r,onConfirm:n,onCancel:a,onAppend:i,title:c})=>{const{t:d}=Q();if(!t)return null;const l=()=>{const b=e.replace(/<[^>]*>/g,"").trim();return b.length>200?b.substring(0,200)+"...":b},u=()=>{const b=r.replace(/<[^>]*>/g,"").trim();return b.length>200?b.substring(0,200)+"...":b};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c||d("canvas.confirmReplaceTitle","Content Replacement Confirmation")}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":d("common.close","Close"),children:s.jsx(R,{name:"x",size:"lg"})})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsx("p",{className:"text-gray-600 mb-6",children:d("canvas.confirmReplaceMessage","You have existing content in your document. What would you like to do with the new content?")}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:s.jsxs("h3",{className:"font-medium text-gray-900 flex items-center",children:[s.jsx(R,{name:"document-text",size:"sm",className:"mr-2"}),d("canvas.currentContent","Current Document")]})}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded p-3 max-h-40 overflow-y-auto",children:l()||d("canvas.emptyDocument","Empty document")})})]}),s.jsxs("div",{className:"border border-blue-200 rounded-lg",children:[s.jsx("div",{className:"bg-blue-50 px-4 py-2 border-b border-blue-200",children:s.jsxs("h3",{className:"font-medium text-blue-900 flex items-center",children:[s.jsx(R,{name:"plus-circle",size:"sm",className:"mr-2"}),d("canvas.newContent","New Content")]})}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"text-sm text-gray-700 bg-blue-50 rounded p-3 max-h-40 overflow-y-auto",children:u()})})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{onClick:a,className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:d("common.cancel","Cancel")}),s.jsxs("button",{onClick:i,className:"flex-1 px-4 py-2 text-blue-700 bg-blue-100 border border-blue-300 rounded-lg hover:bg-blue-200 font-medium transition-colors flex items-center justify-center",children:[s.jsx(R,{name:"plus",size:"sm",className:"mr-2"}),d("canvas.appendContent","Append Content")]}),s.jsxs("button",{onClick:n,className:"flex-1 px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 font-medium transition-colors flex items-center justify-center",children:[s.jsx(R,{name:"refresh",size:"sm",className:"mr-2"}),d("canvas.replaceContent","Replace Content")]})]})]})})};function tm(t,e,r={},n){const{quillRef:a,chatInputRef:i}=r,c=`ai_hub_canvas_content_${t}`,d=`ai_hub_canvas_last_saved_${t}`,l=()=>{try{return sessionStorage.getItem(c)||""}catch(S){return console.error("Error loading canvas content from sessionStorage:",S),""}},[u,b]=o.useState(l),[g,m]=o.useState(()=>{try{const S=sessionStorage.getItem(d);return S?new Date(S):null}catch{return null}}),[w,h]=o.useState(null),[p,f]=o.useState(""),[v,x]=o.useState(0),j=o.useRef(u);o.useEffect(()=>{j.current=u},[u]),o.useEffect(()=>{try{if(u!==void 0){sessionStorage.setItem(c,u);const S=new Date;sessionStorage.setItem(d,S.toISOString()),m(S)}}catch(S){console.error("Error saving canvas content to sessionStorage:",S)}},[u,c,d]);const y=o.useCallback(S=>{b(S)},[e]),C=o.useCallback(()=>j.current&&j.current.trim().length>0,[]),k=o.useCallback(()=>j.current.replace(/<[^>]*>/g,"").trim(),[]),I=o.useCallback(()=>{b("");try{sessionStorage.removeItem(c),sessionStorage.removeItem(d),m(null)}catch(S){console.error("Error clearing canvas content from sessionStorage:",S)}},[c,d,e]),E=o.useCallback((S,P)=>!C()||!P?(y(S),Promise.resolve("replaced")):new Promise(A=>{P({currentContent:j.current,newContent:S,onReplace:()=>{y(S),A("replaced")},onAppend:()=>{const D=j.current+`

`+S;y(D),A("appended")},onCancel:()=>{A("cancelled")}})}),[C,y]),O=o.useCallback((S,P=`

`)=>{const A=j.current,B=A?A+P+S:S;y(B)},[y]),N=o.useCallback((S,P,A)=>{try{if(S&&x(S.index),S&&S.length>0){const B=A.getText(S.index,S.length);h(S),f(B.trim())}else{const B=document.activeElement,D=i==null?void 0:i.current;if(D&&(B===D||D.contains(B)))return;h(null),f("")}}catch(B){console.warn("Selection change error:",B),h(null),f("")}},[i]),M=o.useCallback(async(S,P,A,B)=>{if(!["continue","summarize","outline"].includes(S)&&(!A||!w))return;let z;switch(S){case"continue":z="Please continue writing from where the document left off, maintaining the same style and tone.";break;case"summarize":z="Please provide a concise summary of the entire document.";break;case"outline":z="Please create an outline of the main points in this document.";break;case"expand":z=`Please expand and elaborate on the following text, making it longer and more detailed while maintaining the same meaning and tone:

"${A}"`;break;case"condense":z=`Please condense and summarize the following text, making it shorter and more concise while preserving the key information:

"${A}"`;break;case"paraphrase":z=`Please paraphrase the following text using different words while maintaining the same meaning:

"${A}"`;break;case"clarify":z=`Please rewrite the following text to make it clearer and easier to understand:

"${A}"`;break;case"formal":z=`Please rewrite the following text in a more formal and professional tone:

"${A}"`;break;case"casual":z=`Please rewrite the following text in a more casual and friendly tone:

"${A}"`;break;case"professional":z=`Please rewrite the following text in a more professional and business-appropriate tone:

"${A}"`;break;case"creative":z=`Please rewrite the following text in a more creative and engaging way:

"${A}"`;break;case"translate":z=`Please translate the following text to ${B==="en"?"Spanish":"English"} and only respond with the translated text:

"${A}"`;break;case"grammar":z=`Please check and fix any grammar issues in the following text:

"${A}"`;break;case"format":z=`Please format and structure the following text properly:

"${A}"`;break;case"suggest":z=`Please provide suggestions for improving the following text (don't rewrite it, just give advice):

"${A}"`;break;default:z=`${P}: "${A}"`}window.pendingEdit={action:S,selection:w,selectedText:A},n&&await n(z,{editAction:S,originalText:A,bypassAppPrompts:!0})},[w,n]),_=o.useCallback((S,P=null)=>{if(!S||!(a!=null&&a.current))return;const A=a.current.getEditor();if(P==="suggest")return;let B=S;if(tt(S)&&(B=kt(S)),w&&w.index!==void 0&&w.length!==void 0){A.deleteText(w.index,w.length);const D=A.clipboard.convert(B);A.updateContents(D,"user"),A.setSelection(w.index+D.length())}else{const D=A.getLength();if(D>1&&(B=`

`+B),tt(B)){const z=A.clipboard.convert(B);A.updateContents(z,"user")}else A.insertText(D-1,B);A.setSelection(A.getLength())}h(null),f("")},[a,w]),$=o.useCallback(()=>({storageKey:c,lastSavedKey:d,hasStoredContent:!!sessionStorage.getItem(c),lastSaved:g,contentLength:u.length,textContentLength:k().length}),[c,d,g,u.length,k]),L=o.useCallback(()=>{window.pendingEdit=null},[]);return{content:u,setContent:y,setContentWithConfirmation:E,appendContent:O,clearContent:I,hasContent:C,getTextContent:k,lastSaved:g,getStorageInfo:$,selection:w,selectedText:p,cursorPosition:v,setSelection:h,setSelectedText:f,setCursorPosition:x,handleSelectionChange:N,handleEditAction:M,applyEditResult:_,clearPendingEdit:L}}const rm=()=>{var Ye;const{t,i18n:e}=Q(),r=e.language,{appId:n}=ir(),a=rt(),[i]=or(),[c,d]=o.useState(null),[l,u]=o.useState(!0),[b,g]=o.useState(null),{selectedModel:m,selectedStyle:w,selectedOutputFormat:h,temperature:p,sendChatHistory:f,models:v,styles:x,setSelectedModel:j,setSelectedStyle:y,setSelectedOutputFormat:C,setTemperature:k,setSendChatHistory:I,modelsLoading:E}=ua(n,c);o.useEffect(()=>{if(!c||E)return;const ie={};let me=!1;const Ce=i.get("model");Ce&&(j(Ce),me=!0);const Ne=i.get("style");Ne&&(y(Ne),me=!0);const ze=i.get("outfmt");ze&&(C(ze),me=!0);const Qe=i.get("temp");Qe&&(k(parseFloat(Qe)),me=!0);const pt=i.get("history");if(pt&&(I(pt==="true"),me=!0),i.forEach((xt,Ze)=>{Ze.startsWith("var_")&&(ie[Ze.slice(4)]=xt,me=!0)}),me){const xt=new URLSearchParams(i);["model","style","outfmt","temp","history",...Object.keys(ie).map(Ze=>`var_${Ze}`)].forEach(Ze=>xt.delete(Ze)),a(`${window.location.pathname}?${xt.toString()}`,{replace:!0})}},[c,E,a,i,j,C,y,I,k]);const[O,N]=o.useState(!1),[M,_]=o.useState(""),[$,L]=o.useState({chat:35,canvas:65}),[S,P]=o.useState(!1),[A,B]=o.useState(!1),[D,z]=o.useState(!1),Z=((Ye=c==null?void 0:c.features)==null?void 0:Ye.shortLinks)!==!1,[se,ce]=o.useState(!1),[T,H]=o.useState(null),J=o.useRef(null),ne=o.useRef(nr(n,"canvas"));o.useEffect(()=>{ne.current=nr(n,"canvas")},[n]);const Y=o.useRef(null),{messages:xe,processing:F,sendMessage:G,resendMessage:W,deleteMessage:V,editMessage:K,clearMessages:ue,cancelGeneration:Ee,addSystemMessage:Ie}=la({appId:n,chatId:ne.current}),je=o.useCallback(async(ie,me={})=>{const Ce=typeof ie=="string"?ie:null,Ne=Ce||M;if(ie&&typeof ie=="object"&&typeof ie.preventDefault=="function"&&ie.preventDefault(),!Ne.trim()||F)return;Ce||_("");let ze=Ne;Te&&(ze+=`

Selected text: "${Te}"`),ae.trim()&&(ze+=`

Current document context: ${ae.replace(/<[^>]*>/g,"").substring(0,500)}...`);try{G({displayMessage:{content:Ne,meta:{rawContent:Ne,selectedText:Te||null,hasDocumentContext:!!ae.trim(),...me}},apiMessage:{content:ze,...me},params:{modelId:m,style:me!=null&&me.bypassAppPrompts?"normal":w,temperature:p,outputFormat:h,language:r,bypassAppPrompts:!0},sendChatHistory:f}),Ce||_("")}catch(Qe){console.error("Error sending prompt:",Qe),Ie(`Error: ${t("error.sendMessageFailed","Failed to send message.")} ${Qe.message||t("error.tryAgain","Please try again.")}`,!0)}},[M,F,Te,ae,G,Ie,m,w,p,h,r,f,t]);ca({messages:xe,clearChat:()=>{ue(),ge(),ne.current=ar(n,"canvas")},sendMessage:ie=>{je(ie)},isProcessing:F,currentText:"",setInput:()=>{}});const Le=o.useCallback((ie,me)=>{const Ce=W(ie,me),{content:Ne}=Ce;(Ne||c!=null&&c.allowEmptyContent)&&je(Ne||"")},[W,je,c==null?void 0:c.allowEmptyContent]),X=tm(n,null,{quillRef:J,chatInputRef:Y},je),{content:ae,setContent:fe,setContentWithConfirmation:Re,clearContent:ge,selection:ke,selectedText:Te,cursorPosition:De,setSelection:nt,setSelectedText:at,handleSelectionChange:_t,handleEditAction:Ge}=X;o.useEffect(()=>{let ie=!0;return(async()=>{try{u(!0);const Ce=await cr(n);if(!ie)return;d(Ce),g(null)}catch(Ce){console.error("Failed to load app:",Ce),ie&&g(t("error.failedToLoadApp","Failed to load application data. Please try again later."))}finally{ie&&u(!1)}})(),()=>{ie=!1}},[n,t]),o.useEffect(()=>()=>{Ee()},[Ee]),o.useEffect(()=>{},[c]);const fr=o.useCallback(ie=>{P(!0),ie.preventDefault()},[]),ot=o.useCallback(ie=>{if(!S)return;const me=window.innerWidth,Ce=Math.max(20,Math.min(60,ie.clientX/me*100));L({chat:Ce,canvas:100-Ce})},[S]),Je=o.useCallback(()=>{P(!1)},[]);o.useEffect(()=>{if(S)return document.addEventListener("mousemove",ot),document.addEventListener("mouseup",Je),()=>{document.removeEventListener("mousemove",ot),document.removeEventListener("mouseup",Je)}},[S,ot,Je]);const it=o.useCallback(()=>{Ee(),window.pendingEdit=null},[Ee]),lt=o.useCallback(ie=>{_(ie.target.value)},[]),ct=o.useCallback(()=>{T!=null&&T.onReplace&&T.onReplace(),ce(!1),H(null)},[T]),Et=o.useCallback(()=>{T!=null&&T.onAppend&&T.onAppend(),ce(!1),H(null)},[T]),dt=o.useCallback(()=>{T!=null&&T.onCancel&&T.onCancel(),ce(!1),H(null)},[T]),ut=()=>{window.confirm(t("canvas.confirmClear","Are you sure you want to clear the document and chat history?"))&&(ge(),ue(),ne.current=ar(n,"canvas"))},mt=()=>{B(!A)},ht=o.useCallback(()=>{nt(null),at(""),J.current&&J.current.getEditor().setSelection(null)},[at,nt]),gt=o.useCallback(ie=>{if(!J.current||!ie)return;const me=J.current.getEditor(),Ce=tt(ie)?kt(ie):ie,Ne=ke?ke.index:De;ke&&ke.length>0&&me.deleteText(ke.index,ke.length),me.clipboard.dangerouslyPasteHTML(Ne,Ce),me.setSelection(Ne+Ce.length,0),fe(me.root.innerHTML),nt(null),at("")},[J,ke,De,fe,at,nt]),ft=o.useCallback(()=>{if(J.current){const me=J.current.getEditor().root.innerHTML;fe(me)}},[fe]);return o.useEffect(()=>{n&&sessionStorage.setItem(`canvas_panel_sizes_${n}`,JSON.stringify($))},[n,$]),o.useEffect(()=>{(()=>{const me=sessionStorage.getItem(`canvas_panel_sizes_${n}`);if(me)try{L(JSON.parse(me))}catch(Ce){console.error("Error loading panel sizes:",Ce)}})()},[n]),o.useEffect(()=>{const ie=i.get("content");if(ie){const me=tt(ie)?kt(ie):ie;(async()=>{try{const Ne=await Re(me,ze=>{H({...ze,title:t("canvas.confirmReplaceWithNewContentTitle","Content from Chat")}),ce(!0)});console.log("Content loading result:",Ne)}catch(Ne){console.error("Error loading initial content:",Ne)}finally{const Ne=new URLSearchParams(i);Ne.delete("content"),a(`/apps/${n}/canvas?${Ne.toString()}`,{replace:!0})}})()}},[i,n,a,Re,t]),l?s.jsx(st,{message:t("app.loading")}):b?s.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:s.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md",children:[s.jsx("p",{className:"font-bold",children:t("pages.appCanvas.errorTitle","Error")}),s.jsx("p",{children:b}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",children:t("common.retry","Retry")})]})}):s.jsxs("div",{className:"canvas-container flex flex-col h-[calc(100vh-8rem)] max-h-[calc(100vh-8rem)] min-h-0 overflow-hidden pt-4 pb-2 bg-white",children:[s.jsx(va,{app:c,appId:n,mode:"canvas",messages:xe,editorContent:ae,onClearCanvas:ut,currentLanguage:r,models:v,styles:x,selectedModel:m,selectedStyle:w,selectedOutputFormat:h,sendChatHistory:f,temperature:p,onModelChange:j,onStyleChange:y,onOutputFormatChange:C,onSendChatHistoryChange:I,onTemperatureChange:k,showConfig:A,onToggleConfig:mt,onShare:()=>z(!0),showShareButton:Z}),s.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden gap-2 px-4 pb-4",children:[s.jsx(Wu,{messages:xe,inputValue:M,onInputChange:lt,onSubmit:je,isProcessing:F,onCancel:it,onDelete:V,onEdit:K,onResend:Le,app:c,appId:n,chatId:ne.current,selectedText:Te,onClearSelection:ht,width:$.chat,inputRef:Y,onInsertAnswer:gt}),s.jsx("div",{className:"canvas-resize-handle w-1 bg-gray-300 hover:bg-gray-400 cursor-col-resize flex-shrink-0 rounded-full",onMouseDown:fr}),s.jsx(Yu,{content:ae,onContentChange:fe,onSelectionChange:_t,processing:F,showExportMenu:O,onToggleExportMenu:N,editorRef:J,width:$.canvas,app:c,onVoiceInput:ft})]}),c&&!l&&s.jsx(Qu,{onAction:(ie,me)=>Ge(ie,me,Te,r),isProcessing:F,hasSelection:!!Te,editorContent:ae}),s.jsx(em,{isOpen:se,currentContent:(T==null?void 0:T.currentContent)||"",newContent:(T==null?void 0:T.newContent)||"",title:T==null?void 0:T.title,onConfirm:ct,onAppend:Et,onCancel:dt}),Z&&D&&s.jsx(ia,{appId:n,path:window.location.pathname,params:{model:m,style:w,outfmt:h,temp:p,history:f},onClose:()=>z(!1)})]})},sm=()=>{const{t}=Q();return s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"text-indigo-600 mb-4",children:s.jsx(R,{name:"face-frown",size:"2xl",className:"w-24 h-24"})}),s.jsx("h1",{className:"text-4xl font-bold mb-2",children:"404"}),s.jsx("p",{className:"text-xl mb-6",children:t("errors.notFound.title","Page Not Found")}),s.jsx("p",{className:"text-gray-600 mb-8 text-center max-w-md",children:t("errors.notFound.message","We couldn't find the page you're looking for.")}),s.jsx(_e,{to:"/",className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:t("errors.notFound.returnHome","Return Home")})]})},nm=()=>{const{t}=Q();return s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"text-indigo-600 mb-4",children:s.jsx(R,{name:"lock",size:"2xl",className:"w-24 h-24"})}),s.jsx("h1",{className:"text-4xl font-bold mb-2",children:t("errors.unauthorized.title","Unauthorized")}),s.jsx("p",{className:"text-xl mb-6 text-center",children:t("errors.unauthorized.message","You don't have permission to access this page.")}),s.jsx(_e,{to:"/",className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:t("errors.unauthorized.goBack","Go Back")})]})},am=()=>{const{t}=Q();return s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"text-indigo-600 mb-4",children:s.jsx(R,{name:"ban",size:"2xl",className:"w-24 h-24"})}),s.jsx("h1",{className:"text-4xl font-bold mb-2",children:t("errors.forbidden.title","Forbidden")}),s.jsx("p",{className:"text-xl mb-6 text-center",children:t("errors.forbidden.message","Access to this resource is forbidden.")}),s.jsx(_e,{to:"/",className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:t("errors.forbidden.goBack","Go Back")})]})},om=()=>{const{t}=Q();return s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"text-indigo-600 mb-4",children:s.jsx(R,{name:"exclamation-triangle",size:"2xl",className:"w-24 h-24"})}),s.jsx("h1",{className:"text-4xl font-bold mb-2",children:t("errors.serverError.title","Server Error")}),s.jsx("p",{className:"text-xl mb-2 text-center",children:t("errors.serverError.message","Something went wrong on our end.")}),s.jsx("p",{className:"text-gray-600 mb-8 text-center",children:t("errors.serverError.subtitle","Please try again later.")}),s.jsx(_e,{to:"/",className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors",children:t("errors.serverError.retry","Retry")})]})},im=()=>{const{t,i18n:e}=Q(),r=e.language,n=rt(),{pageId:a}=ir(),[,i]=o.useState(""),[c,d]=o.useState(""),[l,u]=o.useState("markdown"),[b,g]=o.useState(!0),[m,w]=o.useState(null);if(o.useEffect(()=>{gr()},[]),o.useEffect(()=>{if(l==="react"&&typeof window.Babel>"u"){const p=document.createElement("script");p.src="https://unpkg.com/@babel/standalone/babel.min.js",p.async=!0,document.head.appendChild(p)}},[l]),o.useEffect(()=>{(async()=>{try{g(!0);const f=await ho(a,{language:r});if(i(f.title||""),d(f.content||""),f.contentType)u(f.contentType);else{const v=f.content||"",x=/import\s.*from|export\s|function\s.*\(|const\s.*=|<[A-Z]|useState|useEffect|React\./.test(v);u(x?"react":"markdown")}w(null)}catch(f){if(console.error("Error fetching page:",f),f.isAuthRequired){n("/unauthorized");return}if(f.isAccessDenied){n("/forbidden");return}f.status===404?w("Page not found"):w(`Failed to load page: ${f.message}`)}finally{g(!1)}})()},[a,r,n]),b)return s.jsx(st,{message:t("app.loading")});if(m)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-red-500 mb-4",children:m}),s.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:()=>n("/"),children:t("common.back")})]});const h=()=>{if(l==="react")return s.jsx(wa,{jsxCode:c,componentProps:{user:{language:r},t,navigate:n},className:"prose prose-sm sm:prose lg:prose-lg mx-auto"});{const p=qe(c||"");return s.jsx("div",{className:"prose prose-sm sm:prose lg:prose-lg mx-auto",children:s.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:p}})})}};return s.jsx("div",{className:"container",children:h()})};class ya extends o.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({errorInfo:r})}render(){return this.state.hasError?s.jsx(lm,{error:this.state.error,errorInfo:this.state.errorInfo,resetErrorBoundary:()=>{this.setState({hasError:!1,error:null,errorInfo:null})}}):this.props.children}}const lm=({error:t,resetErrorBoundary:e})=>{const{t:r}=Q();return(t==null?void 0:t.status)===401?s.jsx(xr,{to:"/unauthorized",replace:!0}):(t==null?void 0:t.status)===403?s.jsx(xr,{to:"/forbidden",replace:!0}):(t==null?void 0:t.status)>=500?s.jsx(xr,{to:"/server-error",replace:!0}):s.jsxs("div",{role:"alert",className:"p-4 m-4 bg-red-50 border border-red-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(R,{name:"exclamation-triangle",size:"lg",className:"text-red-500 mr-2"}),s.jsx("h2",{className:"text-xl font-bold text-red-700",children:r("error.title","Something went wrong")})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-700 mb-2",children:r("error.description","An unexpected error occurred in the application. The development team has been notified.")}),s.jsx("p",{className:"text-gray-500 text-sm mb-1",children:r("error.errorMessage","Error details:")}),s.jsx("div",{className:"bg-gray-100 p-2 rounded overflow-auto max-h-32 text-xs font-mono text-gray-800",children:t&&t.toString()})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("button",{onClick:e,className:"bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded transition-colors",children:r("error.tryAgain","Try Again")}),s.jsx("button",{onClick:()=>window.location.href=Pt("/"),className:"border border-indigo-600 text-indigo-600 hover:bg-indigo-50 py-2 px-4 rounded transition-colors",children:r("error.backToHome","Back to Home")})]})]})},cm=t=>e=>s.jsx(ya,{children:s.jsx(t,{...e})}),dm=({children:t})=>s.jsx(ya,{children:t}),Rr="ihub-refresh-salt",Cn="ihub-disclaimer-acknowledged",um=async()=>{try{console.log("🔍 Checking for force refresh...");const t=await ur({skipCache:!0});if(!t||!t.computedRefreshSalt)return console.warn("No refresh salt found in UI configuration"),!1;const e=t.computedRefreshSalt,r=localStorage.getItem(Rr);return console.log(`Current salt: ${e}, Stored salt: ${r}`),r?e!==r?(console.log("🔄 Salt mismatch detected - force refresh needed"),!0):(console.log("✅ Salt matches - no force refresh needed"),!1):(localStorage.setItem(Rr,e),console.log("✅ First run - stored initial salt"),!1)}catch(t){return console.error("Error checking force refresh:",t),!1}},mm=async()=>{try{console.log("🔄 Performing force refresh...");const t=await ur({skipCache:!0}),e=t==null?void 0:t.computedRefreshSalt;if(e){const n=localStorage.getItem(Cn);localStorage.clear(),sessionStorage.clear(),n&&localStorage.setItem(Cn,n),localStorage.setItem(Rr,e),console.log("✅ Cleared all caches and storage")}const r=new URL(window.location.href);r.searchParams.set("_refresh",Date.now().toString()),window.location.href=r.toString()}catch(t){console.error("Error during force refresh:",t),window.location.reload()}},hm=async()=>{await um()&&await mm()},gm=({children:t})=>(o.useEffect(()=>{(async()=>{try{await hm()}catch(r){console.error("Error initializing force refresh:",r)}})()},[]),s.jsx(dm,{children:s.jsx(Cd,{children:s.jsx(bo,{children:t})})})),Dt=t=>cm(t),fm=()=>{o.useEffect(()=>{const t=Ot();(async()=>{try{const n=Dn();console.log("Application loaded with session ID:",t),await po({type:"app_loaded",sessionId:t,metadata:n})}catch(n){console.error("Failed to log session start:",n)}})();const r=setInterval(()=>{Tr()},3600*1e3);return()=>{clearInterval(r)}},[])},pm=()=>{var u;const{i18n:t}=Q(),{uiConfig:e,isLoading:r}=Ue(),n=Mn(),a=t.language||"en",[i,c]=o.useState(null),d=n.pathname.startsWith("/apps/"),l=d?(u=n.pathname.split("/apps/")[1])==null?void 0:u.split("/")[0]:null;return o.useEffect(()=>{d&&l?cr(l).then(b=>{c(b)}).catch(()=>{c(null)}):c(null)},[d,l]),o.useEffect(()=>{if(r){console.log("📍 DocumentTitle: Skipping update, UI config still loading");return}let b="iHub Apps";if(e!=null&&e.title){const g=q(e.title,a);g&&(b=g)}if(d&&i){const g=q(i.name,a)||i.id;g&&(b=`${b} - ${g}`)}document.title=b},[e,a,d,i,r]),null},ja=o.createContext();function xm({children:t}){const[e,r]=o.useState(!1),[n,a]=o.useState(!1),[i,c]=o.useState(!0),[d,l]=o.useState(localStorage.getItem("adminToken")||""),{user:u,isAuthenticated:b}=St(),g=o.useCallback(async()=>{try{const p=localStorage.getItem("authToken"),f=p?{Authorization:`Bearer ${p}`}:{},x=(await be.get("/admin/auth/status",{headers:f})).data;if(a(x.authRequired),!x.authRequired){r(!0),c(!1);return}if(d){const j=await be.get("/admin/auth/test",{headers:{Authorization:`Bearer ${d}`}});j.status>=200&&j.status<300?r(!0):(r(!1),localStorage.removeItem("adminToken"),l(""))}else r(!1)}catch(p){console.error("Error checking auth status:",p),r(!1)}c(!1)},[d]);o.useEffect(()=>{g()},[d,g]),o.useEffect(()=>{const p=()=>{e||g()};return window.addEventListener("storage",p),window.addEventListener("focus",p),()=>{window.removeEventListener("storage",p),window.removeEventListener("focus",p)}},[e,g]),o.useEffect(()=>{e||g()},[u==null?void 0:u.id,u==null?void 0:u.isAdmin,b,e,g]);const h={isAuthenticated:e,authRequired:n,isLoading:i,token:d,login:async p=>{try{const f=await be.get("/admin/auth/test",{headers:{Authorization:`Bearer ${p}`}});return f.status>=200&&f.status<300?(l(p),r(!0),localStorage.setItem("adminToken",p),{success:!0}):{success:!1,error:f.data.message||"Authentication failed"}}catch{return{success:!1,error:"Network error during authentication"}}},logout:()=>{l(""),r(!1),localStorage.removeItem("adminToken")},checkAuthStatus:g};return s.jsx(ja.Provider,{value:h,children:t})}function dh(){const t=o.useContext(ja);if(!t)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return t}const bm=ee.lazy(()=>le(()=>import("./AdminHome-B-bUeNHD.js"),__vite__mapDeps([11,12,1,13,2,3,4,5,6]),import.meta.url)),wm=ee.lazy(()=>le(()=>import("./AdminUsageReports-Cm91qiJx.js"),__vite__mapDeps([14,1,15,2,12,13,3,4,5,6]),import.meta.url)),vm=ee.lazy(()=>le(()=>import("./AdminSystemPage-CUYMCBge.js"),__vite__mapDeps([16,1,12,13,15,2,3,4,5,6]),import.meta.url)),ym=ee.lazy(()=>le(()=>import("./AdminAppsPage-bwhFeVsm.js"),__vite__mapDeps([17,1,15,2,12,13,3,4,5,6]),import.meta.url)),jm=ee.lazy(()=>le(()=>import("./AdminAppEditPage-Cb8XKG3a.js"),__vite__mapDeps([18,1,19,20,21,15,2,22,6,23,12,13,3,4,5]),import.meta.url)),km=ee.lazy(()=>le(()=>import("./AdminShortLinks-DUh1IKf6.js"),__vite__mapDeps([24,1,12,13,15,2,3,4,5,6]),import.meta.url)),Sm=ee.lazy(()=>le(()=>import("./AdminShortLinkEditPage-DI-Brg51.js"),__vite__mapDeps([25,1,13,12,15,2,3,4,5,6]),import.meta.url)),Em=ee.lazy(()=>le(()=>import("./AdminModelEditPage-n5dkY71-.js"),__vite__mapDeps([26,1,15,2,23,12,13,19,20,21,22,6,3,4,5]),import.meta.url)),Cm=ee.lazy(()=>le(()=>import("./AdminModelsPage-BrhYji-5.js"),__vite__mapDeps([27,1,15,2,12,13,3,4,5,6]),import.meta.url)),Nm=ee.lazy(()=>le(()=>import("./AdminProvidersPage-BZjyp6af.js"),__vite__mapDeps([28,1,12,13,15,2,3,4,5,6]),import.meta.url)),Lm=ee.lazy(()=>le(()=>import("./AdminProviderEditPage-DM5o0msI.js"),__vite__mapDeps([29,1,15,2,12,13,3,4,5,6]),import.meta.url)),Mm=ee.lazy(()=>le(()=>import("./AdminPromptsPage-DR_OrjZ2.js"),__vite__mapDeps([30,1,12,13,15,2,3,4,5,6]),import.meta.url)),Rm=ee.lazy(()=>le(()=>import("./AdminPromptEditPage-CsWvTPsM.js"),__vite__mapDeps([31,1,13,15,2,0,3,4,5,6,23,19,20,21,22]),import.meta.url)),Am=ee.lazy(()=>le(()=>import("./AdminToolsPage-CiLL1EX2.js"),__vite__mapDeps([32,1,12,13,15,2,3,4,5,6]),import.meta.url)),Im=ee.lazy(()=>le(()=>import("./AdminToolEditPage-FPvNrHCs.js"),__vite__mapDeps([33,1,13,12,19,20,21,15,2,0,3,4,5,6]),import.meta.url)),Tm=ee.lazy(()=>le(()=>import("./AdminSourcesPage-94pIeor7.js"),__vite__mapDeps([34,1,12,13,15,2,3,4,5,6]),import.meta.url)),$m=ee.lazy(()=>le(()=>import("./AdminSourceEditPage-Ck_vlrSr.js"),__vite__mapDeps([35,1,12,13,21,15,2,3,4,5,6]),import.meta.url)),Fm=ee.lazy(()=>le(()=>import("./AdminPagesPage-MiJauI-f.js"),__vite__mapDeps([36,1,12,13,15,2,3,4,5,6]),import.meta.url)),Pm=ee.lazy(()=>le(()=>import("./AdminPageEditPage-DlzWM1ym.js"),__vite__mapDeps([37,1,12,13,21,15,2,3,4,5,6]),import.meta.url)),Om=ee.lazy(()=>le(()=>import("./AdminAuthPage-DeVJrdt-.js"),__vite__mapDeps([38,1,12,13,19,20,15,2,23,3,4,5,6]),import.meta.url)),Dm=ee.lazy(()=>le(()=>import("./AdminOAuthClientsPage-DvZpFuT5.js"),__vite__mapDeps([39,1,12,13,15,2,3,4,5,6]),import.meta.url)),_m=ee.lazy(()=>le(()=>import("./AdminOAuthClientEditPage-CM5uqcuD.js"),__vite__mapDeps([40,1,12,13,41,15,2,3,4,5,6]),import.meta.url)),Um=ee.lazy(()=>le(()=>import("./AdminUsersPage-371xoMQZ.js"),__vite__mapDeps([42,1,12,13,15,2,3,4,5,6]),import.meta.url)),zm=ee.lazy(()=>le(()=>import("./AdminUserEditPage-CjtQMbkv.js"),__vite__mapDeps([43,1,12,13,19,20,22,6,15,2,23,3,4,5]),import.meta.url)),Bm=ee.lazy(()=>le(()=>import("./AdminGroupsPage-C4DzFVVO.js"),__vite__mapDeps([44,1,12,13,15,2,3,4,5,6]),import.meta.url)),Vm=ee.lazy(()=>le(()=>import("./AdminGroupEditPage-BShYKI8t.js"),__vite__mapDeps([45,1,12,13,19,20,41,22,6,15,2,23,3,4,5]),import.meta.url)),Hm=ee.lazy(()=>le(()=>import("./AdminUICustomization-X8Zq4ID5.js"),__vite__mapDeps([46,1,12,13,21,15,2,3,4,5,6]),import.meta.url)),Wm=ee.lazy(()=>le(()=>import("./IntegrationsPage-Ds8-A4TS.js"),__vite__mapDeps([47,1,2,3,4,5,6]),import.meta.url)),Zm=ee.lazy(()=>le(()=>import("./TeamsWrapper-BXQlOWVY.js"),__vite__mapDeps([48,1,4,5,2,3,6]),import.meta.url)),qm=ee.lazy(()=>le(()=>import("./TeamsAuthStart-BFaAgTLW.js"),__vite__mapDeps([49,1,4,5,2,3,6]),import.meta.url)),Gm=ee.lazy(()=>le(()=>import("./TeamsAuthEnd-BbM1StWR.js"),__vite__mapDeps([50,1,4,5,2,3,6]),import.meta.url)),Nn=Dt(Md),Jm=Dt(Hu),Km=Dt(rm),Xm=Dt(im),Ym=Dt(Ad),Ar=()=>s.jsxs("div",{className:"flex items-center justify-center p-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Loading admin panel..."})]}),ve=({component:t})=>s.jsx(o.Suspense,{fallback:s.jsx(Ar,{}),children:s.jsx(t,{})});function Qm(){var i,c;fm();const{uiConfig:t}=Ue(),{platformConfig:e}=Pr(),r=((i=e==null?void 0:e.admin)==null?void 0:i.pages)||{},n=d=>r[d]!==!1;o.useEffect(()=>{_a()},[]),o.useEffect(()=>{const d=l=>{l.preventDefault(),l.stopPropagation()};return window.addEventListener("dragover",d),window.addEventListener("drop",d),()=>{window.removeEventListener("dragover",d),window.removeEventListener("drop",d)}},[]);const a=lr();return s.jsx(gm,{children:s.jsx(Ed,{children:s.jsx(xm,{children:s.jsx(o.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:s.jsx(Zm,{children:s.jsxs(Ma,{basename:a,children:[s.jsx(ju,{}),s.jsx(pm,{}),s.jsxs(Ra,{children:[s.jsx(oe,{path:"/teams/auth-start",element:s.jsx(o.Suspense,{fallback:s.jsx(Ar,{}),children:s.jsx(qm,{})})}),s.jsx(oe,{path:"/teams/auth-end",element:s.jsx(o.Suspense,{fallback:s.jsx(Ar,{}),children:s.jsx(Gm,{})})}),s.jsx(oe,{path:"/teams/tab",element:s.jsx(bn,{}),children:s.jsx(oe,{index:!0,element:s.jsx(Nn,{})})}),s.jsxs(oe,{path:"/",element:s.jsx(bn,{}),children:[s.jsx(oe,{index:!0,element:s.jsx(Nn,{})}),((c=t==null?void 0:t.promptsList)==null?void 0:c.enabled)!==!1&&s.jsx(oe,{path:"prompts",element:s.jsx(Ym,{})}),s.jsx(oe,{path:"apps/:appId",element:s.jsx(Jm,{})}),s.jsx(oe,{path:"apps/:appId/canvas",element:s.jsx(Km,{})}),s.jsx(oe,{path:"pages/:pageId",element:s.jsx(Xm,{})}),n("home")&&s.jsx(oe,{path:"admin",element:s.jsx(ve,{component:bm})}),n("usage")&&s.jsx(oe,{path:"admin/usage",element:s.jsx(ve,{component:wm})}),n("system")&&s.jsx(oe,{path:"admin/system",element:s.jsx(ve,{component:vm})}),n("apps")&&s.jsx(oe,{path:"admin/apps",element:s.jsx(ve,{component:ym})}),n("apps")&&s.jsx(oe,{path:"admin/apps/:appId",element:s.jsx(ve,{component:jm})}),n("shortlinks")&&s.jsx(oe,{path:"admin/shortlinks",element:s.jsx(ve,{component:km})}),n("shortlinks")&&s.jsx(oe,{path:"admin/shortlinks/:code",element:s.jsx(ve,{component:Sm})}),n("models")&&s.jsx(oe,{path:"admin/models",element:s.jsx(ve,{component:Cm})}),n("models")&&s.jsx(oe,{path:"admin/models/:modelId",element:s.jsx(ve,{component:Em})}),n("providers")&&s.jsx(oe,{path:"admin/providers",element:s.jsx(ve,{component:Nm})}),n("providers")&&s.jsx(oe,{path:"admin/providers/:providerId",element:s.jsx(ve,{component:Lm})}),n("pages")&&s.jsx(oe,{path:"admin/pages",element:s.jsx(ve,{component:Fm})}),n("pages")&&s.jsx(oe,{path:"admin/pages/:pageId",element:s.jsx(ve,{component:Pm})}),n("prompts")&&s.jsx(oe,{path:"admin/prompts",element:s.jsx(ve,{component:Mm})}),n("prompts")&&s.jsx(oe,{path:"admin/prompts/:promptId",element:s.jsx(ve,{component:Rm})}),n("tools")&&s.jsx(oe,{path:"admin/tools",element:s.jsx(ve,{component:Am})}),n("tools")&&s.jsx(oe,{path:"admin/tools/:toolId",element:s.jsx(ve,{component:Im})}),n("sources")&&s.jsx(oe,{path:"admin/sources",element:s.jsx(ve,{component:Tm})}),n("sources")&&s.jsx(oe,{path:"admin/sources/:id",element:s.jsx(ve,{component:$m})}),n("auth")&&s.jsx(oe,{path:"admin/auth",element:s.jsx(ve,{component:Om})}),s.jsx(oe,{path:"admin/oauth/clients",element:s.jsx(ve,{component:Dm})}),s.jsx(oe,{path:"admin/oauth/clients/:clientId",element:s.jsx(ve,{component:_m})}),n("users")&&s.jsx(oe,{path:"admin/users",element:s.jsx(ve,{component:Um})}),n("users")&&s.jsx(oe,{path:"admin/users/:userId",element:s.jsx(ve,{component:zm})}),n("groups")&&s.jsx(oe,{path:"admin/groups",element:s.jsx(ve,{component:Bm})}),n("groups")&&s.jsx(oe,{path:"admin/groups/:groupId",element:s.jsx(ve,{component:Vm})}),n("ui")&&s.jsx(oe,{path:"admin/ui",element:s.jsx(ve,{component:Hm})}),s.jsx(oe,{path:"settings/integrations",element:s.jsx(ve,{component:Wm})}),s.jsx(oe,{path:"unauthorized",element:s.jsx(nm,{})}),s.jsx(oe,{path:"forbidden",element:s.jsx(am,{})}),s.jsx(oe,{path:"server-error",element:s.jsx(om,{})}),s.jsx(oe,{path:"*",element:s.jsx(sm,{})})]})]})]})})})})})})}Oa.createRoot(document.getElementById("root")).render(s.jsx(ee.StrictMode,{children:s.jsx(Qm,{})}));export{vr as D,an as F,R as I,st as L,Pr as a,dh as b,St as c,Pt as d,be as e,jt as f,q as g,Gu as h,ur as i,s as j,ye as k,lo as l,ch as m,Me as n,We as o,Gt as p,tn as q,ih as r,Ue as s,lh as t,Q as u};
