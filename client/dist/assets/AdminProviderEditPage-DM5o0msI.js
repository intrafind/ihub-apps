import{u as E,D as o,j as e,I as c}from"./index-CdJiYb_a.js";import{e as D,u as L,r as i}from"./vendor-react-9AdXaApd.js";import{m as j}from"./adminApi-DCK2UDnY.js";import{A as N}from"./AdminAuth-w86Ms2_j.js";import{A as w}from"./AdminNavigation-CghX6zwW.js";import"./mermaid-DechTdnA.js";import"./vendor-utils-CF1RCcgi.js";import"./teams-CwMtNG0x.js";import"./vendor-ui-lZiltAcz.js";import"./vendor-forms-DyVXvDXu.js";const B=()=>{const{t,i18n:K}=E();K.language;const p=D(),{providerId:m}=L(),g="••••••••",[A,u]=i.useState(!0),[h,v]=i.useState(!1),[f,y]=i.useState(null),[P,C]=i.useState(!1),[s,b]=i.useState({id:"",name:{[o]:""},description:{[o]:""},enabled:!0,apiKey:"",apiKeySet:!1});i.useEffect(()=>{S()},[m]);const S=i.useCallback(async()=>{try{u(!0);const r=(await j(`/admin/providers/${m}`)).data,n=l=>l?typeof l=="string"?{[o]:l}:typeof l=="object"&&l!==null?l:{[o]:""}:{[o]:""},d={...r,id:r.id||"",name:n(r.name),description:n(r.description),enabled:r.enabled!==void 0?r.enabled:!0};r.apiKeySet?(d.apiKeySet=!0,d.apiKey=r.apiKeyMasked||g):(d.apiKeySet=!1,d.apiKey=""),b(d)}catch(a){y(a.message)}finally{u(!1)}},[m]),k=(a,r)=>{b(n=>({...n,[a]:r}))},x=(a,r,n)=>{b(d=>({...d,[a]:{...d[a],[r]:n}}))},I=async a=>{a.preventDefault();try{v(!0),y(null);const r={...s};(r.apiKey===g||r.apiKey==="")&&(s.apiKeySet&&r.apiKey===g?r.apiKey=g:r.apiKey===""&&delete r.apiKey),delete r.apiKeySet,delete r.apiKeyMasked,await j(`/admin/providers/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),C(!0),setTimeout(()=>{p("/admin/providers")},1500)}catch(r){y(r.message)}finally{v(!1)}};return A?e.jsxs(N,{children:[e.jsx(w,{}),e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]}):e.jsx(N,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(w,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>p("/admin/providers"),className:"inline-flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-4",children:[e.jsx(c,{name:"ArrowLeftIcon",className:"w-4 h-4 mr-2"}),t("admin.providers.backToList","Back to Providers")]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("admin.providers.edit.title","Configure Provider")}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:t("admin.providers.edit.description","Configure API credentials for this provider")})]}),P&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{name:"CheckCircleIcon",className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:t("admin.providers.edit.saved","Provider configuration saved successfully!")})]})}),f&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{name:"ExclamationCircleIcon",className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:f})]})}),e.jsxs("form",{onSubmit:I,className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("admin.providers.edit.id","Provider ID")}),e.jsx("input",{type:"text",value:s.id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("admin.providers.edit.name","Provider Name")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:s.name.en||"",onChange:a=>x("name","en",a.target.value),placeholder:"English",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"}),e.jsx("input",{type:"text",value:s.name.de||"",onChange:a=>x("name","de",a.target.value),placeholder:"Deutsch",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t("admin.providers.edit.description","Description")}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:s.description.en||"",onChange:a=>x("description","en",a.target.value),placeholder:"English",rows:2,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed resize-none"}),e.jsx("textarea",{value:s.description.de||"",onChange:a=>x("description","de",a.target.value),placeholder:"Deutsch",rows:2,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed resize-none"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[t("admin.providers.edit.apiKey","API Key"),e.jsx("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:t("admin.providers.edit.apiKeyOptional","(Optional - leave empty to use environment variable)")})]}),e.jsx("input",{type:"password",value:s.apiKey,onChange:a=>k("apiKey",a.target.value),placeholder:s.apiKeySet?t("admin.providers.edit.apiKeyPlaceholder","Enter new API key or leave unchanged"):t("admin.providers.edit.apiKeyEnter","Enter API key"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),s.apiKeySet&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(c,{name:"KeyIcon",className:"w-3 h-3 inline mr-1"}),t("admin.providers.edit.apiKeySet","An API key is currently configured")]})]}),e.jsx("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(c,{name:"InformationCircleIcon",className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:t("admin.providers.edit.info.title","About Provider API Keys")}),e.jsx("p",{children:t("admin.providers.edit.info.description","API keys configured here are used as a fallback for all models of this provider that do not have their own API key configured. If you leave this field empty, the system will use the environment variable instead.")})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:a=>k("enabled",a.target.checked),disabled:!0,className:"w-4 h-4 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 cursor-not-allowed"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:t("admin.providers.edit.enabled","Provider Enabled")})]})}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>p("/admin/providers"),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:t("admin.providers.edit.cancel","Cancel")}),e.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:h?t("admin.providers.edit.saving","Saving..."):t("admin.providers.edit.save","Save Changes")})]})]})]})]})})};export{B as default};
